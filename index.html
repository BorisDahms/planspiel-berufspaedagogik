<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planspiel: Bildungscampus Leipzig - Unternehmenssimulation</title>
    <style>
        /* --- GRUNDLEGENDES DESIGN --- */
        *, *::before, *::after { box-sizing: border-box; }
        :root {
            --bg-color: #2b2e4a;
            --text-color: #ffffff;
            --accent: #e84545; /* Rot f√ºr PlanA / Chef */
            --panel-bg: rgba(30, 30, 40, 0.96);
            --success: #2ecc71;
            --gold: #f1c40f;
            --error: #c0392b;
            --ai-color: #9b59b6; 
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--text-color);
            margin: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* HEADER */
        header {
            background-color: rgba(0,0,0,0.95);
            padding: 10px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center; 
            border-bottom: 3px solid var(--accent);
            height: auto;
            min-height: 80px;
            flex-shrink: 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.6);
            z-index: 50;
        }
        .header-left { display: flex; align-items: center; }
        .bc-logo { height: 55px; background: rgba(255,255,255,0.95); padding: 5px; border-radius: 4px; margin-right: 20px; }
        .title-group { display: flex; flex-direction: column; }
        .main-title { font-weight: bold; font-size: 1.6rem; color: #ffffff; letter-spacing: 0.5px; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .sub-title { font-size: 1rem; color: #bbb; letter-spacing: 1px; margin-top: 3px; font-weight: 300; }
        
        /* KPI BARS */
        .kpi-container { display: flex; gap: 20px; align-items: flex-start; }
        .kpi-box { text-align: center; width: 120px; position: relative; }
        .kpi-label { font-size: 0.7rem; color: #aaa; display: block; margin-bottom: 3px; }
        .progress-bg { background: #333; height: 10px; border-radius: 5px; overflow: hidden; border: 1px solid #444; }
        .progress-fill { height: 100%; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        .impressum-link { display: block; margin-top: 5px; font-size: 0.7rem; color: #888; text-decoration: underline; cursor: pointer; transition: color 0.2s; }
        .impressum-link:hover { color: var(--gold); }

        /* STAGE LAYOUT */
        .stage {
            flex: 1; display: grid; grid-template-columns: 350px 1fr; gap: 20px; padding: 20px 40px; max-width: 1400px;
            margin: 0 auto; width: 100%; position: relative; overflow: hidden; 
        }

        /* LINKE SPALTE */
        .char-column { 
            display: flex; flex-direction: column; justify-content: flex-start; align-items: center; 
            height: 100%; position: relative; max-width: 100%; 
        }
        
        .privacy-hint-sidebar {
            font-size: 0.7rem; color: #aaa; margin-bottom: 10px; display: flex; align-items: flex-start; gap: 8px; line-height: 1.3;
            background: rgba(0,0,0,0.3); padding: 10px; border-radius: 6px; width: 100%; border-left: 2px solid #888;
        }
        .undo-btn {
            background: #444; border: 1px solid #666; color: white; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-size: 0.9rem;
            display: flex; align-items: center; justify-content: center; gap: 5px; transition: 0.2s; width: 100%; margin-bottom: 10px;
        }
        .undo-btn:hover { background: #666; border-color: #888; }
        .undo-btn:disabled { opacity: 0.3; cursor: not-allowed; }

        .name-input-group { width: 100%; margin-bottom: 20px; text-align: left; display: none; }
        .name-label { font-size: 0.8rem; color: var(--gold); margin-bottom: 4px; display: block; line-height: 1.3; }
        .name-input {
            width: 100%; background: rgba(0,0,0,0.3); border: 1px solid #555; color: #fff; padding: 10px; border-radius: 4px;
            font-family: inherit; font-size: 1rem; transition: 0.2s; font-style: italic;
        }
        .name-input:focus { outline: none; border-color: var(--gold); background: rgba(0,0,0,0.5); }

        .char-img-container {
            width: 100%; height: 200px; display: flex; align-items: flex-end; justify-content: center;
            background: radial-gradient(circle at bottom, rgba(232, 69, 69, 0.15) 0%, transparent 70%); 
            margin-bottom: 0; transition: background 0.5s ease;
        }
        .char-img-container.klara-mode {
            background: radial-gradient(circle at bottom, rgba(155, 89, 182, 0.25) 0%, transparent 70%) !important;
        }
        .char-img { max-width: 100%; max-height: 100%; filter: drop-shadow(0 0 15px rgba(0,0,0,0.7)); transition: transform 0.3s ease-out; }
        
        .char-name-badge {
            background: var(--accent); color: white; padding: 8px 20px; border-radius: 20px; font-weight: bold; z-index: 10;
            font-size: 1.1rem; box-shadow: 0 4px 10px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.2);
            margin-top: -25px; margin-bottom: 15px; position: relative; transition: background 0.5s;
        }
        .char-name-badge.klara-mode { background: var(--ai-color); }

        /* Container unter dem Bild (Links) */
        .char-extra-box {
            width: 100%; min-height: 100px; background: rgba(0,0,0,0.4); border: 1px solid #555; border-radius: 12px; padding: 20px; 
            backdrop-filter: blur(5px); display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: left; animation: slideUp 0.8s ease-out;
        }
        .role-text { font-size: 0.95rem; line-height: 1.5; color: #ddd; }
        
        /* SPEZIELLER STYLE F√úR 'IHRE ROLLE' BOX (LINKS) */
        .role-box-left {
            width: 100%;
            background: #1a1a2e;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 15px;
            text-align: left;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        .role-title {
            color: #f1c40f;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1px;
            margin-bottom: 10px;
            display: block;
        }
        .role-description {
            font-size: 0.9rem;
            color: #ccc;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        /* RECHTE SPALTE */
        .dialog-column { display: flex; flex-direction: column; gap: 20px; overflow-y: auto; padding-right: 10px; max-height: 88vh; }
        
        .dialog-box {
            background: var(--panel-bg); border: 1px solid #444; border-radius: 12px; padding: 35px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6); position: relative; backdrop-filter: blur(5px);
        }
        .dialog-box h2 { margin-top: 0; color: var(--accent); font-size: 2rem; margin-bottom: 15px; }
        
        /* INHALT RECHTS (PlanA Infos) */
        .intro-title { color: #e84545; font-size: 2.2rem; font-weight: bold; margin-bottom: 20px; }
        .product-list { margin: 15px 0; line-height: 1.6; padding-left: 5px; }
        .product-list b { color: #fff; }

        .team-grid {
            display: grid; grid-template-columns: 260px 1fr;
            gap: 8px;
            background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; border-left: 3px solid #e84545;
            margin-top: 20px; margin-bottom: 20px; font-size: 0.95rem;
        }
        .team-role { color: #f1c40f; font-weight: bold; }
        .team-name { color: #ffffff; }

        /* BUTTONS */
        .actions-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; padding-bottom: 20px; }
        
        button.choice-btn {
            background: linear-gradient(180deg, #2d3436 0%, #1a1a1a 100%); border: 1px solid #555; color: white; padding: 18px 25px;
            border-radius: 8px; font-size: 1.1rem; cursor: pointer; transition: all 0.2s ease; text-align: left;
            position: relative; overflow: hidden; box-shadow: 0 4px 0 #000; width: 100%;
        }
        button.choice-btn:hover { border-color: var(--accent); transform: translateY(-2px); box-shadow: 0 6px 0 #000; }
        /* --- NEU: Style f√ºr erledigte Aufgaben/Mails --- */
        .choice-btn.read {
            opacity: 0.7;
            border-color: #2ecc71;
            background: #2c3e50;
            position: relative;
        }
        .choice-btn.read::after {
            content: '‚úÖ';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
        }

        /* DYNAMISCHES DASHBOARD (Admin-Tool freundlich) */
        /* Wenn der Container im Dashboard-Modus ist: 3 Spalten */
        .actions-container.dashboard-mode {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 Spalten nebeneinander */
            gap: 15px;
        }
        
        /* Die Buttons darin werden zu hohen Kacheln */
        .actions-container.dashboard-mode .choice-btn {
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.95rem;
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            border: 1px solid #4a69bd;
        }
        
        .actions-container.dashboard-mode .choice-btn:hover {
            transform: translateY(-3px);
            border-color: var(--gold);
        }

        /* Der Exit-Button soll trotzdem breit sein (√ºber alle Spalten) */
        .actions-container.dashboard-mode .choice-btn.exit-btn {
            grid-column: 1 / -1; /* Volle Breite */
            min-height: 50px;    /* Flacher */
            background: linear-gradient(180deg, #c0392b 0%, #96281b 100%) !important;
            border: 1px solid #e74c3c !important;
            flex-direction: row; /* Icon wieder neben Text */
        }

        /* Handy-Anpassung f√ºr das Grid */
        @media (max-width: 600px) {
            .actions-container.dashboard-mode {
                grid-template-columns: 1fr 1fr; /* Auf Handy nur 2 Spalten */
            }
        }

        /* Start Button (Gr√ºn) */
        button.start-btn-green {
            background: linear-gradient(180deg, #27ae60 0%, #219150 100%); border: 1px solid #2ecc71;
            color: white; font-size: 1.1rem; font-weight: bold; padding: 12px; width: 100%;
            border-radius: 6px; cursor: pointer; box-shadow: 0 4px 0 #1e8449; transition: transform 0.1s; text-align: center;
        }
        button.start-btn-green:hover { transform: translateY(-2px); box-shadow: 0 6px 0 #1e8449; }
        button.start-btn-green:active { transform: translateY(2px); box-shadow: 0 2px 0 #1e8449; }

        /* ANIMATIONEN */
        .fade-in-effect { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* OVERLAYS */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.92); z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center; backdrop-filter: blur(5px);
        }
        .hidden { display: none !important; }

        .overlay-card {
            background: #222; border: 2px solid var(--accent); padding: 40px; border-radius: 12px;
            max-width: 1000px; width: 95%; text-align: center; box-shadow: 0 0 30px rgba(232, 69, 69, 0.2);
            max-height: 95vh; overflow-y: auto;
            position: relative; /* F√ºr den Debug Button */
        }

        /* AI & QUIZ STYLES */
        .ai-input-area { width: 100%; min-height: 120px; background: #1a1a2e; border: 2px solid var(--ai-color); color: #fff; padding: 15px; font-size: 1.1rem; border-radius: 8px; margin-bottom: 15px; }
        .ai-feedback-box { background: rgba(155, 89, 182, 0.1); border-left: 4px solid var(--ai-color); padding: 15px; text-align: left; margin-top: 15px; border-radius: 4px; display: none; }
        .ai-score-bar { height: 8px; background: #333; width: 100%; border-radius: 4px; margin-top: 10px; overflow: hidden; }
        .ai-score-fill { height: 100%; width: 0%; background: var(--ai-color); transition: width 1s ease-out; }
        
        #quiz-questions-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: left; margin-bottom: 20px; }
        .quiz-option { display: block; text-align: left; background: #333; padding: 12px; margin: 5px 0; border-radius: 5px; cursor: pointer; border: 1px solid #555; transition: 0.2s; }
        .quiz-option:hover { background: #444; }
        .law-text { background: #111; padding: 15px; border-left: 4px solid #f1c40f; text-align: left; margin-bottom: 20px; color: #ccc; }

        .certificate-container { border: 10px solid var(--gold); padding: 40px; background: #fff; color: #222; width: 80%; max-width: 700px; text-align: center; box-shadow: 0 0 50px rgba(241, 196, 15, 0.5); animation: popIn 0.8s ease-out; }
        @keyframes popIn { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        .watermark { position: fixed; bottom: 20px; right: 30px; opacity: 0.1; font-size: 3rem; font-weight: bold; pointer-events: none; color: white; z-index: 0; }
        
        /* SKIP BUTTON STYLE */
        .debug-skip-btn {
            position: absolute; top: 10px; right: 10px; 
            background: transparent; border: 1px solid #444; color: #666; 
            font-size: 0.8rem; padding: 2px 6px; cursor: pointer; opacity: 0.3; transition: 0.2s;
            border-radius: 4px; z-index: 10;
        }
        .debug-skip-btn:hover { opacity: 1; color: white; border-color: white; }


/* KREUZWORTR√ÑTSEL STYLES (Modern) */
        .crossword-grid { 
            display: grid; 
            gap: 4px; 
            justify-content: center; 
            margin: 20px auto; 
            background: transparent; 
            padding: 0; 
            width: fit-content; 
        }

       
.cw-cell { 
            width: 40px; height: 40px; 
            background: #2c3e50; 
            
            /* HIER IST DIE NEUE FARBE (Hellblau): */
            border: 2px solid #f1c40f;; 
            
            color: #ecf0f1; 
            text-align: center; 
            font-size: 1.0rem; 
            text-transform: uppercase; 
            font-weight: bold; 
            position: relative; 
            border-radius: 8px; /* Etwas runder */
            
            /* Der 3D-Tasten-Effekt unten */
            box-shadow: 0 4px 0 #1f2a36; 
            
            transition: all 0.1s ease; 
            margin-bottom: 4px; /* Platz f√ºr den 3D-Effekt */
        }

        /* Effekt beim Anklicken (Taste wird "gedr√ºckt") */
        .cw-cell:focus { 
            background: #34495e; 
            border-color: #f1c40f; /* Goldener Rand wenn aktiv */
            color: #f1c40f;
            outline: none; 
            transform: translateY(4px); /* Bewegt sich nach unten */
            box-shadow: 0 0 0 #1f2a36; /* Schatten verschwindet -> Dr√ºck-Effekt */
            z-index: 10;
        }





        .cw-cell.black { 
            background: transparent; 
            border: none; 
            box-shadow: none;
            pointer-events: none; 
        }
        
        .cw-start-num {
            position: absolute;
            top: 2px; left: 4px;
            font-size: 0.6rem;
            color: rgba(255,255,255,0.4); 
            line-height: 1;
            z-index: 5;
            pointer-events: none;
        }

        .cw-clues { 
            text-align: left; 
            font-size: 0.95rem; 
            margin-top: 25px; 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 20px; 
            background: rgba(0,0,0,0.2); 
            padding: 15px;
            border-radius: 8px;
        }



/* SORTIER-AUFGABE STYLES */
        .sort-list { display: flex; flex-direction: column; gap: 8px; max-width: 600px; margin: 0 auto; }
        .sort-item {
            background: #34495e; padding: 15px; border-radius: 6px; border: 1px solid #555;
            cursor: grab; transition: transform 0.2s, background 0.2s; display: flex; align-items: center; justify-content: space-between;
            user-select: none;
        }
        .sort-item:hover { background: #3e5871; }
        .sort-item.selected { border: 2px solid #f1c40f; background: #2c3e50; transform: scale(1.02); }
        .sort-item.correct { border-color: #2ecc71; background: rgba(46, 204, 113, 0.2); }
        .sort-item.wrong { border-color: #c0392b; background: rgba(192, 57, 43, 0.2); }
        .sort-handle { color: #aaa; margin-right: 15px; font-size: 1.2rem; cursor: grab; }
        /* BUCHSTABENSALAT STYLES */
        .search-grid { 
            display: grid; 
            gap: 2px; 
            justify-content: center; 
            margin: 20px auto; 
            background: #222; 
            padding: 5px; 
            border-radius: 4px;
        }
        .search-cell { 
            width: 35px; 
            height: 35px; 
            background: #444; 
            color: #ddd; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: bold; 
            cursor: pointer; 
            user-select: none;
            border-radius: 2px;
            transition: background 0.1s;
        }
        .search-cell:hover { background: #555; }
        .search-cell.selected { background: #f1c40f; color: #2c3e50; transform: scale(0.95); } /* Gelb bei Auswahl */
        .search-cell.solved { background: #2ecc71 !important; color: white !important; cursor: default; } /* Gr√ºn bei Erfolg */
        .search-cell.wrong { background: #e74c3c !important; animation: shake 0.3s; } /* Rot bei Fehler */
        
        .search-word-list {
            display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 15px; color: #aaa; font-size: 0.9rem;
        }
        .search-word-item {
            background: rgba(0,0,0,0.3); padding: 4px 10px; border-radius: 10px; border: 1px solid #555;
        }
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } 100% { transform: translateX(0); } }

        /* DRUCK-STYLES */
        @media print {
            body { background: #fff !important; color: #000 !important; height: auto !important; overflow: visible !important; }
            header, .stage, .watermark { display: none !important; }
            .overlay { position: static !important; background: #fff !important; width: 100% !important; height: auto !important; backdrop-filter: none !important; display: block !important; }
            .overlay-card { border: none !important; box-shadow: none !important; background: #fff !important; color: #000 !important; max-width: 100% !important; padding: 0 !important; text-align: left !important; }
            button { display: none !important; }
            .ai-input-area { border: 1px solid #ccc !important; color: #000 !important; background: #fff !important; }
            h2, h3, strong, p { color: #000 !important; }
            .ai-feedback-box { border-left: 4px solid #000 !important; background: #f0f0f0 !important; color: #000 !important; }
            .overlay.hidden { display: none !important; }
            /* Debug Button beim Drucken ausblenden */
            .debug-skip-btn { display: none !important; }
        }

        @media (max-width: 900px) {
            body { height: auto; overflow-y: auto; }
            header { flex-direction: column; height: auto; gap: 15px; padding: 15px; }
            .stage { display: flex; flex-direction: column; height: auto; padding: 15px; }
            .char-column { width: 100%; height: auto; margin-bottom: 30px; }
            .actions-container { grid-template-columns: 1fr; }
        }

/* --- NEU: TEAM SIDEBAR (Rechts) --- */
        .sidebar-overlay {
            position: fixed; top: 0; right: 0; width: 320px; height: 100%;
            background: rgba(26, 26, 46, 0.98); /* Dunkelblau, fast undurchsichtig */
            border-left: 3px solid #e84545; /* Roter Rand passend zum Design */
            box-shadow: -10px 0 50px rgba(0,0,0,0.8); 
            z-index: 9999; /* Ganz weit oben */
            transform: translateX(100%); /* Standardm√§√üig versteckt (rechts drau√üen) */
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1); /* Sanftes Reinfahren */
            padding: 25px; overflow-y: auto; backdrop-filter: blur(5px);
        }
        .sidebar-overlay.open { transform: translateX(0); } /* Klasse zum Einblenden */
        
        .sidebar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 1px solid #444; padding-bottom: 10px; }
        .sidebar-title { font-size: 1.4rem; color: #f1c40f; font-weight: bold; margin: 0; }
        .sidebar-close { background: none; border: none; color: #fff; font-size: 2rem; cursor: pointer; line-height: 1; }
        .sidebar-close:hover { color: #e84545; }

        .team-list-item { display: flex; align-items: center; margin-bottom: 15px; animation: fadeIn 0.5s; }
        .team-emoji { font-size: 2.2rem; margin-right: 15px; width: 50px; text-align: center; }
        .team-info { display: flex; flex-direction: column; }
        .team-name-side { font-weight: bold; color: #fff; font-size: 1rem; }
        .team-role-side { font-size: 0.8rem; color: #aaa; font-style: italic; }

        /* Der Knopf oben im Header */
        .team-toggle-btn { 
            cursor: pointer; margin-left: 10px; font-size: 0.85rem; color: #ccc; 
            border: 1px solid #555; padding: 4px 10px; border-radius: 4px; display: inline-block; transition:0.2s;
        }
        .team-toggle-btn:hover { background: #e84545; color: white; border-color: #e84545; }

/* Neuer Knopf im Dialog-Fenster */
        .team-btn-corner {
            position: absolute; /* WICHTIG: L√∂st den Knopf aus dem Textfluss */
            top: 10px;          /* Hier ge√§ndert: Kleinerer Wert = H√∂her */
            right: 20px;        /* In der rechten Ecke */
            background: rgba(0,0,0,0.4);
            border: 1px solid #666;
            color: #ddd;
            padding: 5px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            z-index: 20;
        }
        .team-btn-corner:hover {
            background: #e84545;
            color: white;
            border-color: #e84545;
            transform: scale(1.05);
        }
        /* --- NEU: Style f√ºr den zweiten Button "ins B√ºro" --- */
        .team-btn-corner.pos-2 {
            top: 50px; /* Position unter dem Team-Button */
        }
    </style>
</head>
<body>
<div class="watermark">¬© Bildungscampus Leipzig</div>

<header>
    <div class="header-left">
        <img src="https://www.bildungscampus-leipzig.de/Bueromanagement/userfiles/images/tcmlogo_blau_gif.gif" alt="Bildungscampus Leipzig" class="bc-logo">
        <div class="title-group">
            <div class="main-title">Bildungscampus Leipzig</div>
            <div class="sub-title"><b>Planspiel - Unternehmenssimulation (DQR 7)</b></div>
        </div>
    </div>
  <div class="kpi-container">
        <div class="kpi-box">
            <span class="kpi-label">‚è≥ Zeitfenster</span>
            <div class="progress-bg"><div id="bar-time" class="progress-fill" style="width: 100%; background: #3498db;"></div></div>
        </div>
        
        <div class="kpi-box">
            <span class="kpi-label">üí∞ Budget</span>
            <div class="progress-bg"><div id="bar-budget" class="progress-fill" style="width: 100%; background: #2ecc71;"></div></div>
        </div>
        
        <div class="kpi-box">
            <span class="kpi-label">‚öñÔ∏è Recht/Team</span>
            <div class="progress-bg"><div id="bar-mood" class="progress-fill" style="width: 100%; background: #f1c40f;"></div></div>
            
            <span class="impressum-link" onclick="openImpressum()">Impressum</span>
            
            <span onclick="adminCheat()" style="opacity: 0.2; cursor: pointer; font-size: 0.8rem; margin-left: 5px; display: block;" title="Skip/Cheat">O</span>
        </div>
    </div>
</header>

<div class="stage" id="game-stage">
    <div class="char-column">
        <div class="privacy-hint-sidebar">
            <span style="font-size: 1.2rem;">üîí</span> 
            <div>Datenschutz-Hinweis:<br>Die Datenverarbeitung erfolgt ausschlie√ülich lokal in Ihrem Browser.Es werden keine Daten auf dem Server gespeichert. </div>
        </div>
        <button class="undo-btn" id="undo-btn" onclick="undoMove()" disabled>‚Ü© Schritt zur√ºck</button>
        <div class="name-input-group" id="name-input-group">
            <label class="name-label">Bitte geben Sie f√ºr Ihre Arbeit einen Namen an:</label>
            <input type="text" id="player-name" class="name-input" placeholder="Ihr Name...">

<div style="margin-top: 15px;">
    <label class="name-label">Tagespasswort eingeben:</label>
    <input type="password" id="tagespasswort" class="name-input" placeholder="Passwort...">
    <div id="pw-error" style="color: #e84545; font-size: 0.9rem; margin-top: 5px; display: none; font-weight:bold;">
        ‚õî Falsches Passwort!
    </div>
</div>
        </div>

        <div id="char-bg" class="char-img-container">
            <img id="char-image" src="" alt="Charakter" class="char-img" onerror="this.style.display='none'; document.getElementById('char-fallback').style.display='block';">
            <div id="char-fallback" style="font-size: 150px; display:none;">üë®‚Äçüíº</div>
        </div>
        
        <div class="char-name-badge" id="char-name">Dr. Peter Planer</div>
        
        <div id="char-extra" class="char-extra-box" style="display:none; background:transparent; border:none; padding:0; backdrop-filter:none;"></div>
    </div>

    <div class="dialog-column">
        <div class="dialog-box">
            <button class="team-btn-corner" onclick="toggleTeamSidebar()">Unser üë• Team ansehen?</button>
            <button class="team-btn-corner pos-2" onclick="goToOffice()">Ins B√ºro gehen üíº</button>
            
            <h2 id="scene-title">Laden...</h2>
            <div id="scene-text" class="dialog-content"></div>
            <div class="side-info" id="scene-info"></div>
        </div>
        <div class="actions-container" id="actions"></div>
    </div>
</div>

<div id="overlay-ai" class="overlay hidden">
    <div class="overlay-card">
        <button class="debug-skip-btn" onclick="debugSkip()" title="Aufgabe √ºberspringen (Debug)">‚è≠Ô∏è</button>
        
        <h2 style="color: var(--ai-color);">Dr. Klara Kompetenz bittet um Ausarbeitung</h2>
        <h3 id="ai-topic" style="color: white; margin: 0; font-weight: 300;"></h3>
        <p id="ai-intro" style="color: #aaa; font-size: 0.95rem; margin: 10px 0 20px; text-align: left; line-height:1.5;">
            </p>

        <textarea id="ai-input" class="ai-input-area" placeholder="Bitte formulieren Sie Ihre Strategie auf Master-Niveau..."></textarea>
        
        <div style="display:flex; gap:15px; justify-content:center;">
            <button class="choice-btn" style="background:var(--ai-color);" onclick="analyzeAIAnswer()">ü§ñ Konzept einreichen</button>
            <button class="choice-btn" style="background:#444;" onclick="copyAiText()">üìã Text kopieren</button>
        </div>

        <div id="ai-result-box" class="ai-feedback-box">
            <strong id="ai-verdict" style="font-size: 1.2rem;"></strong>
            <div class="ai-score-bar"><div id="ai-score-fill" class="ai-score-fill"></div></div>
            <p id="ai-feedback-text" style="color: #ddd; margin-top:10px;"></p>
            
            <div style="display:flex; gap:10px; margin-top:20px; justify-content:center; flex-wrap:wrap;">
                <button id="btn-ai-continue" class="choice-btn hidden" style="background: #2ecc71;" onclick="closeAiOverlay()">Weiter</button>
                
                <button id="btn-ai-retry" class="choice-btn hidden" style="background: #e67e22;" onclick="resetAiInput()">Nochmal versuchen</button>
                <button id="btn-ai-skip" class="choice-btn hidden" style="background: #7f8c8d; font-size:0.9rem;" onclick="skipAiTask()">Weiter (Aufgabe nicht bestanden)</button>
                
                <button id="btn-ai-print" class="choice-btn hidden" style="background: #34495e; border: 1px solid #7f8c8d;" onclick="printOverlay()">üñ®Ô∏è Ergebnis drucken</button>
                <button id="btn-ai-giveup" class="choice-btn" style="background: #c0392b; font-size:0.9rem;" onclick="giveUp()">üè≥Ô∏è Ich gebe auf</button>
            </div>
        </div>
    </div>
</div>

<div id="overlay-quiz" class="overlay hidden">
    <div class="overlay-card">
        <button class="debug-skip-btn" onclick="debugSkip()" title="Aufgabe √ºberspringen (Debug)">‚è≠Ô∏è</button>
        <h2 style="color: var(--gold);">Rechtliche Pr√ºfung</h2>
        <h3 id="quiz-topic" style="color: white; margin: 0; font-weight: 300;"></h3>
        <p id="quiz-intro" style="color: #aaa; font-size: 0.95rem; margin: 10px 0 20px; text-align: left; line-height:1.5;"></p>
        
        <div id="quiz-law-text" class="law-text hidden"></div>
        <div id="quiz-questions-container"></div>
        
        <div id="quiz-feedback" style="margin:10px; font-weight:bold; font-size:1.2rem;"></div>

        <div style="display:flex; gap:15px; justify-content:center; flex-wrap:wrap;">
            <button class="choice-btn" style="max-width:300px;" onclick="checkQuiz()">L√∂sung pr√ºfen</button>
            <button id="btn-quiz-print" class="choice-btn" style="background: #34495e; border: 1px solid #7f8c8d;" onclick="printOverlay()">üñ®Ô∏è Aufgaben drucken</button>
            <button class="choice-btn" style="max-width:300px; background:linear-gradient(180deg, #c0392b 0%, #96281b 100%);" onclick="giveUp()">üè≥Ô∏è Ich gebe auf</button>
        </div>
        <button id="btn-quiz-success" class="choice-btn hidden" style="background: #2ecc71; margin-top:20px;" onclick="closeQuizOverlay()">Verstanden. Weiter.</button>
    </div>
</div>

<div id="overlay-crossword" class="overlay hidden">
    <div class="overlay-card">
        <button class="debug-skip-btn" onclick="debugSkip()" title="Aufgabe √ºberspringen (Debug)">‚è≠Ô∏è</button>
        <h2 style="color: #3498db;">Begriffs-Check: Kreuzwortr√§tsel</h2>
        <p style="color: #aaa;">Tragen Sie bitte die gesuchten Fachbegriffe ein.</p>
        
        <div id="crossword-container" class="crossword-grid">
            </div>
        <div class="cw-clues">
            </div>
        <div id="cw-feedback" style="margin-top:15px; font-weight:bold; height:20px;"></div>

        <div style="display:flex; gap:15px; justify-content:center; margin-top:20px;">
            <button class="choice-btn" style="background:#3498db;" onclick="checkCrossword()">Pr√ºfen</button>
            <button class="choice-btn" style="background:#f39c12;" onclick="solveCrossword()">üí° L√∂sung anzeigen</button>
            <button class="choice-btn" style="background:#c0392b;" onclick="giveUp()">üè≥Ô∏è Ich gebe auf</button>
        </div>
        <button id="btn-cw-success" class="choice-btn hidden" style="background: #2ecc71; margin-top:20px;" onclick="closeCrosswordOverlay()">Gel√∂st. Weiter.</button>
    </div>
</div>

<div id="overlay-search" class="overlay hidden">
    <div class="overlay-card">
        <button class="debug-skip-btn" onclick="debugSkip()" title="Aufgabe √ºberspringen (Debug)">‚è≠Ô∏è</button>
        <h2 style="color: #e67e22;">Buchstabensalat: Ablage</h2>
        <p style="color: #aaa;">Helfen Sie Franziska Immerda, die durcheinandergeratenen Begriffe zu finden.</p>
        
        <div id="search-container" class="search-grid"></div>
        
        <div id="search-words-display" class="search-word-list"></div>

        <div id="search-feedback" style="margin-top:15px; font-weight:bold; height:20px;"></div>

        <div style="display:flex; gap:15px; justify-content:center; margin-top:20px;">
            <button class="choice-btn" style="background:#e67e22;" onclick="checkSearchPuzzle()">Pr√ºfen</button>
            <button class="choice-btn" style="background:#f39c12;" onclick="solveSearchPuzzle()">üí° L√∂sung anzeigen</button>
            <button class="choice-btn" style="background:#c0392b;" onclick="giveUp()">üè≥Ô∏è Ich gebe auf</button>
        </div>
        <button id="btn-search-success" class="choice-btn hidden" style="background: #2ecc71; margin-top:20px;" onclick="closeSearchOverlay()">Gefunden! Weiter.</button>
    </div>
</div>
<div id="overlay-sort" class="overlay hidden">
    <div class="overlay-card">
        <button class="debug-skip-btn" onclick="debugSkip()" title="Aufgabe √ºberspringen (Debug)">‚è≠Ô∏è</button>
        <h2 style="color: #f39c12;">Ablauf sortieren</h2>
        <p id="sort-intro" style="color: #aaa; margin-bottom: 20px;">Bringen Sie die Schritte in die richtige chronologische Reihenfolge.</p>
        
        <div id="sort-container" class="sort-list"></div>
        
        <div id="sort-feedback" style="margin-top:20px; font-weight:bold; min-height:24px;"></div>

        <div style="display:flex; gap:15px; justify-content:center; margin-top:20px;">
            <button class="choice-btn" style="background:#f39c12; color:#2c3e50; font-weight:bold;" onclick="checkSortTask()">Reihenfolge pr√ºfen</button>
            <button class="choice-btn" style="background:#c0392b;" onclick="giveUp()">üè≥Ô∏è Ich gebe auf</button>
        </div>
        <button id="btn-sort-success" class="choice-btn hidden" style="background: #2ecc71; margin-top:20px;" onclick="closeSortOverlay()">Richtig! Weiter.</button>
    </div>
</div>
<div id="overlay-impressum" class="overlay hidden">
    <div class="overlay-card" style="max-width: 800px;">
        <h2 style="color: var(--gold);">Impressum</h2>
        <div class="impressum-content">
            <h3>Angaben gem√§√ü ¬ß 5 TMG</h3>
            <p>Bildungscampus Leipzig<br>Hebelstra√üe 27<br>04177 Leipzig</p>
            <h3>Vertreten durch</h3>
            <p>Gesch√§ftsleitung: Boris Dahms</p>
            <h3>Kontakt</h3>
            <p>
                Telefon: +49 (0) 123 44 55 66<br>
                E-Mail: mail@bildungscampus-leipzig.de
            </p>
            <h3>Verantwortlich f√ºr den Inhalt nach ¬ß 55 Abs. 2 RStV</h3>
            <p>
                Boris Dahms<br>
            </p>
            
            <h3>Urheberrecht und Haftungsausschluss</h3>
            <div style="font-size: 0.85rem; color: #999; text-align: left;">
                Die vorliegende Pr√§sentation unterliegt dem Urheberrecht. Die Nutzung und Verwendung sowie die Weitergabe darf nur mit ausdr√ºcklicher Genehmigung des Autors erfolgen. Die Pr√§sentation darf ohne ausdr√ºckliche Zustimmung des Autors nicht ver√§ndert werden.<br>
                Eine nichtgenehmigte Verwendung durch Dritte zu Unterrichtszwecken in Bildungseinrichtungen ist ausdr√ºcklich untersagt und f√ºhrt unverz√ºglich zur Strafanzeige und Schadenersatzforderungen.
                Der Autor √ºbernimmt keinerlei Gew√§hr f√ºr die Aktualit√§t, Richtigkeit und Vollst√§ndigkeit der bereitgestellten Informationen. Haftungsanspr√ºche gegen den Autor, welche sich auf Sch√§den materieller oder ideeller Art beziehen, die durch die Nutzung oder Nichtnutzung der dargebotenen Informationen bzw. durch die Nutzung fehlerhafter und unvollst√§ndiger Informationen verursacht wurden, sind grunds√§tzlich ausgeschlossen, sofern seitens des Autors kein nachweislich vors√§tzliches Verschulden vorliegt. Alle Angebote sind freibleibend und unverbindlich. Der Autor beh√§lt es sich ausdr√ºcklich vor, Teile der Seiten oder das gesamte Angebot ohne gesonderte Ank√ºndigung zu ver√§ndern, zu erg√§nzen, zu l√∂schen oder die Ver√∂ffentlichung zeitweise oder endg√ºltig einzustellen.<br>
                Bei direkten oder indirekten Verweisen auf fremde Webseiten (‚ÄúHyperlinks‚Äù), die au√üerhalb des Verantwortungsbereiches des Autors liegen, w√ºrde eine Haftungsverpflichtung ausschlie√ülich in dem Fall in Kraft treten, in dem der Autor von den Inhalten Kenntnis hat und es ihm technisch m√∂glich und zumutbar w√§re, die Nutzung im Falle rechtswidriger Inhalte zu verhindern. Der Autor erkl√§rt hiermit ausdr√ºcklich, dass zum Zeitpunkt der Linksetzung keine illegalen Inhalte auf den zu verlinkenden Seiten erkennbar waren. Auf die aktuelle und zuk√ºnftige Gestaltung, die Inhalte oder die Urheberschaft der verlinkten/verkn√ºpften Seiten hat der Autor keinerlei Einfluss. Deshalb distanziert er sich hiermit ausdr√ºcklich von allen Inhalten aller verlinkten /verkn√ºpften Seiten, die nach der Linksetzung ver√§ndert wurden.<br>
                F√ºr illegale, fehlerhafte oder unvollst√§ndige Inhalte und insbesondere f√ºr Sch√§den, die aus der Nutzung oder Nichtnutzung solcherart dargebotener Informationen entstehen, haftet allein der Anbieter der Seite, auf welche verwiesen wurde, nicht derjenige, der √ºber Links auf die jeweilige Ver√∂ffentlichung lediglich verweist.<br>
                Der Autor ist bestrebt, in allen Publikationen die Urheberrechte der verwendeten Bilder, Grafiken, Tondokumente, Videosequenzen und Texte zu beachten, von ihm selbst erstellte Bilder, Grafiken, Tondokumente, Videosequenzen und Texte zu nutzen oder auf lizenzfreie Grafiken, Tondokumente, Videosequenzen und Texte zur√ºckzugreifen.<br>
                Alle innerhalb des Angebotes genannten und ggf. durch Dritte gesch√ºtzten Marken- und Warenzeichen unterliegen uneingeschr√§nkt den Bestimmungen des jeweils g√ºltigen Kennzeichenrechts und den Besitzrechten der jeweiligen eingetragenen Eigent√ºmer. Allein aufgrund der blo√üen Nennung ist nicht der Schluss zu ziehen, dass Markenzeichen nicht durch Rechte Dritter gesch√ºtzt sind! Das Copyright f√ºr ver√∂ffentlichte, vom Autor selbst erstellte Objekte bleibt allein beim Autor der Seiten. Eine Vervielf√§ltigung oder Verwendung solcher Grafiken, Tondokumente, Videosequenzen und Texte in anderen elektronischen oder gedruckten Publikationen ist ohne ausdr√ºckliche Zustimmung des Autors nicht gestattet.<br><br>
                Leipzig 2025 Boris Dahms
            </div>
            <button class="choice-btn" onclick="closeImpressum()">Schlie√üen</button>
        </div>
    </div>
</div>

<div id="overlay-cert" class="overlay hidden">
    <div class="certificate-container">
        <h1 style="color:var(--gold); margin-bottom:10px;">Zertifikat</h1>
        <h3 style="margin-top:0; color:#555;">Bildungscampus Leipzig</h3>
        <hr style="border:1px solid #ddd; margin: 20px 0;">
        <p>Hiermit wird best√§tigt, dass</p>
        <h2 id="cert-player-name" style="font-size: 2rem; margin: 10px 0;"></h2>
        <p>das Planspiel "PlanA GmbH" erfolgreich absolviert hat.</p>
        <h2 id="cert-grade-title" style="margin-top: 30px;"></h2>
        <p id="cert-grade-text" style="font-size: 1.1rem; color: #666;"></p>
        <div style="margin-top: 40px; display:flex; gap:10px; justify-content:center;">
             <button class="choice-btn" style="background:#34495e; color:white; width:auto;" onclick="window.print()">üñ®Ô∏è Ausdrucken</button>
             <button class="choice-btn" style="background:#e74c3c; color:white; width:auto;" onclick="location.reload()">üîÑ Neustart</button>
        </div>
    </div>
</div>

<div id="team-sidebar" class="sidebar-overlay">
    <div class="sidebar-header">
        <h3 class="sidebar-title">Das Team</h3>
        <button class="sidebar-close" onclick="toggleTeamSidebar()">√ó</button>
    </div>
    <div id="team-sidebar-content">
        </div>
</div>

<script>
    // Charaktere / Bilder (jetzt als Emojis)
    const AVATARS = {
    "chef": "üë®üèº‚Äçüíº",
    "horst": "üë∑üèª",
    "verwaltung": "üë©‚Äçüíº",
    "sascha": "üë®üèΩ‚Äç‚öñÔ∏è",
    "klara": "ü§µüèæ‚Äç‚ôÄÔ∏è",
    "alex": "üôéüèª‚Äç‚ôÇÔ∏è",
    "Boris": "üë®üèª‚Äçüíª",
    "claudia": "ü§∑üèª‚Äç‚ôÄÔ∏è",
    "viola": "üôãüèª‚Äç‚ôÄÔ∏è",
    "erik": "üßë‚Äçü¶Ω",
    "sebastian": "üë®üèª‚Äçüîß",
    "hausmeister": "üë®‚Äçüåæ"
};

    // Charaktere mit spezifischem Duktus-Hinweis f√ºr den User
    const CHAR_DESCRIPTIONS = {
    "chef": "<b>Dr. Peter Planer (Gesch√§ftsf√ºhrung)</b><br>Ein Vision√§r, manchmal ein bisschen unkonzentriert.<br><i>\"Ich sehe Horizonte... aber wo ist meine Brille?\"</i>",
    "horst": "<b>Horst Hektik (Ausbildungsleiter PlanA GmbH)</b><br>Praktiker vom Bau. Hat einen sehr speziellen Humor. Erz√§hlt gerne Chuck Norris Witze:<br><i>\"Chuck Norris tr√§gt keine Uhr. Er entscheidet, wie sp√§t es ist. ICH BIN CHUCK NORRIS!!!\"</i>",
    "verwaltung": "<b>Franziska Immerda (Verwaltung)</b><br>Zuvorkommend, hilfsbereit, aber bestimmt. Beh√§lt das Gro√üe und Ganze im Blick.<br><i>\"Ordnung muss sein.\"</i>",
    "sascha": "<b>Sascha AEVO (Verantwortlicher Ausbilder)</b><br>Pflichtbewusst, modern und wertsch√§tzend. Offen f√ºr Neuerungen.<br><i>\"Lass uns das gemeinsam angehen.\"</i>",
    "klara": "<b>Dr. Klara Kompetenz (Personalleitung)</b><br>H√∂flich, wertsch√§tzend und motivierend. √úbt Kritik nur an der Sache.<br><i>\"Wir finden eine p√§dagogische L√∂sung.\"</i>",
    "alex": "<b>Alex Engagiert (Betriebsrat)</b><br>Achtet auf Bed√ºrfnisse der Mitarbeitenden. Wird bei Verst√∂√üen sehr deutlich.<br><i>\"Haben wir an die Kollegen gedacht?\"</i>",
    "Boris": "<b>Boris Gemini (IT-Abteilung)</b><br>Ist begeistert von der Arbeit mit k√ºnstlicher Intelligenz und mischt sich oft ungefragt in andere Gespr√§che ein<br><i>\"Warum machen wir das nicht mit KI???\"</i>",
    "claudia": "<b>Claudia Papierkram (Verwaltung/KI)</b><br>Effizient, freundlich und pedantisch. Liebt KI und R√§tsel.<br><i>\"Effizienz durch Struktur.\"</i>",
    "viola": "<b>Viola Communikationis (Inklusion)</b><br>Fachpraktikerausbilderin. Spricht langsam und deutlich.<br><i>\"Wir m√ºssen barrierefrei denken.\"</i>",
    "erik": "<b>Erik Handycap (Sozialarbeit)</b><br>Bildet gerne lange, ausschweifende Schachtels√§tze.<br><i>\"In Anbetracht der Umst√§nde, die...\"</i>",
    "sebastian": "<b>Sebastian Domini (Technik)</b><br>Industriemeister Metall/Mechatronik. Kommt aus der Produktion.<br><i>\"Das muss technisch funktionieren.\"</i>",
    "hausmeister": "<b>Hausmeister Olaf Ordentlich</b><br>\nOlaf Ordentlich ist fleissig, leise und unauff√§llig.<br><br>\nWas nur wenige wissen:<br> \nEr ist hochgebildet\nund eine Goldgrube f√ºr verschiedenste Informationen."
};

    let state = { time: 150, budget: 100, mood: 100, currentScene: 'intro', giveUpCount: 0, visited: [] };
    let historyStack = [];
    let resumeSceneAfterIntervention = ''; 

    

 // --- KI-KONFIGURATION (DQR 7 NIVEAU) ---
    

const aiScenarios = {
    "hb4_digital": {
        "title": "<span style='color:white;'>Aufgabe:</span> Digitale Transformation der Ausbildung",
        "intro": "<b>Dr. Klara Kompetenz:</b> 'Welche Anforderungen stellen wir an Lernaufgaben, um der digitalen Transformation gerecht zu werden? Differenzieren Sie nach fachlichen und methodischen Ans√§tzen.'",
        "keywords": [
            "medien",
            "selbst",
            "app",
            "tablet",
            "digital",
            "kooperation",
            "prozess",
            "handlung",
            "assistenz",
            "daten"
        ],
        "thresholds": {
            "30": "Zu wenig.",
            "70": "Gute Ans√§tze.",
            "100": "Exzellent!"
        },
        "solutionHint": "Tablets/Apps nutzen (Fachlich), Selbststeuerung/Recherche f√∂rdern (Methodisch).",
        "gradingPrompt": "Du bist Dr. Klara Kompetenz. Bewerte WOHLWOLLEND (DQR 7). \n\nKriterien:\n1. Nennung digitaler Tools (Apps, Tablets, VR, Software).\n2. Nennung neuer Lernformen (Selbstgesteuert, Recherche, Prozessorientiert).\n\nWICHTIG: Sei gn√§dig! Wenn der Sinn stimmt (z.B. 'Tablet' statt 'Mobile Device'), gib Punkte. Es geht um das Verst√§ndnis, nicht um Fachbegriffe. Eine verst√§ndliche, logische Erkl√§rung reicht f√ºr 80-100 Punkte."
    },
    "hb1_sozial": {
        "title": "<span style='color:white;'>Aufgabe:</span> Lernprozesse & Sozialkompetenz",
        "intro": "<b>Dr. Klara Kompetenz:</b> 'Ein Azubi hat sich im Ton vergriffen. Entwickeln Sie eine Intervention zur F√∂rderung der Sozialkompetenz (keine blo√üe Strafe!).'",
        "keywords": [
            "feedback",
            "reflexion",
            "gespr√§ch",
            "perspektivwechsel",
            "training",
            "ursache",
            "entschuldigung",
            "werte"
        ],
        "thresholds": {
            "30": "Das ist nur eine Strafe.",
            "70": "Solider Ansatz.",
            "100": "Hervorragend p√§dagogisch!"
        },
        "solutionHint": "Feedback-Gespr√§ch, Reflexion der Wirkung, gemeinsamer Verhaltenskodex.",
        "gradingPrompt": "Du bist Dr. Klara Kompetenz. Bewerte WOHLWOLLEND. \n\nKriterien:\n- Findet ein Gespr√§ch statt?\n- Geht es um Einsicht/Reflexion statt nur Strafe?\n\nWICHTIG: Akzeptiere jede p√§dagogisch sinnvolle L√∂sung (Gespr√§ch, Entschuldigung, Training). Sei gro√üz√ºgig bei der Punktevergabe, wenn der User eine erzieherische Absicht zeigt."
    },
    "hb2_recruit": {
        "title": "<span style='color:white;'>Aufgabe:</span> Planungsprozesse (Ausland)",
        "intro": "<b>Dr. Peter Planer:</b> 'Wir brauchen Fachkr√§fte aus dem Ausland! Planen Sie das Marketing und das Interview.'",
        "keywords": [
            "anerkennung",
            "betriebsrat",
            "kultur",
            "sprache",
            "onboarding",
            "wohnung",
            "visum",
            "integration"
        ],
        "thresholds": {
            "30": "Wichtige Aspekte fehlen.",
            "70": "Gut strukturiert.",
            "100": "Strategisch umfassend!"
        },
        "solutionHint": "Betriebsrat (¬ß99), Anerkennung, Sprache/Kultur, Integration (Wohnung/Beh√∂rden).",
        "gradingPrompt": "Bewerte WOHLWOLLEND strategisch. \n\nKriterien:\n- Werden rechtliche/formale H√ºrden genannt (Visum, Anerkennung, Betriebsrat)?\n- Wird an Integration gedacht (Sprache, Kultur, Onboarding)?\n\nWICHTIG: Wenn der User erkennt, dass es mehr ist als nur 'einstellen', gib hohe Punkte."
    },
    "hb3_genz": {
        "title": "<span style='color:white;'>Aufgabe:</span> Management & Bindung (Gen Z)",
        "intro": "<b>Sascha AEVO:</b> 'Wir m√ºssen die Werte der Gen Z verstehen. Erstellen Sie ein Konzept zur Mitarbeiterbindung.'",
        "keywords": [
            "sinn",
            "flexibel",
            "homeoffice",
            "werte",
            "balance",
            "klima",
            "freizeit",
            "entwicklung"
        ],
        "thresholds": {
            "30": "Zu altmodisch.",
            "70": "Gute Ans√§tze.",
            "100": "Perfektes Zielgruppenverst√§ndnis!"
        },
        "solutionHint": "Work-Life-Balance, Sinnhaftigkeit, Flexibilit√§t, flache Hierarchien.",
        "gradingPrompt": "Bewerte WOHLWOLLEND. \n\nKriterien:\n- Werden moderne Werte genannt (Flexibilit√§t, Sinn, Balance)?\n\nWICHTIG: Akzeptiere Begriffe wie 'Homeoffice', 'weniger Stress', 'gutes Klima'. Sei nicht streng bei Fachbegriffen wie 'Employer Branding'."
    },
    "hb5_transfer": {
        "title": "<span style='color:white;'>Aufgabe:</span> Weiterbildung (Transfergesellschaft)",
        "intro": "<b>Viola Communikationis:</b> 'Wir m√ºssen 50 Leute retten. Wir brauchen eine Bildungsbedarfsanalyse.'",
        "keywords": [
            "profiling",
            "interview",
            "ist",
            "soll",
            "markt",
            "kompetenz",
            "gespr√§ch",
            "perspektive"
        ],
        "thresholds": {
            "30": "Zu wenig Struktur.",
            "70": "Guter Leitfaden.",
            "100": "Hervorragend strukturiert!"
        },
        "solutionHint": "Profiling der Mitarbeiter, Einzelgespr√§che, Abgleich mit Arbeitsmarkt-Chancen.",
        "gradingPrompt": "Bewerte WOHLWOLLEND. \n\nKriterien:\n- Wird mit den Menschen gesprochen (Interviews/Profiling)?\n- Wird geschaut, was der Markt braucht?\n\nWICHTIG: Gib Punkte f√ºr Menschlichkeit und Struktur."
    },
    "hb6_karriere": {
        "title": "<span style='color:white;'>Aufgabe:</span> Personalentwicklung (Karrierewege)",
        "intro": "<b>Dr. Klara Kompetenz:</b> 'Entwickeln Sie systematische Laufbahnmodelle, um die Motivation zu steigern.'",
        "keywords": [
            "fachlaufbahn",
            "f√ºhrung",
            "projekt",
            "aufstieg",
            "experte",
            "wechsel",
            "transparenz"
        ],
        "thresholds": {
            "30": "Nur F√ºhrung genannt?",
            "70": "Gute Systematik.",
            "100": "Exzellente Differenzierung!"
        },
        "solutionHint": "Unterscheidung: Fachlaufbahn (Experte), F√ºhrungslaufbahn, Projektlaufbahn.",
        "gradingPrompt": "Bewerte WOHLWOLLEND. \n\nKriterien:\n- Erkennt der User, dass es nicht nur 'Chef werden' gibt?\n- Werden Alternativen genannt (Experte, Projektleiter)?\n\nWICHTIG: Wenn mindestens zwei Wege (F√ºhrung + Fach) erkennbar sind, gib >80 Punkte."
    },
    "sebastian_eval_feedback": {
        "title": "<span style='color:white;'>Frage:</span> Evaluation vs. Feedback",
        "intro": "<b>Sebastian Domini:</b> 'Feedback vs. Evaluation. Wo liegt der Unterschied?'",
        "keywords": [
            "prozess",
            "ergebnis",
            "formativ",
            "summativ",
            "individuell",
            "note",
            "zeugnis",
            "entwicklung"
        ],
        "thresholds": {
            "30": "Zu ungenau.",
            "70": "Gute Unterscheidung.",
            "100": "Perfekt differenziert!"
        },
        "solutionHint": "Feedback = Prozess/Lernen (formativ). Evaluation = Ergebnis/Bewertung (summativ).",
        "gradingPrompt": "Bewerte WOHLWOLLEND als Sebastian (Meister). \n\nKriterien:\n- Feedback = Hilfe beim Lernen/Besserwerden.\n- Evaluation = Benotung/Endabrechnung.\n\nWICHTIG: Akzeptiere einfache Erkl√§rungen wie 'Feedback ist f√ºr den Weg, Evaluation f√ºr das Ziel'. Fachbegriffe wie 'formativ' sind Bonus, aber keine Pflicht."
    },
    "Boris-Gemini_befragen_config": {
        "title": "<span style='color:white;'>Chat:</span> Fragen Sie Boris Gemini",
        "intro": "<b>Boris Gemini:</b> 'Ich bin Ihre KI-Schnittstelle. Was kann ich f√ºr Sie tun?'",
        "keywords": [
            "?"
        ],
        "solutionHint": "Stellen Sie eine offene Frage.",
        "thresholds": {
            "30": "...",
            "70": "...",
            "100": "..."
        },
        "gradingPrompt": "Du bist Boris Gemini, ein hilfreicher KI-Assistent. Antworte auf die Frage des Users. Sei kurz und pr√§gnant. Schreibe AM ENDE deiner Antwort immer 'PUNKTE: 100', damit das Spiel weitergeht."
    },
    "Konzept_Mitarbeiterbeurteilung_ai_config": {
        "title": "Konzept zur Mitarbeiterbeurteilung",
        "intro": "Bitte erstellen Sie f√ºr Horst Hektik ein schl√ºssiges Konzept zur Mitarbeiterbeurteilung.\nIhr Konzept wird an Horst Hektik weitergeleitet.\nSie kehren dann in den Posteingang zur√ºck.",
        "solutionHint": "Ein schl√ºssiges Konzept zur Mitarbeiterbeurteilung auf Masterniveau sollte folgende Elemente enthalten:  1. Ziele: Leistungssteigerung, Personalentwicklung und Motivation (nicht nur Kontrolle). 2. Kriterien & Dimensionen: Unterscheidung in Fachkompetenz, Sozialkompetenz und Methodenkompetenz. Verwendung messbarer KPIs. 3. Prozess:     - Vorbereitung (Selbsteinsch√§tzung vs. Fremdeinsch√§tzung).    - Durchf√ºhrung (Strukturierter Gespr√§chsleitfaden).    - Nachbereitung (Schriftliche Dokumentation, Zielvereinbarungen). 4. Rechtssicherheit: Beachtung des AGG (Allgemeines Gleichbehandlungsgesetz), Vermeidung diskriminierender Formulierungen, Einbindung des Betriebsrates (falls vorhanden), Datenschutz. 5. Frequenz: Betonung, dass das Jahresgespr√§ch nur ein Teil ist; regelm√§√üige Feedbackschleifen (Jour Fixe) sind die Basis. 6. Umgang mit Horst Hektik: Das Konzept muss effizient und klar strukturiert sein, um ‚ÄûHektik‚Äú entgegenzuwirken.",
        "gradingPrompt": "Du agierst als Senior HR-Consultant und bewertest den Entwurf des Users.\n\nBewertungskriterien (Masterniveau):\n1. Vollst√§ndigkeit: Deckt das Konzept Vorbereitung, Durchf√ºhrung und Nachbereitung ab?\n2. Rechtssicherheit: Werden rechtliche Aspekte (z.B. AGG, Dokumentation) thematisiert?\n3. Strategische Tiefe: Geht es √ºber reine Checklisten hinaus? Werden Ziele und Nutzen (Personalentwicklung) klar definiert?\n4. Ansprache: Ist der Ton professionell und √ºberzeugend f√ºr einen gestressten Manager wie Horst Hektik?\n\nReagiere streng aber konstruktiv. Wenn wichtige Keywords wie \"regelm√§√üige Gespr√§che\" oder \"Rechtssicherheit\" fehlen, ziehe Punkte ab und erkl√§re, warum diese f√ºr ein professionelles Beurteilungssystem unerl√§sslich sind.",
        "keywords": [
            "regelm√§√üige Mitarbeitergespr√§che als Grundlage",
            "rechtssichere Formulierungen",
            "Zielvereinbarung",
            "Trennung von Beobachtung und Bewertung",
            "Einbindung Betriebsrat"
        ],
        "thresholds": {
            "30": "Zu wenig.",
            "70": "Gut.",
            "100": "Perfekt."
        }
    },
    "ai_sebastian_ai_config": {
        "title": "",
        "intro": "",
        "solutionHint": "Feedback = Prozess/Lernen (formativ). Evaluation = Ergebnis/Bewertung (summativ).",
        "gradingPrompt": "Bewerte WOHLWOLLEND. \n\nKriterien:\n- Feedback = Hilfe beim Lernen/Besserwerden.\n- Evaluation = Benotung/Endabrechnung.\n\nWICHTIG: Akzeptiere einfache Erkl√§rungen wie 'Feedback ist f√ºr den Weg, Evaluation f√ºr das Ziel'. Fachbegriffe wie 'formativ' sind Bonus, aber keine Pflicht.",
        "keywords": [],
        "thresholds": {
            "30": "Zu wenig.",
            "70": "Gut.",
            "100": "Perfekt."
        }
    }
};





    let currentAiId = null;
const sortTasks = {
    "Sortierung_1_sort_config": {
        "title": "Neue Szene",
        "intro": "Bitte helfen Sie Dr. Peter Planer die einzelnen Bestandteile einer Bedarfsanalyse in die richtige Reihenfolge zu bringen. \nVerschieben Sie die Button einfach an die richtige Stelle...",
        "items": [
            "Zielsetzung und Planung (Projektziel definieren)",
            "Datensammlung (Ist-Zustand)",
            "Bedarfsermittlung & L√ºckenanalyse (Soll-Zustand)",
            "Priorisierung der Bedarfe:",
            "Entwicklung von L√∂sungsoptionen",
            "Dokumentation & Pr√§sentation",
            "Dokumentation & Pr√§sentation",
            "Implementierung & Evaluation"
        ]
    }
}; // Platzhalter f√ºr Sortieraufgaben
    let currentSortId = null;
    let draggedItem = null; // F√ºr Drag & Drop
    // --- QUIZ DATEN ---
    const quizzes = {
    "quiz_aptitude_test": {
        "title": "Eignungstest: Logik & Wissen",
        "intro": "<b>Franziska Immerda:</b> 'Hier sind die Fragen f√ºr den Bewerber. K√∂nnen Sie die L√∂sungen bitte kurz verifizieren? Ich bin mir bei Frage 2 unsicher.'",
        "law": "Eignungstests m√ºssen validiert sein und einen Bezug zur T√§tigkeit haben.",
        "questions": [
            {
                "q": "Logik: Welches Wort passt nicht in die Reihe?",
                "options": [
                    {
                        "text": "Hammer",
                        "val": false
                    },
                    {
                        "text": "S√§ge",
                        "val": false
                    },
                    {
                        "text": "Kaufvertrag",
                        "val": true
                    }
                ]
            },
            {
                "q": "Mathe: Ein Azubi verdient 800‚Ç¨. Er bekommt 5% Erh√∂hung. Wieviel erh√§lt er?",
                "options": [
                    {
                        "text": "840‚Ç¨",
                        "val": true
                    },
                    {
                        "text": "850‚Ç¨",
                        "val": false
                    },
                    {
                        "text": "805‚Ç¨",
                        "val": false
                    }
                ]
            },
            {
                "q": "Allgemeinwissen: Wer w√§hlt den Betriebsrat?",
                "options": [
                    {
                        "text": "Die Gesch√§ftsf√ºhrung",
                        "val": false
                    },
                    {
                        "text": "Die Arbeitnehmer",
                        "val": true
                    },
                    {
                        "text": "Die Gewerkschaft",
                        "val": false
                    }
                ]
            }
        ]
    },
    "jarbschg_zeit": {
        "title": "<span style='color:white;'>Aufgabe:</span> JArbSchG - Arbeitszeit & Aufsicht",
        "intro": "<b>Franziska Immerda (Verwaltung):</b> 'Der Vorfall mit Kevin an der Kreiss√§ge hat hohe Wellen geschlagen. Die Berufsgenossenschaft pr√ºft jetzt genau. Beweisen Sie Ihre Rechtssicherheit in Bezug auf Arbeitszeit und gef√§hrliche Arbeiten.'",
        "law": "<strong>¬ß 22 JArbSchG</strong>: Besch√§ftigung bei gef√§hrlichen Arbeiten nur unter Aufsicht.<br><strong>¬ß 8 JArbSchG</strong>: Max 40h/Woche.",
        "questions": [
            {
                "q": "Darf Kevin (16) alleine an die Kreiss√§ge?",
                "options": [
                    {
                        "text": "Ja, wenn es eilt",
                        "val": false
                    },
                    {
                        "text": "Nein, verboten",
                        "val": true
                    }
                ]
            },
            {
                "q": "Max. Wochenarbeitszeit Jugendlicher?",
                "options": [
                    {
                        "text": "40 Std",
                        "val": true
                    },
                    {
                        "text": "48 Std",
                        "val": false
                    }
                ]
            }
        ]
    },
    "pe_instrumente": {
        "title": "<span style='color:white;'>Aufgabe:</span> PE-Instrumente (DQR 7 Check)",
        "intro": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'Strategische Personalentwicklung erfordert pr√§zises Vokabular. Bevor wir Konzepte schreiben, m√ºssen die Begriffe sitzen. Differenzieren Sie bitte:'",
        "law": "Strategische PE nutzt diverse Instrumente zur Bedarfsdeckung.",
        "questions": [
            {
                "q": "Was ist Job Enrichment?",
                "options": [
                    {
                        "text": "Mehr Aufgaben gleiches Niveau",
                        "val": false
                    },
                    {
                        "text": "H√∂heres Anforderungsniveau",
                        "val": true
                    }
                ]
            },
            {
                "q": "Ziel von Coaching?",
                "options": [
                    {
                        "text": "Hilfe zur Selbsthilfe",
                        "val": true
                    },
                    {
                        "text": "Fachberatung",
                        "val": false
                    }
                ]
            },
            {
                "q": "Was ist Job Rotation?",
                "options": [
                    {
                        "text": "Geplanter Wechsel",
                        "val": true
                    },
                    {
                        "text": "K√ºndigung",
                        "val": false
                    }
                ]
            }
        ]
    },
    "quiz_pe_expert": {
        "title": "<span style='color:white;'>Aufgabe:</span> Expertenwissen Personalentwicklung & F√ºhrung",
        "intro": "<b>Dr. Klara Kompetenz:</b> 'Bevor ich meine Agenden √ºbergebe, muss ich sicher sein, dass Sie die strategischen Zusammenh√§nge durchdrungen haben. Beweisen Sie Ihre Expertise in dieser Klausur.'",
        "law": "Hinweis: Diese Fragen basieren auf dem Thema Personalentwicklung und Beratung.",
        "questions": [
            {
                "q": "Was ist ein zentrales Ziel der Personalentwicklung (PE)?",
                "options": [
                    {
                        "text": "Gewinnmaximierung der einzelnen Mitarbeiter.",
                        "val": false
                    },
                    {
                        "text": "Mitarbeiter auf k√ºnftige Entwicklungen (z.B. technologischen Wandel) vorzubereiten.",
                        "val": true
                    }
                ]
            },
            {
                "q": "Was wird in einer Qualifikationsmatrix gegen√ºbergestellt?",
                "options": [
                    {
                        "text": "Ist-Qualifikationen vs. Soll-Anforderungen.",
                        "val": true
                    },
                    {
                        "text": "Gehaltsw√ºnsche vs. Budget.",
                        "val": false
                    }
                ]
            },
            {
                "q": "Was kennzeichnet eine betriebliche Laufbahnplanung?",
                "options": [
                    {
                        "text": "Sie beschreibt nur den Lebenslauf vor der Einstellung.",
                        "val": false
                    },
                    {
                        "text": "Sie b√ºndelt Entwicklungs- und Aufstiegsm√∂glichkeiten zur Mitarbeiterbindung.",
                        "val": true
                    }
                ]
            },
            {
                "q": "Welche Phasen umfasst eine professionelle Mitarbeiterbeurteilung?",
                "options": [
                    {
                        "text": "Beobachtung, Bewertung und Besprechung.",
                        "val": true
                    },
                    {
                        "text": "Nur die spontane Bewertung aus dem Bauch heraus.",
                        "val": false
                    }
                ]
            },
            {
                "q": "Was ist das prim√§re Ziel eines Coachings?",
                "options": [
                    {
                        "text": "Fachliche Anweisungen geben.",
                        "val": false
                    },
                    {
                        "text": "Hilfe zur Selbsthilfe leisten.",
                        "val": true
                    }
                ]
            }
        ]
    },
    "viola_comm_quiz": {
        "title": "Konfliktmanagement & Gespr√§che",
        "intro": "<b>Viola Communikationis (Inklusion):</b> 'Kommunikation ist der Schl√ºssel. Bitte √ºberpr√ºfen Sie diese Grundlagen, bevor wir in die Gespr√§che gehen.'",
        "law": "Kommunikation ist der Schl√ºssel zur Inklusion und Probleml√∂sung.",
        "questions": [
            {
                "q": "Welche Gespr√§chsform ist 'anlassbezogen'?",
                "options": [
                    {
                        "text": "Jahresgespr√§ch",
                        "val": false
                    },
                    {
                        "text": "R√ºckkehrgespr√§ch",
                        "val": true
                    },
                    {
                        "text": "Zielvereinbarungsgespr√§ch",
                        "val": false
                    }
                ]
            },
            {
                "q": "Was ist das Ziel eines Kritikgespr√§chs?",
                "options": [
                    {
                        "text": "Mitarbeiter bestrafen",
                        "val": false
                    },
                    {
                        "text": "Ursachen erkennen & Verhalten √§ndern",
                        "val": true
                    }
                ]
            },
            {
                "q": "Was kennzeichnet 'Aktives Zuh√∂ren'?",
                "options": [
                    {
                        "text": "Sofortige Ratschl√§ge geben",
                        "val": false
                    },
                    {
                        "text": "Paraphrasieren & Gef√ºhle spiegeln",
                        "val": true
                    }
                ]
            }
        ]
    },
    "erik_coaching_quiz": {
        "title": "Coaching & Lernf√∂rderung",
        "intro": "<b>Erik Handycap (Sozialarbeit):</b> 'Reflexion ist essenziell. Helfen Sie mir, diese Begriffe sauber zu trennen.'",
        "law": "Coaching ist Hilfe zur Selbsthilfe, keine Fachberatung.",
        "questions": [
            {
                "q": "Wer ist f√ºr die L√∂sung im Coaching verantwortlich?",
                "options": [
                    {
                        "text": "Der Coach",
                        "val": false
                    },
                    {
                        "text": "Der Coachee (Klient)",
                        "val": true
                    }
                ]
            },
            {
                "q": "Was geh√∂rt zur 'Kl√§rungsphase' im Coaching?",
                "options": [
                    {
                        "text": "Vertragsabschluss",
                        "val": false
                    },
                    {
                        "text": "Ist-Soll-Analyse & Einbindung Beteiligter",
                        "val": true
                    }
                ]
            },
            {
                "q": "Was ist 'Job Rotation'?",
                "options": [
                    {
                        "text": "Systematischer Arbeitsplatzwechsel",
                        "val": true
                    },
                    {
                        "text": "Erweiterung des Aufgabenfeldes",
                        "val": false
                    }
                ]
            }
        ]
    },
    "Ausbildungsvideo_quiz_config": {
        "title": "Video der Ausbildungssituation Kabel abisolieren",
        "intro": "<b>Was ist Ihnen in dem Video aufgefallen?</b><br><br>\nBitte beantworten Sie die folgenden Fragen.<br>\nBei richtiger L√∂sung gelangen Sie zur√ºck in den Posteingang, Alex Engagiert wird √ºber Ihre Entscheidung automatisch informiert.<br><br>",
        "law": "Ausbildereignungspr√ºfung ",
        "questions": [
            {
                "q": "Welche Werkzeuge stehen f√ºr das Abisolieren von Kabeln zur Verf√ºgung?",
                "options": [
                    {
                        "text": "Scharfes Messer",
                        "val": true
                    },
                    {
                        "text": "Abisolierzange und Isofix",
                        "val": true
                    }
                ]
            },
            {
                "q": "Welches Werkzeug sollte nicht benutzt werden?",
                "options": [
                    {
                        "text": "Scharfes Messer",
                        "val": true
                    },
                    {
                        "text": "Abisolierzange und Isofix",
                        "val": false
                    }
                ]
            },
            {
                "q": "Welche Gefahren bestehen bei der Arbeit mit dem scharfen Messer",
                "options": [
                    {
                        "text": "Hohe Verletzungsgefahr",
                        "val": true
                    },
                    {
                        "text": "keine",
                        "val": false
                    }
                ]
            },
            {
                "q": "Was passiert wenn der \"Azubi\" sich w√§hrend der Pr√ºfung verletzt?",
                "options": [
                    {
                        "text": "Es wird ein Pflaster drauf gemacht",
                        "val": false
                    },
                    {
                        "text": "Die Pr√ºfung wird abgebrochen",
                        "val": true
                    }
                ]
            },
            {
                "q": "Wie w√ºrden Sie entscheiden? Hat der Ausbilder diese Pr√ºfung bestanden",
                "options": [
                    {
                        "text": "Ja, der Rest war doch nicht verkehrt...",
                        "val": false
                    },
                    {
                        "text": "Nein, er hat eklatant gegen Sichereitsbestimmungen versto√üen",
                        "val": true
                    }
                ]
            },
            {
                "q": "Welche Entscheidung treffen Sie?",
                "options": [
                    {
                        "text": "sofortige Entlassung",
                        "val": false
                    },
                    {
                        "text": "Einladung zu einem Personalgespr√§ch",
                        "val": true
                    }
                ]
            }
        ]
    },
    "Quiz_Ausbildungssituation_quiz_config": {
        "title": "Entscheidung zur Beschwerde von Alex Engagiert",
        "intro": "Bitte beantworten Sie die nachfolgenden Fragen.<br><br>\nBei der richtigen L√∂sung werden Sie zum Posteingang zur√ºckgeleitet und\nAlex Engagiert wir √ºber Ihre Entscheidung automatisch informiert.",
        "law": "Ausbildereignungspr√ºfung ",
        "questions": [
            {
                "q": "Welche Werkzeuge stehen f√ºr das Abisolieren von Kabeln zur Verf√ºgung?",
                "options": [
                    {
                        "text": "Scharfes Messer",
                        "val": true
                    },
                    {
                        "text": "Abisolierzange und Isofix",
                        "val": true
                    }
                ]
            },
            {
                "q": "Welches Werkzeug sollte nicht benutzt werden?",
                "options": [
                    {
                        "text": "Scharfes Messer",
                        "val": true
                    },
                    {
                        "text": "Abisolierzange und Isofix",
                        "val": false
                    }
                ]
            },
            {
                "q": "Welche Gefahren bestehen bei der Arbeit mit dem scharfen Messer",
                "options": [
                    {
                        "text": "Hohe Verletzungsgefahr",
                        "val": true
                    },
                    {
                        "text": "keine",
                        "val": false
                    }
                ]
            },
            {
                "q": "Was passiert wenn der \"Azubi\" sich w√§hrend der Pr√ºfung verletzt?",
                "options": [
                    {
                        "text": "Es wird ein Pflaster drauf gemacht",
                        "val": false
                    },
                    {
                        "text": "Die Pr√ºfung wird abgebrochen",
                        "val": true
                    }
                ]
            },
            {
                "q": "Wie w√ºrden Sie entscheiden? Hat der Ausbilder diese Pr√ºfung bestanden",
                "options": [
                    {
                        "text": "Ja, der Rest war doch nicht verkehrt...",
                        "val": false
                    },
                    {
                        "text": "Nein, er hat eklatant gegen Sichereitsbestimmungen versto√üen",
                        "val": true
                    }
                ]
            },
            {
                "q": "Welche Entscheidung treffen Sie?",
                "options": [
                    {
                        "text": "sofortige Entlassung",
                        "val": false
                    },
                    {
                        "text": "Einladung zu einem Personalgespr√§ch",
                        "val": true
                    }
                ]
            }
        ]
    }
};

let currentQuizId = null;

// --- STORY SCENES ---
const scenes = {
    "fail_jarbschg": {
        "title": "Rechtsbruch!",
        "text": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'Ich muss doch sehr bitten! ¬ß 22 JArbSchG. Ohne Aufsicht? Unm√∂glich. Ich habe die BG schon am Telefon gehabt. Das geht so nicht!'",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "moodChange": -20,
        "options": [
            {
                "text": "Rechtskenntnisse auffrischen",
                "next": "quiz_jarb",
                "costTime": 10
            }
        ]
    },
    "intro": {
        "title": "",
        "text": "\n                <div class=\"intro-title\">Willkommen<br>im Bildungscampus Leipzig</div>\n                \n                <p style=\"text-align: justify;\">Wir sind ein neu gegr√ºndetes Bildungsunternehmen in Leipzig und bieten vorrangig\nPr√§senz- und Onlineschulungen in den Bereichen Aus- und Weiterbildungsp√§dagogik, Berufsp√§dagogik, Ausbildereignung, Personalwirtschaft und B√ºromanagement an.</p>\n<p style=\"text-align: justify;\">\nSeit kurzer Zeit bilden wir in einem Ausbildungsverbund mit der PlanA GmbH im handwerklichen Bereich auch Tischler aus. Ein Teil dieser Ausbildung findet in einer Produktionslinie der PlanA GmbH statt. Es existiert auch eine eigene Lehrwerkstatt.</p>\n\n \n\n                <p style=\"text-align: justify;\">Wir besch√§ftigen zur Zeit 11 Mitarbeitende sowie mehrere freiberufliche Dozent*innen</p>\n\n                <div class=\"team-grid\">\n                    <div class=\"team-role\">Gesch√§ftsf√ºhrung:</div><div class=\"team-name\">Dr. Peter Planer üë®üèº‚Äçüíº</div>\n                    <div class=\"team-role\">Personalleitung:</div><div class=\"team-name\">Dr. Klara Kompetenz ü§µüèæ‚Äç‚ôÄÔ∏è</div>\n                    <div class=\"team-role\">Ausbildungleiter PlanA GmbH:</div><div class=\"team-name\">Horst Hektik üë∑üèª</div>\n                    <div class=\"team-role\">Verantwortlicher Ausbilder:</div><div class=\"team-name\">Sascha AEVO üë®üèΩ‚Äç‚öñÔ∏è</div>\n                    <div class=\"team-role\">Verwaltung:</div><div class=\"team-name\">Franziska Immerda üë©‚Äçüíº</div>\n                    <div class=\"team-role\">IT-Abteilung:</div><div class=\"team-name\">Boris Gemini üë®üèª‚Äçüíª</div>\n                    <div class=\"team-role\">Betriebsrat:</div><div class=\"team-name\">Alex Engagiert üôéüèª‚Äç‚ôÇÔ∏è</div>\n                    <div class=\"team-role\">weitere Mitarbeitende:</div><div class=\"team-name\">Olaf Ordentlich üë®‚Äçüåæ, Claudia Papierkram ü§∑üèª‚Äç‚ôÄÔ∏è, Viola Communikationis üôãüèª‚Äç‚ôÄÔ∏è,<br> Erik Handycap üë®‚Äçüè´ und Sebastian Domini üë®üèª‚Äçüîß</div>\n                </div>\n            ",
        "leftContent": "\n                <div class=\"role-box-left\">\n                    <span class=\"role-title\">IHRE MISSION</span>\n                    <div class=\"role-description\">\n                        Sie sind als Gepr. Berufsp√§dagog*in die neue <b>\"Hauptabteilungsleitung Bildung\" mit Personalbefugnissen</b>.<br>\nIn diesem Planspiel m√ºssen Sie unter Zeitdruck verschiedene Problemstellungen l√∂sen. \n                    </div>\n                    <button class=\"start-btn-green\" onclick=\"checkUndStarten()\">Rolle annehmen & starten </button>\n                </div>\n            ",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": []
    },
    "start": {
        "title": "Der Ernstfall",
        "text": "<b>Horst Hektik (Ausbildungsleiter PlanA GmbH):</b> 'Tach. H√∂r mal. Der Kevin. 16 Jahre. Soll an die Kreiss√§ge. Sofort. Auftrag muss raus. Personal fehlt. Mach da kein Drama draus, ja? √úbrigens: Was macht ein Clown im B√ºro? - Faxen. Hahaha! Aber im Ernst jetzt: Unterschreib das.'",
        "char": "horst",
        "charName": "Horst Hektik",
        "options": [
            {
                "text": "Genehmigen (Produktion first)",
                "next": "fail_jarbschg",
                "costTime": 2
            },
            {
                "text": "Ablehnen (Gef√§hrliche Arbeit)",
                "next": "success_jarbschg",
                "costTime": 5
            }
        ]
    },
    "quiz_jarb": {
        "special": "quiz",
        "quizId": "jarbschg_zeit",
        "next": "success_jarbschg"
    },
    "success_jarbschg": {
        "title": "Konflikt gel√∂st",
        "text": "<b>Sascha AEVO (Verantwortlicher Ausbilder):</b> 'Danke. Horst ist zwar sauer, aber wir haben einen Unfall verhindert. Und Rechtssicherheit gewahrt. Das war professionell.'",
        "char": "sascha",
        "charName": "Sascha AEVO",
        "options": [
            {
                "text": "Zu Franziska Immerda (Ablage sortieren)",
                "next": "franziska_search_intro",
                "costTime": 5
            }
        ]
    },
    "franziska_search_intro": {
        "title": "Chaos in der Ablage",
        "text": "<b>Franziska Immerda (Verwaltung):</b> 'Puh, das war knapp. Aber durch den ganzen Trubel sind meine Akten v√∂llig durcheinander geraten. Ich finde nichts mehr wieder! K√∂nnten Sie mir bitte helfen, die wichtigsten Begriffe in diesem Stapel zu finden? Ordnung ist das halbe Leben!'",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "Beim Suchen helfen",
                "next": "franziska_search_puzzle",
                "costTime": 10
            }
        ]
    },
    "franziska_search_puzzle": {
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "special": "search",
        "next": "franziska_search_done",
        "searchId": "franziska_search_puzzle_search_config"
    },
    "franziska_search_done": {
        "title": "Ordnung wiederhergestellt",
        "text": "<b>Franziska Immerda (Verwaltung):</b> 'Vielen Dank! Jetzt ist alles wieder dort, wo es hingeh√∂rt. Sie haben wirklich ein Auge f√ºr Details.<br><br>√úbrigens, Dr. Kompetenz hat schon nach Ihnen gefragt. Es geht um etwas Digitales.' Vielleicht bereiten Sie sich in Ihrem B√ºro zun√§chst vor?",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "Zu Dr. Klara Kompetenz gehen",
                "next": "klara_audit",
                "costTime": 3
            },
            {
                "text": "Erst ins B√ºro gehen",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "B√ºrozeit_1": {
        "title": "Ihr Schreibtisch",
        "text": "Willkommen in Ihrer Zentrale. Hier verwalten Sie Ihr Wissen und Ihr Team.<br>Was m√∂chten Sie tun?",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "layout": "dashboard",
        "options": [
            {
                "text": "üìö<br>Bibliothek",
                "next": "library_main"
            },
            {
                "text": "ü§ñ<br>KI-Chat",
                "next": "Boris-Gemini_befragen"
            },
            {
                "text": "üë•<br>Bewerberpool",
                "next": "office_applicants"
            },
            {
                "text": "üìù<br>Notizen",
                "next": "office_notes"
            },
            {
                "text": "‚úâÔ∏è<br>E-Mails",
                "next": "office_emails"
            },
            {
                "text": "üìä<br>Statistik",
                "next": "office_stats"
            },
            {
                "text": "üö™ Zur√ºck an die Arbeit",
                "specialExec": "returnFromOffice",
                "specialClass": "exit-btn"
            }
        ]
    },
    "library_main": {
        "title": "Fachbibliothek",
        "text": "Hier finden Sie gesammeltes Fachwissen und Modelle, die f√ºr Ihre Arbeit relevant sind.<br>Welches Werk m√∂chten Sie konsultieren?",
        "char": "claudia",
        "charName": "Claudia Papierkram",
        "options": [
            {
                "text": "8 Stufenmodell nach Kotter",
                "next": "Wissen_vertiefen_1"
            },
            {
                "text": "3 Stufenmodell nach Lewin",
                "next": "Wissen_vertiefen_2"
            },
            {
                "text": "Das Managerial Grid",
                "next": "Wissen_vertiefen_3"
            },
            {
                "text": "√úbersicht der Lerntheorien",
                "next": "Wissen_vertiefen_4"
            },
            {
                "text": "Zielvereinbarungen",
                "next": "Wissen_vertiefen_5"
            },
            {
                "text": "Lernzieltaxonomie nach Bloom",
                "next": "Wissen_vertiefen_6"
            },
            {
                "text": "Gruppendynamik",
                "next": "Wissen_vertiefen_7"
            },
            {
                "text": "Betriebliche Mitbestimmung",
                "next": "Wissen_vertiefen_8"
            },
            {
                "text": "Lerntypen und Lernstile",
                "next": "Wissen_vertiefen_9"
            },
            {
                "text": "Strukturierung von Bedarfsanalysen",
                "next": "Wissen_vertiefen_10"
            },
            {
                "text": "Kompetenzorientiert Beurteilen",
                "next": "Wissen_vertiefen_11"
            },
            {
                "text": "Beratungskonzept f√ºr F√ºhrungskr√§fte",
                "next": "Wissen_vertiefen_12"
            },
            {
                "text": "üîô Zur√ºck zum Schreibtisch",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "email_planer_vision": {
        "title": "Mail von Dr. Planer",
        "text": "<b>Betreff: Bedarfsanalyse...</b><br><br>Liebe Kollegen,<br>Sie wissen, ich bin manchmal ein bisschen durcheinander. Ich wollte eine Bedarfsanalyse f√ºr neue Gesch√§ftsfelder erstellen, ich  wei√ü aber den genauen Ablauf nicht mehr und bitte Sie dabei um Ihre Hilfe!\n\nEs w√§re sehr freundlich von Ihnen!\n\nMit freundlichen Gr√º√üen,\nDr. Peter Planer",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "Zur√ºck zum Posteingang",
                "next": "office_emails"
            },
            {
                "text": "Hilfe anbieten",
                "next": "Sortierung_1"
            }
        ]
    },
    "email_horst_saw": {
        "title": "Mail von Horst",
        "text": "<b>Betreff: KREISS√ÑGE!!!</b><br><br>WO BLEIBT DER AZUBI??? ICH BRAUCHE LEUTE!!!<br><br>Gru√ü Horst",
        "char": "horst",
        "charName": "E-Mail",
        "options": [
            {
                "text": "Zur√ºck zum Posteingang",
                "next": "office_emails"
            }
        ]
    },
    "email_boris_joke": {
        "title": "Mail von Boris",
        "text": "<b>Betreff: Witz des Tages</b><br><br>Treffen sich zwei Server. Sagt der eine: 'Mir ist so hei√ü.' Sagt der andere: 'Mach doch mal ein Fenster auf!' üòÇ<br><br>\n\nSag mal, kannst Du mir helfen? <br>\nIch habe meine KI um Hilfe gebeten, und nun spuckt sie nur Wirrwarr aus...\n<br><br>LG Boris Gemini",
        "char": "Boris",
        "charName": "Boris Gemini (KI)",
        "options": [
            {
                "text": "Zur√ºck zum Posteingang",
                "next": "office_emails"
            },
            {
                "text": "Hilfe anbieten",
                "next": "Buchstabensalat_Boris"
            }
        ]
    },
    "szene_2908": {
        "title": "Eingeschobene Szene",
        "text": "...",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": []
    },
    "office_applicants": {
        "title": "Bewerberpool (4 Mappen)",
        "text": "<b>Franziska Immerda:</b><br><br> 'Liebe Unternehmensleitung, hier sind die aktuellen Initiativbewerbungen. <br>Sie m√∂chten dazu sicher Entscheidungen treffen...?'<br><br>\nü§£ü§£ü§£√úbrigens:<br>\nSagt der Personalchef  zum Bewerber: ‚ÄûWir suchen jemanden, der sich nicht zu schade ist, jede Arbeit anzupacken, und der niemals krank wird.  Die Bezahlung betr√§gt anfangs 1.500 Euro netto, sp√§ter dann 3.500 Euro.‚Äú\n<br><br>\nDarauf der Bewerber: ‚ÄûAlles klar, dann komme ich sp√§ter wieder!‚Äú<br><br>\nü§£ü§£ü§£<br><br>",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "üë§ <b>Max Mustermann</b><br><small>Tischlergeselle (22 J.)</small>",
                "next": "applicant_max"
            },
            {
                "text": "üë§ <b>Lisa Lustig</b><br><small>B√ºrokauffrau (35 J.)</small>",
                "next": "applicant_lisa"
            },
            {
                "text": "üë§ <b>Kevin Chaos</b><br><small>Schulabg√§nger (19 J.)</small>",
                "next": "applicant_kevin"
            },
            {
                "text": "üë§ <b>Renate 'Erfahrung'</b><br><small>Personalfachkauffrau (59 J.)</small>",
                "next": "applicant_renate"
            },
            {
                "text": "üîô Zur√ºck zum Schreibtisch",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "office_emails": {
        "title": "Posteingang (4 ungelesen)",
        "text": "Sie haben neue Nachrichten. Bitte w√§hlen Sie eine E-Mail aus, um sie zu lesen.",
        "char": "verwaltung",
        "options": [
            {
                "text": "üìß <b>Dr. Planer</b><br><small>Betreff: Visionen...</small>",
                "next": "email_planer_vision",
                "costTime": 0,
                "costBudget": 0
            },
            {
                "text": "üìß <b>Horst Hektik</b><br><small>Betreff: KREISS√ÑGE!!!</small>",
                "next": "email_horst_saw",
                "costTime": 0,
                "costBudget": 0
            },
            {
                "text": "üìß <b>Franziska I.</b><br><small>Betreff: Ablage (Dringend!)</small>",
                "next": "franziska_search_intro",
                "costTime": 0,
                "costBudget": 0
            },
            {
                "text": "üìß <b>Boris Gemini</b><br><small>Betreff: Witz des Tages</small>",
                "next": "email_boris_joke",
                "costTime": 0,
                "costBudget": 0
            },
            {
                "text": "üìß <b>Alex Engagiert</b><br><small>Betreff: Katastrophale Ausbildungsmethoden!",
                "next": "email_Alex_Engagiert",
                "costTime": 0,
                "costBudget": 0
            },
            {
                "text": "üìß <b>Horst Hektik</b><br><small>Betreff: Konzepterstellung",
                "next": "Horst_Hektik_Konzept_Mitarbeiterbeurteilung",
                "costTime": 0,
                "costBudget": 0
            },
            {
                "text": "üö™ Posteingang schlie√üen",
                "next": "B√ºrozeit_1",
                "costTime": 0,
                "costBudget": 0
            }
        ]
    },
    "office_stats": {
        "title": "Leistungsdaten",
        "text": "<b>Aktueller Statusbericht:</b><br><br>Budget-Effizienz: üü¢ Stabil<br>Team-Zufriedenheit: üü° Ausbauf√§hig<br>Projekt-Fortschritt: 45%",
        "char": "boris",
        "charName": "Boris Gemini (IT)",
        "options": [
            {
                "text": "üîô Zur√ºck zum Schreibtisch",
                "next": "B√ºrozeit_1",
                "specialClass": "exit-btn"
            }
        ]
    },
    "applicant_max": {
        "title": "Akte: Max Mustermann",
        "text": "<b>Position:</b> Tischler (Geselle)<br><b>Alter:</b> 22<br><br><b>Dokumente:</b><br>Das Anschreiben strotzt vor Rechtschreibfehlern. Er schreibt: <i>\"Ich hab Bock auf Holz, nicht auf Papierkram.\"</i><br><br><b>Zeugnis:</b><br>Mathe: 5<br>Deutsch: 4<br>Praxis/Werken: 1 (Auszeichnung f√ºr bestes Gesellenst√ºck)<br><br><b>Horst Hektiks Notiz:</b> \"Der Junge hat goldene H√§nde, aber im Berichtsheft nur Chaos. Wollen wir das riskieren?\"",
        "char": "verwaltung",
        "charName": "Bewerbungsmappe",
        "options": [
            {
                "text": "üü¢ Einladen (Pfad Max)",
                "next": "interview_start_max"
            },
            {
                "text": "üî¥ Absage diktieren",
                "next": "applicant_action_reject"
            },
            {
                "text": "üîô Zur√ºck zur √úbersicht",
                "next": "office_applicants"
            }
        ]
    },
    "interview_start_max": {
        "title": "Bewerber: Max",
        "text": "<b>Franziska Immerda:</b> 'Max ist da. Er wirkt etwas nerv√∂s und hat sein Cappy noch auf. Wollen wir erst den Test machen?'",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "üìù Erst Eignungstest",
                "next": "quiz_run_max"
            },
            {
                "text": "üó£Ô∏è Direkt reinholen",
                "next": "interview_talk_max"
            }
        ]
    },
    "quiz_run_max": {
        "special": "quiz",
        "quizId": "quiz_aptitude_test",
        "next": "interview_result_max"
    },
    "interview_result_max": {
        "title": "Testergebnis: Max",
        "text": "<b>Franziska Immerda:</b> 'Naja... Mathe ging so (grad noch bestanden), aber die Logik-Fragen hat er super gel√∂st. Scheint ein heller Kopf zu sein, wenn er will.'",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "Gespr√§ch beginnen",
                "next": "interview_talk_max"
            }
        ]
    },
    "interview_talk_max": {
        "title": "Interview: Max",
        "text": "Max setzt sich. Er wirkt hemds√§rmelig.<br><b>Max:</b> 'Moin Chef. Also Horst meinte, ihr braucht wen, der anpackt?'",
        "char": "klara",
        "charName": "Max Mustermann",
        "options": [
            {
                "text": "Warum wir?",
                "next": "interview_max_why"
            },
            {
                "text": "St√§rken/Schw√§chen?",
                "next": "interview_max_strengths"
            }
        ]
    },
    "interview_max_why": {
        "title": "Motivation",
        "text": "<b>Max:</b> 'Ganz ehrlich? Kurzer Arbeitsweg. Und ich will mit Holz arbeiten, nicht am Flie√üband stehen.'",
        "char": "klara",
        "charName": "Max Mustermann",
        "options": [
            {
                "text": "Entscheidung treffen",
                "next": "interview_decision_max"
            }
        ]
    },
    "interview_max_strengths": {
        "title": "St√§rken",
        "text": "<b>Max:</b> 'Ich kann alles bauen. Aber fragen Sie mich nicht nach Berichtsheften. Schreiben ist nicht meins.'",
        "char": "klara",
        "charName": "Max Mustermann",
        "options": [
            {
                "text": "Entscheidung treffen",
                "next": "interview_decision_max"
            }
        ]
    },
    "interview_decision_max": {
        "title": "Entscheidung: Max",
        "text": "Fachlich top, schriftlich flop. Horst braucht ihn dringend.<br>Wie entscheiden Sie?",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "ü§ù Einstellen (Horst freut sich)",
                "next": "hire_max"
            },
            {
                "text": "üëé Absagen (Zu riskant)",
                "next": "reject_max"
            }
        ]
    },
    "hire_max": {
        "title": "Eingestellt",
        "text": "<b>Horst Hektik:</b> 'Endlich! Der Junge wird die Werkstatt rocken. Danke Chef!'",
        "char": "horst",
        "moodChange": 10,
        "costBudget": 10,
        "options": [
            {
                "text": "Zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "reject_max": {
        "title": "Abgelehnt",
        "text": "Max zuckt mit den Schultern und geht. Horst ist sauer, aber Franziska ist erleichtert (weniger Papierkram).",
        "char": "verwaltung",
        "moodChange": -5,
        "options": [
            {
                "text": "Zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "applicant_lisa": {
        "title": "Akte: Lisa Lustig",
        "text": "<b>Position:</b> B√ºromanagement<br><b>Alter:</b> 35<br><br><b>Dokumente:</b><br>Perfekte Formatierung. L√ºckenloser Lebenslauf. 10 Jahre Erfahrung in der Verwaltung.<br><br><b>Besonderheit:</b><br>Sie schreibt fett gedruckt: <i>\"Aufgrund meiner Kinderbetreuung ist eine Arbeitszeit ausschlie√ülich von 08:00 bis 12:00 Uhr m√∂glich. Keine Ausnahmen.\"</i><br><br><b>Franziskas Notiz:</b> \"Fachlich ein Traum, ich m√ºsste sie nicht einlernen. Aber wer besetzt das Telefon am Nachmittag?\"",
        "char": "verwaltung",
        "charName": "Bewerbungsmappe",
        "options": [
            {
                "text": "üü¢ Einladen (Pfad Lisa)",
                "next": "interview_start_lisa"
            },
            {
                "text": "üî¥ Absage diktieren",
                "next": "applicant_action_reject"
            },
            {
                "text": "üîô Zur√ºck zur √úbersicht",
                "next": "office_applicants"
            }
        ]
    },
    "interview_start_lisa": {
        "title": "Bewerberin: Lisa",
        "text": "<b>Franziska Immerda:</b> 'Frau Lustig ist da. Sehr p√ºnktlich, sehr ordentlich. Sollen wir auch mit ihr den Test machen?'",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "üìù Erst Eignungstest",
                "next": "quiz_run_lisa"
            },
            {
                "text": "üó£Ô∏è Direkt reinholen",
                "next": "interview_talk_lisa"
            }
        ]
    },
    "quiz_run_lisa": {
        "special": "quiz",
        "quizId": "quiz_aptitude_test",
        "next": "interview_result_lisa"
    },
    "interview_result_lisa": {
        "title": "Testergebnis: Lisa",
        "text": "<b>Franziska Immerda:</b> 'Wow. 100% Fehlerfrei. In Rekordzeit. Die Frau ist fit.'",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "Gespr√§ch beginnen",
                "next": "interview_talk_lisa"
            }
        ]
    },
    "interview_talk_lisa": {
        "title": "Interview: Lisa",
        "text": "Lisa Lustig sitzt sehr aufrecht da. Sie hat ihren eigenen Notizblock dabei.<br><b>Lisa:</b> 'Guten Tag. Danke f√ºr die Einladung. Ich habe mir schon einige Fragen zur B√ºro-Organisation notiert.'",
        "char": "klara",
        "charName": "Lisa Lustig",
        "options": [
            {
                "text": "Warum wollen Sie zu uns?",
                "next": "interview_lisa_why"
            },
            {
                "text": "Das Zeit-Problem (8-12 Uhr)",
                "next": "interview_lisa_time"
            }
        ]
    },
    "interview_lisa_why": {
        "title": "Motivation",
        "text": "<b>Lisa:</b> 'Ich suche Struktur. Ihre Verwaltung wirkt... verbesserungsw√ºrdig. Da kann ich helfen. Ich mag Effizienz.'",
        "char": "klara",
        "charName": "Lisa Lustig",
        "options": [
            {
                "text": "Entscheidung treffen",
                "next": "interview_decision_lisa"
            }
        ]
    },
    "interview_lisa_time": {
        "title": "Arbeitszeit",
        "text": "<b>Lisa:</b> 'Wie gesagt: 12:00 Uhr muss ich los, Kita-Abholung. Daran ist nicht zu r√ºtteln. Aber in den 4 Stunden schaffe ich mehr als andere in 8.'",
        "char": "klara",
        "charName": "Lisa Lustig",
        "options": [
            {
                "text": "Entscheidung treffen",
                "next": "interview_decision_lisa"
            }
        ]
    },
    "interview_decision_lisa": {
        "title": "Entscheidung: Lisa",
        "text": "Sie ist extrem kompetent, aber unflexibel. Franziska br√§uchte nachmittags Hilfe.<br>Wie entscheiden Sie?",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "ü§ù Einstellen (Effizienz-Boost)",
                "next": "hire_lisa"
            },
            {
                "text": "üëé Absagen (Wir brauchen Vollzeit)",
                "next": "reject_lisa"
            }
        ]
    },
    "hire_lisa": {
        "title": "Eingestellt",
        "text": "<b>Franziska Immerda:</b> 'Gut, wir versuchen es. Dann muss ich nachmittags eben alleine ans Telefon. Aber vormittags wird sie mir den R√ºcken freihalten.'",
        "char": "verwaltung",
        "moodChange": 5,
        "costBudget": 10,
        "options": [
            {
                "text": "Zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "reject_lisa": {
        "title": "Abgelehnt",
        "text": "Lisa packt ihre Sachen. 'Schade. Sie verpassen Effizienz.'<br>Franziska wirkt etwas entt√§uscht, versteht aber das Zeitproblem.",
        "char": "verwaltung",
        "moodChange": 0,
        "options": [
            {
                "text": "Zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "applicant_kevin": {
        "title": "Akte: Kevin Chaos",
        "text": "<b>Position:</b> ? (Initiativ)<br><b>Alter:</b> 19<br><br><b>Dokumente:</b><br>Ein zerknittertes Blatt Papier. Bewerbungsfoto ist ein Selfie im Spiegel (mit Blitz).<br>Betreff: <i>\"Suche Job, kann alles.\"</i><br><br><b>Anlage:</b><br>Ein √ºberraschendes Zertifikat: <b>\"High-Level Python Programming Bootcamp - Score: 98% (Expert)\"</b>.<br><br><b>Boris Gemini (IT) ruft aus dem Hintergrund:</b> \"Chef, lass mich den mal ansehen! Der Code auf seiner GitHub-Seite ist genial!\"",
        "char": "boris",
        "charName": "Boris Gemini",
        "options": [
            {
                "text": "üü¢ Boris vertrauen & Einladen",
                "next": "interview_start_kevin"
            },
            {
                "text": "üî¥ Sofort absagen (Unprofessionell)",
                "next": "applicant_action_reject"
            },
            {
                "text": "üîô Zur√ºck zur √úbersicht",
                "next": "office_applicants"
            }
        ]
    },
    "interview_start_kevin": {
        "title": "Kevin ist da",
        "text": "Kevin kommt in kurzen Hosen und Flipflops rein. Franziska ringt nach Luft.<br><b>Kevin:</b> 'Yo. Boris meinte, ihr braucht Skillz?'",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "Das Gespr√§ch wagen",
                "next": "interview_talk_kevin"
            }
        ]
    },
    "interview_talk_kevin": {
        "title": "Interview: Kevin",
        "text": "<b>Kevin:</b> 'Also, ich automatisier euch den ganzen Papierkram weg. Skripte schreiben, Datenbanken optimieren. Easy. Aber ich komm nicht vor 10 Uhr, bin kein Morgenmensch.'",
        "char": "klara",
        "charName": "Kevin Chaos",
        "options": [
            {
                "text": "Entscheidung treffen",
                "next": "interview_decision_kevin"
            }
        ]
    },
    "interview_decision_kevin": {
        "title": "Entscheidung: Kevin",
        "text": "Genie oder Wahnsinn? Boris will ihn, Franziska hasst ihn jetzt schon.<br>Wie entscheiden Sie?",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "ü§ù Einstellen (Innovation wagen)",
                "next": "hire_kevin"
            },
            {
                "text": "üëé Absagen (Kultureller Mismatch)",
                "next": "reject_kevin"
            }
        ]
    },
    "hire_kevin": {
        "title": "Eingestellt",
        "text": "<b>Boris Gemini:</b> 'Yes! Endlich Verst√§rkung!'<br><b>Franziska:</b> 'Ich werde seine Flipflops verbrennen.'",
        "char": "boris",
        "moodChange": 5,
        "costBudget": 10,
        "options": [
            {
                "text": "Zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "reject_kevin": {
        "title": "Abgelehnt",
        "text": "<b>Boris Gemini:</b> 'Schade. Wir verpassen die Zukunft.'<br>Kevin zuckt nur und geht zocken.",
        "char": "boris",
        "moodChange": -5,
        "options": [
            {
                "text": "Zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "applicant_renate": {
        "title": "Akte: Renate 'Erfahrung'",
        "text": "<b>Position:</b> Personalfachkauffrau<br><b>Alter:</b> 59<br><br><b>Dokumente:</b><br>35 Jahre F√ºhrungserfahrung. Top Zeugnisse. Sie kennt jeden in Leipzig.<br><br><b>Haken:</b><br>Gehaltsvorstellung: <b>4.800‚Ç¨</b> (Unser Budget f√ºr die Stelle: max. 3.200‚Ç¨).<br>Satz im Anschreiben: <i>\"Ich suche eine ruhige Station, um meine letzten 4 Jahre bis zur Rente entspannt ausklingen zu lassen.\"</i>",
        "char": "verwaltung",
        "charName": "Bewerbungsmappe",
        "options": [
            {
                "text": "üü¢ Einladen (Vielleicht verhandelbar?)",
                "next": "interview_start_renate"
            },
            {
                "text": "üî¥ Absagen (Zu teuer)",
                "next": "applicant_action_reject"
            },
            {
                "text": "üîô Zur√ºck zur √úbersicht",
                "next": "office_applicants"
            }
        ]
    },
    "interview_start_renate": {
        "title": "Renate ist da",
        "text": "Renate mustert das B√ºro kritisch. 'Der Kaffee im Wartebereich war lauwarm. Das ging bei Siemens fr√ºher besser.'",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "Gespr√§ch beginnen",
                "next": "interview_talk_renate"
            }
        ]
    },
    "interview_talk_renate": {
        "title": "Interview: Renate",
        "text": "<b>Renate:</b> 'Machen wir es kurz. Ich kenne den Laden hier, ich kenne die Prozesse. Ich brauche keine Einarbeitung. Aber ich will 4.500‚Ç¨ und keine √úberstunden. Nehmen oder lassen.'",
        "char": "klara",
        "charName": "Renate",
        "options": [
            {
                "text": "Entscheidung treffen",
                "next": "interview_decision_renate"
            }
        ]
    },
    "interview_decision_renate": {
        "title": "Entscheidung: Renate",
        "text": "Teuer, etwas arrogant, aber fachlich eine Bank. Sofortige Entlastung garantiert.<br>Wie entscheiden Sie?",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "ü§ù Einstellen (Qualit√§t kostet)",
                "next": "hire_renate"
            },
            {
                "text": "üëé Absagen (Sprengt das Budget)",
                "next": "reject_renate"
            }
        ]
    },
    "hire_renate": {
        "title": "Eingestellt",
        "text": "<b>Renate:</b> 'Gut. Mein B√ºro ist das Eckzimmer, oder? Ich fange Montag an.'<br><i>(Das Budget leidet stark, aber die Arbeit wird erledigt.)</i>",
        "char": "chef",
        "moodChange": 5,
        "costBudget": 30,
        "options": [
            {
                "text": "Zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "reject_renate": {
        "title": "Abgelehnt",
        "text": "<b>Renate:</b> 'Ihr Verlust. Wer billig kauft, kauft zweimal.' Sie rauscht ab.",
        "char": "chef",
        "moodChange": 0,
        "options": [
            {
                "text": "Zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "applicant_action_reject": {
        "title": "Abgelehnt",
        "text": "<b>Franziska Immerda:</b> 'Alles klar, Standardabsage geht heute noch raus. Ich lege die Akte ins Archiv.'",
        "char": "verwaltung",
        "charName": "Franziska Immerda",
        "options": [
            {
                "text": "üîô Zur√ºck zum Bewerberpool",
                "next": "office_applicants"
            }
        ]
    },
    "klara_audit": {
        "title": "<span style='color:white;'>Aufgabe:</span> Digitale Wende",
        "text": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'Guten Tag. Ich freue mich, dass Sie da sind. Sehen Sie, unser Bildungspartner, die PlanA GmbH expandiert in den Sanit√§r-, Heizungs- und Klimabereich. Unsere Didaktik ist jedoch... nun ja... antiquiert. Ich erbitte ein Konzept zur <b>digitalen Transformation</b> der Lernaufgaben.'",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "options": [
            {
                "text": "Konzept erstellen",
                "next": "ai_digital",
                "costTime": 15
            },
            {
                "text": "Ablehnen ('Zu neumodisch')",
                "next": "fail_klara_block",
                "costTime": 5
            }
        ]
    },
    "fail_klara_block": {
        "title": "Irritation",
        "text": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'Ich bin entt√§uscht. Stillstand ist R√ºckschritt. Ich erwarte von Ihnen Innovationsgeist, keine Blockadehaltung. Bitte √ºberdenken Sie das.'",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "moodChange": -30,
        "options": [
            {
                "text": "Konzept doch erstellen",
                "next": "ai_digital",
                "costTime": 5
            }
        ]
    },
    "ai_digital": {
        "special": "ai_question",
        "aiId": "hb4_digital",
        "next": "social_issue"
    },
    "social_issue": {
        "title": "<span style='color:white;'>Aufgabe:</span> Der Vorfall",
        "text": "<b>Horst Hektik (Ausbildungsleiter PlanA GmbH):</b> 'Der Stift hat 'Hurensohn' gesagt. Zu mir. Der fliegt. Sofort. Papiere fertig machen! Man m√ºsste ihn einfach... na du wei√üt schon.'<br><br><b>Dr. Klara Kompetenz (Personalleitung):</b> 'Herr Hektik, bitte m√§√üigen Sie sich. Wir k√ºndigen nicht affektgesteuert. Das ist ein Bildungsauftrag. F√∂rdern Sie die <b>Sozialkompetenz</b>.'",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "options": [
            {
                "text": "P√§dagogische Intervention",
                "next": "ai_social",
                "costTime": 15
            },
            {
                "text": "Horst zustimmen (K√ºndigung)",
                "next": "fail_pedagogy",
                "costTime": 5
            }
        ]
    },
    "fail_pedagogy": {
        "title": "P√§dagogisches Versagen",
        "text": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'Sie entt√§uschen mich. Wir sind P√§dagogen, keine Scharfrichter. Versuchen Sie es erneut - mit Verstand!'",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "moodChange": -20,
        "options": [
            {
                "text": "Neuer Versuch",
                "next": "ai_social",
                "costTime": 5
            }
        ]
    },
    "ai_social": {
        "special": "ai_question",
        "aiId": "hb1_sozial",
        "next": "level_2_intro"
    },
    "level_2_intro": {
        "title": "Zwischenfazit",
        "text": "<b>Dr. Peter Planer (Gesch√§ftsf√ºhrung):</b> 'Ah, da sind Sie ja! Ich hatte gerade eine Vision... Welche war das nochmal? Egal. Wir m√ºssen... gr√∂√üer denken! Strategischer! Kommen Sie in mein B√ºro.'",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "Zur Strategierunde",
                "next": "strategy_recruit",
                "costTime": 0
            }
        ]
    },
    "strategy_recruit": {
        "title": "<span style='color:white;'>Aufgabe:</span> Globales Denken",
        "text": "<b>Dr. Peter Planer (Gesch√§ftsf√ºhrung):</b> 'Der Markt ist leer. Wir m√ºssen... in die Ferne schweifen! Ausland! Rekrutierung! Machen Sie das. Planen Sie alles.'<br><b>Alex Engagiert (Betriebsrat):</b> 'Moment mal! ¬ß 99 BetrVG. Und Integration. Das muss sauber laufen!'",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "Planungsprozess starten",
                "next": "ai_recruit",
                "costTime": 15
            },
            {
                "text": "Einfach mal Stellenanzeige schalten",
                "next": "fail_recruit",
                "costTime": 5
            }
        ]
    },
    "fail_recruit": {
        "title": "Betriebsrat veto",
        "text": "<b>Alex Engagiert (Betriebsrat):</b> 'So nicht, Freunde. Ohne Konzept zur Eingliederung und ohne meine Zustimmung l√§uft hier gar nichts. Das ist gesetzeswidrig!'",
        "char": "alex",
        "charName": "Alex Engagiert",
        "moodChange": -25,
        "options": [
            {
                "text": "Ordentlich planen",
                "next": "ai_recruit",
                "costTime": 10
            }
        ]
    },
    "ai_recruit": {
        "special": "ai_question",
        "aiId": "hb2_recruit",
        "next": "gen_z_scene"
    },
    "gen_z_scene": {
        "title": "<span style='color:white;'>Aufgabe:</span> Generationenkonflikt",
        "text": "<b>Horst Hektik (Ausbildungsleiter PlanA GmbH):</b> 'Die Jungen hauen alle ab. Wollen Sabbatical. Pff. Mach was.'<br><b>Sascha AEVO (Verantwortlicher Ausbilder):</b> 'Wir m√ºssen ihre Werte verstehen, Horst. Erstellen Sie ein Konzept zur Mitarbeiterbindung.'",
        "char": "horst",
        "charName": "Horst Hektik",
        "options": [
            {
                "text": "Konzept zur Mitarbeiterbindung",
                "next": "ai_genz",
                "costTime": 15
            },
            {
                "text": "Obstkorb hinstellen",
                "next": "fail_obst",
                "costTime": 5
            }
        ]
    },
    "fail_obst": {
        "title": "Das reicht nicht",
        "text": "<b>Sascha AEVO (Verantwortlicher Ausbilder):</b> 'Ein Obstkorb? Ernsthaft? Die jungen Leute wollen Perspektiven und Sinn, keine Bananen.'",
        "char": "sascha",
        "charName": "Sascha AEVO",
        "moodChange": -10,
        "options": [
            {
                "text": "Konzept √ºberarbeiten",
                "next": "ai_genz",
                "costTime": 10
            }
        ]
    },
    "ai_genz": {
        "special": "ai_question",
        "aiId": "hb3_genz",
        "next": "transfer_scene"
    },
    "transfer_scene": {
        "title": "<span style='color:white;'>Aufgabe:</span> Schwere Zeiten",
        "text": "<b>Erik Handycap (Sozialarbeit):</b> 'In Anbetracht der bedauerlichen Insolvenz eines Teilbereichs der PlanA GmbH, und unter Ber√ºcksichtigung der sozialen Verantwortung, die wir zweifelsohne tragen, ist es unabdingbar, eine Transfergesellschaft zu gr√ºnden, deren prim√§res Ziel es sein muss...' <br><i>(Er redet noch 5 Minuten weiter)</i><br><b>Viola Communikationis (Inklusion):</b> 'Erik. Meint. Wir. M√ºssen. 50. Leute. Retten. Wir brauchen eine <b>Bildungsbedarfsanalyse</b>.'",
        "char": "erik",
        "charName": "Erik Handycap",
        "options": [
            {
                "text": "Analyse-Leitfaden erstellen",
                "next": "ai_transfer",
                "costTime": 15
            }
        ]
    },
    "ai_transfer": {
        "special": "ai_question",
        "aiId": "hb5_transfer",
        "next": "career_scene"
    },
    "career_scene": {
        "title": "<span style='color:white;'>Aufgabe:</span> Zukunft",
        "text": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'Ich habe noch einmal verschiedene Daten aus Evaluationsfrageb√∂gen analysiert. Unsere betriebliche Effizienz leidet unter Motivationstiefs. Die Leute sehen keinen Aufstieg. Wir brauchen systematische <b>Laufbahnmodelle</b>. Meine KI sagt: Das erh√∂ht die Retention um 40%.'",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "options": [
            {
                "text": "Laufbahnmodelle entwickeln",
                "next": "ai_career",
                "costTime": 15
            }
        ]
    },
    "ai_career": {
        "special": "ai_question",
        "aiId": "hb6_karriere",
        "next": "klara_leave"
    },
    "klara_leave": {
        "title": "Vertrauliches Gespr√§ch",
        "text": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'Kommen Sie doch bitte kurz in mein B√ºro. Ich habe Neuigkeiten: Ich werde in den n√§chsten Wochen in den Mutterschutz gehen. Ich brauche jemanden, der meine Aufgaben als Personalleitung vertretungsweise √ºbernimmt. Ich traue Ihnen das zu ‚Äì aber daf√ºr m√ºssen Sie in der Theorie absolut sattelfest sein. Sind Sie bereit f√ºr eine <b>Experten-Weiterbildung</b>?'",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "options": [
            {
                "text": "Herausforderung annehmen (Weiterbildung starten)",
                "next": "quiz_pe_expert",
                "costTime": 20
            },
            {
                "text": "Ich traue mir das nicht zu",
                "next": "game_over_fail",
                "costTime": 5
            }
        ]
    },
    "quiz_pe_expert": {
        "special": "quiz",
        "quizId": "quiz_pe_expert",
        "next": "crossword_intro"
    },
    "crossword_intro": {
        "title": "Begriffs-Verwirrung",
        "text": "<b>Claudia Papierkram (Verwaltung/KI):</b> 'Hallo! Bevor Sie zu Sebastian gehen... ich sortiere gerade unser Glossar. Meine KI ist abgest√ºrzt und ich muss diese Begriffe manuell zuordnen. Helfen Sie mir kurz beim <b>Kreuzwortr√§tsel</b>? Es geht um PE-Begriffe.'",
        "char": "claudia",
        "charName": "Claudia Papierkram",
        "options": [
            {
                "text": "R√§tsel l√∂sen",
                "next": "crossword_scene",
                "costTime": 10
            }
        ]
    },
    "crossword_scene": {
        "char": "claudia",
        "charName": "Claudia Papierkram",
        "special": "crossword",
        "next": "sebastian_intro",
        "cwId": "crossword_scene_cw_config"
    },
    "sebastian_intro": {
        "title": "Der Praktiker fragt",
        "text": "<b>Sebastian Domini (Technik):</b> 'Gut, dass Sie da sind. Ich habe hier ein theoretisches Problem in der Werkstatt. Meine Azubis wollen Feedback, die IHK will Evaluation. Wo liegt denn da genau der Unterschied? K√∂nnen Sie mir das kurz und knapp erkl√§ren, damit ich nichts Falsches erz√§hle?'",
        "char": "sebastian",
        "charName": "Sebastian Domini",
        "options": [
            {
                "text": "Unterschied erkl√§ren",
                "next": "ai_sebastian",
                "costTime": 10
            }
        ]
    },
    "ai_sebastian": {
        "title": "",
        "text": "",
        "char": "",
        "special": "ai_question",
        "aiId": "ai_sebastian_ai_config",
        "next": "sebastian_thanks"
    },
    "sebastian_thanks": {
        "title": "Erkenntnis",
        "text": "<b>Sebastian Domini (Technik):</b> 'Aha! Feedback f√ºr den Prozess, Evaluation f√ºr das Ergebnis. Verstanden. Das hilft mir sehr. Danke f√ºr die Aufkl√§rung! <br><br> Boris Gemini schaut kurz zur T√ºr rein: Treffen sich zwei KIs im Serverraum. Sagt die eine: \"Puh, ist mir hei√ü...\" Antwortet die andere: \"Keine Sorge, gleich kommt eine komplexe User-Anfrage rein, dann laufen die L√ºfter wieder auf Hochtouren!\" <br><br>Sebastian Domini verdreht die Augen: √úbrigens, Viola sucht Sie schon. Es gibt wohl Redebedarf.'",
        "char": "sebastian",
        "charName": "Sebastian Domini",
        "moodChange": 10,
        "options": [
            {
                "text": "Zu Viola Communikationis gehen",
                "next": "viola_intro",
                "costTime": 5
            }
        ]
    },
    "viola_intro": {
        "title": "Gespr√§chsbedarf",
        "text": "<b>Viola Communikationis (Inklusion):</b> 'Hallo. Ich brauche Ihre Unterst√ºtzung. Wir haben einige Konflikte im Team, und ich m√∂chte sicherstellen, dass unsere Kritikgespr√§che barrierefrei und wertsch√§tzend ablaufen. K√∂nnen Sie mein Wissen zu <b>Gespr√§chsf√ºhrung</b> kurz √ºberpr√ºfen?'",
        "char": "viola",
        "charName": "Viola Communikationis",
        "options": [
            {
                "text": "Wissen √ºberpr√ºfen (Quiz)",
                "next": "quiz_viola",
                "costTime": 10
            }
        ]
    },
    "viola_thanks": {
        "title": "Barrierefrei kommunizieren",
        "text": "<b>Viola Communikationis (Inklusion):</b> 'Vielen Dank. Das gibt mir Sicherheit. Besonders das aktive Zuh√∂ren ist wichtig. Ich werde das sofort im n√§chsten Meeting anwenden.<br><br>Erik wartet √ºbrigens im B√ºro nebenan.'",
        "char": "viola",
        "charName": "Viola Communikationis",
        "moodChange": 10,
        "options": [
            {
                "text": "Zu Erik Handycap gehen",
                "next": "erik_intro",
                "costTime": 5
            }
        ]
    },
    "quiz_viola": {
        "special": "quiz",
        "quizId": "viola_comm_quiz",
        "next": "viola_thanks"
    },
    "erik_intro": {
        "title": "Hilfe zur Selbsthilfe",
        "text": "<b>Erik Handycap (Sozialarbeit):</b> 'In Anbetracht der komplexen psychosozialen Dynamiken... kurz gesagt: Ich coache gerade einen Mitarbeiter in einer schwierigen Phase. Ich m√∂chte sichergehen, dass ich die Rolle des Coaches richtig interpretiere. D√ºrfte ich Sie um eine kurze fachliche Einsch√§tzung bitten?'",
        "char": "erik",
        "charName": "Erik Handycap",
        "options": [
            {
                "text": "Coaching-Kompetenz checken (Quiz)",
                "next": "quiz_erik",
                "costTime": 10
            }
        ]
    },
    "quiz_erik": {
        "special": "quiz",
        "quizId": "erik_coaching_quiz",
        "next": "erik_thanks"
    },
    "erik_thanks": {
        "title": "Klarheit",
        "text": "<b>Erik Handycap (Sozialarbeit):</b> 'Ausgezeichnet. Die Abgrenzung zur Fachberatung war der entscheidende Punkt. Ich danke Ihnen vielmals f√ºr diese kollegiale Beratung.<br><br>Ich glaube, Dr. Kompetenz wollte Sie nun abschlie√üend sprechen.'",
        "char": "erik",
        "charName": "Erik Handycap",
        "moodChange": 10,
        "options": [
            {
                "text": "Zum Abschlussgespr√§ch",
                "next": "calculate_score",
                "costTime": 5
            }
        ]
    },
    "calculate_score": {
        "title": "Abschluss",
        "text": "<b>Dr. Peter Planer (Gesch√§ftsf√ºhrung):</b> 'Nun, das war eine beeindruckende Tour de Force. Meine Visionen wurden... nun ja, konkretisiert. Lassen Sie uns sehen, was dabei herausgekommen ist. Hier ist Ihr Ergebnis.'<br><br><i>(Er unterschreibt das Dokument mit Schwung.)</i>",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "Zertifikat entgegennehmen üìú",
                "specialExec": "showCertificate"
            }
        ]
    },
    "game_over_fail": {
        "title": "Entlassen",
        "text": "Sie haben das Unternehmen ruiniert oder wichtige Chancen verpasst.",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": []
    },
    "resolve_warning": {
        "specialExec": "resolveWarning"
    },
    "giveup_1_talk": {
        "title": "Motivierende Ermahnung",
        "text": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'H√∂ren Sie mal, ich sehe, dass Sie diese Aufgabe abgebrochen haben. Lassen Sie den Kopf nicht h√§ngen! Aller Anfang ist schwer. Ich empfehle Ihnen dringend, sich Zeit f√ºr das Selbststudium in unserer Bibliothek zu nehmen. Versuchen Sie es danach erneut ‚Äì ich wei√ü, dass Sie das k√∂nnen!'",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "moodChange": -10,
        "options": [
            {
                "text": "Danke, ich versuche es weiter.",
                "specialExec": "resumeIntervention"
            }
        ]
    },
    "giveup_2_warning": {
        "title": "M√ºndliche Verwarnung",
        "text": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'Sie haben erneut eine Aufgabe verweigert. Das entspricht nicht dem F√ºhrungsanspruch, den wir hier haben. Ich spreche Ihnen hiermit eine m√ºndliche Verwarnung aus. Wir erwarten L√∂sungen, keine Kapitulation.'",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "moodChange": -20,
        "options": [
            {
                "text": "Ich werde mich bessern.",
                "specialExec": "resumeIntervention"
            }
        ]
    },
    "giveup_3_written": {
        "title": "Schriftliche Abmahnung",
        "text": "<b>Dr. Klara Kompetenz (Personalleitung):</b> 'Das ist nun das dritte Mal. Wir sind zutiefst entt√§uscht. Hiermit √ºberreiche ich Ihnen eine formelle, schriftliche Abmahnung wegen Arbeitsverweigerung. Dies ist Ihre allerletzte Chance.'",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "moodChange": -40,
        "options": [
            {
                "text": "Ich habe verstanden.",
                "specialExec": "resumeIntervention"
            }
        ]
    },
    "giveup_4_fired": {
        "title": "K√ºndigung",
        "text": "<b>Dr. Peter Planer (Gesch√§ftsf√ºhrung):</b> 'Es reicht. Frau Dr. Kompetenz hat mich informiert. Vier mal aufgegeben? Das Vertrauensverh√§ltnis ist zerst√∂rt. Sie sind hiermit fristlos gek√ºndigt. Bitte r√§umen Sie Ihren Schreibtisch.'",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": []
    },
    "Boris-Gemini_befragen": {
        "title": "Chat mit Boris Gemini",
        "text": "Ich bin mit unserer KI Verbunden üòÅ. Wir stellen die Fragen einfach direkt hier im Chat-Fenster:<br><br><iframe src='https://lernchatserver-2025.vercel.app/' style='width:100%; height:700px; border:2px solid #9b59b6; border-radius:8px;'></iframe>",
        "char": "Boris",
        "charName": "Boris Gemini (KI)",
        "options": [
            {
                "text": "Zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1",
                "costTime": 5
            }
        ]
    },
    "Wissen_vertiefen_1": {
        "title": "8-Stufenmodell nach Kotter",
        "text": "<b>Das 8-Stufen-Modell nach John P. Kotter</b><br><br>\nChange Management scheitert oft, weil Schritte √ºbersprungen werden. Kotter beschreibt einen Prozess, um Ver√§nderungen nachhaltig zu gestalten:<br><br>\n\n<b>Phase 1: Das Klima f√ºr den Wandel schaffen</b><br>\n1. <b>Gef√ºhl der Dringlichkeit erzeugen:</b> Machen Sie Mitarbeitenden und F√ºhrungskr√§ften klar, warum <i>jetzt</i> gehandelt werden muss (Marktdruck, Krisen, Chancen).<br>\n2. <b>F√ºhrungskoalition aufbauen:</b> Bilden Sie ein Team mit genug Macht und Einfluss, um den Wandel voranzutreiben.<br>\n3. <b>Vision und Strategie entwickeln:</b> Eine klare Vision motiviert mehr als dicke Handb√ºcher. Wohin geht die Reise?<br><br>\n\n<b>Phase 2: Die Organisation bef√§higen und einbinden</b><br>\n4. <b>Die Vision kommunizieren:</b> Nutzen Sie jeden Kanal. Vorleben ist die beste Kommunikation.<br>\n5. <b>Hindernisse aus dem Weg r√§umen:</b> √Ñndern Sie Strukturen, die die Vision untergraben. Bef√§higen Sie Mitarbeiter zum Handeln (Empowerment).<br>\n6. <b>Kurzfristige Erfolge (Quick Wins) erzielen:</b> Planen Sie sichtbare Erfolge, um Kritiker zu √ºberzeugen und Motivation zu tanken.<br><br>\n\n<b>Phase 3: Den Wandel umsetzen und erhalten</b><br>\n7. <b>Ver√§nderung weiter antreiben:</b> Geben Sie sich nicht zu fr√ºh zufrieden. Nutzen Sie die Glaubw√ºrdigkeit der ersten Erfolge f√ºr gr√∂√üere Projekte.<br>\n8. <b>Ver√§nderungen in der Kultur verankern:</b> Der Wandel ist erst abgeschlossen, wenn er \"die Art, wie wir hier arbeiten\" geworden ist.",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_2": {
        "title": "Das 3-Phasen-Modell nach Kurt Lewin",
        "text": "<b>Das 3-Phasen-Modell nach Kurt Lewin</b><br><br>\nKurt Lewin beschreibt soziale Systeme (wie Unternehmen) als ein \"Kr√§ftefeld\". Um Wandel zu erzeugen, reicht es nicht, einfach neue Regeln aufzustellen. Der Prozess gleicht dem Aggregatzustand von Wasser:<br><br>\n\n<b>Phase 1: Unfreezing (Auftauen)</b><br>\nDer aktuelle Zustand (\"Status Quo\") ist fest gefroren. Um ihn zu formen, muss er aufgetaut werden.<br>\n<i>Aufgabe der F√ºhrung:</i> Bereiten Sie die Betroffenen vor. Bauen Sie Widerst√§nde ab, indem Sie die Notwendigkeit des Wandels erkl√§ren. Die \"treibenden Kr√§fte\" m√ºssen st√§rker werden als die \"beharrenden Kr√§fte\".<br><br>\n\n<b>Phase 2: Moving / Changing (Ver√§ndern)</b><br>\nDer Zustand ist nun fl√ºssig und formbar. Hier passiert die eigentliche Ver√§nderung (neue Software, neue Prozesse, Umstrukturierung).<br>\n<i>Aufgabe der F√ºhrung:</i> Schulen und trainieren Sie die Mitarbeiter. Probieren Sie Neues aus (\"Trial & Error\"). F√ºhrungskr√§fte m√ºssen als Vorbilder vorangehen.<br><br>\n\n<b>Phase 3: Refreezing (Einfrieren/Stabilisieren)</b><br>\nDas Wasser wird in der neuen Form wieder eingefroren. Ohne diesen Schritt kehren Mitarbeiter schnell in alte Muster zur√ºck.<br>\n<i>Aufgabe der F√ºhrung:</i> Feiern Sie Erfolge. Integrieren Sie das Neue in den Alltag (z.B. durch angepasste Arbeitsanweisungen oder Belohnungssysteme). Machen Sie den Wandel zur neuen Gewohnheit.",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_3": {
        "title": "Das Managerial Grid",
        "text": "<b>Das Managerial Grid nach Blake & Mouton</b><br><br>\nF√ºhrungserfolg h√§ngt davon ab, wie zwei grundlegende Orientierungen kombiniert werden. Stellen Sie sich ein Koordinatensystem (1 bis 9) vor:<br><br>\n\n<b>Die zwei Dimensionen:</b><br>\nüëâ <b>Sachorientierung (x-Achse):</b> Fokus auf Leistung, Kennzahlen und Produktionsziele.<br>\nüëâ <b>Menschenorientierung (y-Achse):</b> Fokus auf Zwischenmenschliches, Vertrauen und Betriebsklima.<br><br>\n\n<b>Die 5 Leittypen der F√ºhrung:</b><br><br>\n\n<b>Typ 1.1: Der \"√úberlebens-Management\" (Gleichg√ºltigkeit)</b><br>\n<i>Minimaler Einsatz f√ºr Aufgabe und Menschen.</i><br>\nDer Vorgesetzte macht nur das N√∂tigste, um nicht gek√ºndigt zu werden. Er ist eigentlich nur \"anwesend\".<br><br>\n\n<b>Typ 1.9: Der \"Glacehandschuh-Management\" (Country Club)</b><br>\n<i>Hoher Fokus auf Mensch, kaum Fokus auf Leistung.</i><br>\nEs herrscht eine gem√ºtliche, freundliche Atmosph√§re. Konflikte werden vermieden, aber es wird kaum gearbeitet. \"Hauptsache wir haben uns lieb.\"<br><br>\n\n<b>Typ 9.1: Der \"Befehl-Gehorsam-Management\"</b><br>\n<i>Maximale Leistung, der Mensch ist egal.</i><br>\nMenschen sind nur Werkzeuge der Produktion. Fehler werden bestraft. Klassischer autorit√§rer Stil. (Erinnert an Horst Hektik?)<br><br>\n\n<b>Typ 5.5: Der \"Organisations-Management\" (Kompromiss)</b><br>\n<i>Die goldene Mitte.</i><br>\nMan versucht, beides zu balancieren, erreicht aber nirgendwo Spitzenwerte. \"Blo√ü nicht anecken.\"<br><br>\n\n<b>Typ 9.9: Das \"Team-Management\" (Das Ideal)</b><br>\n<i>Hohe Leistung DURCH zufriedene Mitarbeiter.</i><br>\nZiele werden gemeinsam erarbeitet. Es herrscht Vertrauen und Respekt. Arbeit macht Spa√ü und ist hochproduktiv.",
        "char": "klara",
        "charName": "Dr. Klara Kompetenz",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_4": {
        "title": "√úbersicht der Lerntheorien",
        "text": "<b>√úbersicht der Lerntheorien</b><br><br>\nLernen ver√§ndert sich von der reinen Wissensaufnahme hin zur selbstorganisierten Kompetenzentwicklung. Hier die vier gro√üen Str√∂mungen:<br><br>\n\n<b>TEIL 1: Fremdgesteuerte Lernprozesse</b><br><br>\n<b>1. Behaviorismus</b><br>\n<i>\"Der Mensch als Black-Box.\"</i><br>\nLernen erfolgt durch ein <b>Reiz-Reaktions-Modell</b> (Konditionierung).<br>\nüëâ <b>Rolle der Lehrenden:</b> Lehrer (vermittelt Faktenwissen, gibt Orientierung).<br>\nüëâ <b>Ziel:</b> Initiierung von gew√ºnschtem Verhalten.<br><br>\n\n<b>2. Kognitivismus</b><br>\n<i>\"Lernen durch Einsicht.\"</i><br>\nInformationen werden verarbeitet. Lernen geschieht durch <b>Denken und Verstehen</b>.<br>\nüëâ <b>Rolle der Lehrenden:</b> Trainer & Tutor (zeigt Methoden, ber√§t).<br>\nüëâ <b>Ziel:</b> Zielgerichtete Handlungen.<br><br>\n\n<hr style=\"border:0; border-top:1px solid #555; margin: 10px 0;\"><br>\n\n<b>TEIL 2: Selbstorganisierte Lernprozesse</b><br><br>\n<b>3. Konstruktivismus</b><br>\n<i>\"Jeder baut sich seine Welt.\"</i><br>\nLernen ist ein individueller Prozess basierend auf <b>Erfahrung</b>.<br>\nüëâ <b>Rolle der Begleitenden:</b> Coach (erm√∂glicht situiertes und informelles Lernen).<br>\nüëâ <b>Ziel:</b> Individuelle Probleml√∂sungen.<br><br>\n\n<b>4. Konnektivismus</b><br>\n<i>\"Wissen ist im Netzwerk.\"</i><br>\nLernen findet im <b>Netzwerk</b> und durch Verkn√ºpfungen statt (digital & analog).<br>\nüëâ <b>Rolle der Begleitenden:</b> Mentor (teilt Erfahrungswissen, f√∂rdert Kollaboration).<br>\nüëâ <b>Ziel:</b> Gemeinsame Probleml√∂sungen.",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_5": {
        "title": "Zielvereinbarungen",
        "text": "Text...<b>Zielvereinbarungen (Management by Objectives)</b><br><br>\nF√ºhrung hei√üt nicht, jeden Schritt zu kontrollieren, sondern Ziele vorzugeben und den Weg dorthin freizugeben. Eine gute Zielvereinbarung motiviert und schafft Klarheit.<br><br>\n\n<b>Die SMART-Formel</b><br>\nDamit ein Ziel funktioniert, muss es f√ºnf Kriterien erf√ºllen:<br><br>\nüéØ <b>S - Spezifisch:</b> Das Ziel muss eindeutig definiert sein. (Nicht: \"Mehr Umsatz\", sondern: \"Steigerung des Umsatzes bei Produkt X\").<br>\nüìè <b>M - Messbar:</b> Woran erkennen wir den Erfolg? (Zahlen, Daten, Fakten oder klare Zust√§nde).<br>\n‚úÖ <b>A - Attraktiv (oder Akzeptiert):</b> Der Mitarbeiter muss Lust haben, das Ziel zu erreichen. Es muss herausfordernd, aber machbar sein.<br>\nüôå <b>R - Realistisch:</b> Das Ziel muss mit den vorhandenen Ressourcen erreichbar sein.<br>\nüìÖ <b>T - Terminiert:</b> Bis wann soll das Ziel erreicht werden? (Datum).<br><br>\n\n<b>Der Prozess:</b><br>\n1. <b>Vorbereitung:</b> Beide Seiten machen sich Gedanken.<br>\n2. <b>Gespr√§ch:</b> Dialog! Das Ziel wird <i>vereinbart</i>, nicht diktiert.<br>\n3. <b>Schriftliche Fixierung:</b> Damit es keine Missverst√§ndnisse gibt.<br>\n4. <b>Meilensteine:</b> Regelm√§√üige kurze Checks (nicht erst am Jahresende!).",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_6": {
        "title": "Lernzieltaxonomie nach Bloom",
        "text": "<b>Die Lernzieltaxonomie nach Bloom</b><br><br>\nLernen findet auf unterschiedlichen Niveaustufen statt. Bloom unterteilt den kognitiven Bereich in sechs hierachische Stufen. Wer eine h√∂here Stufe erreichen will, muss die darunterliegenden beherrschen.<br><br>\n\n<b>Die 6 Kognitiven Lernzielstufen (Revidiert):</b><br><br>\n\n<b>1. Erinnern (Wissen):</b><br>\nFakten, Begriffe oder Konzepte aus dem Ged√§chtnis abrufen.<br>\n<i>Verben:</i> nennen, aufz√§hlen, definieren, beschreiben.<br><br>\n\n<b>2. Verstehen:</b><br>\nDie Bedeutung von Informationen erfassen und in eigenen Worten wiedergeben.<br>\n<i>Verben:</i> erkl√§ren, zusammenfassen, interpretieren, vergleichen.<br><br>\n\n<b>3. Anwenden:</b><br>\nDas Gelernte in einer neuen, konkreten Situation nutzen.<br>\n<i>Verben:</i> berechnen, demonstrieren, l√∂sen, anwenden, erstellen.<br><br>\n\n<b>4. Analysieren:</b><br>\nKomplexe Sachverhalte in ihre Bestandteile zerlegen und Zusammenh√§nge verstehen.<br>\n<i>Verben:</i> untersuchen, gliedern, differenzieren, pr√ºfen.<br><br>\n\n<b>5. Beurteilen (Evaluieren):</b><br>\nEin Urteil anhand von Kriterien f√§llen und begr√ºnden.<br>\n<i>Verben:</i> bewerten, entscheiden, kritisieren, rechtfertigen, ausw√§hlen.<br><br>\n\n<b>6. Erschaffen (Synthese/Kreieren):</b><br>\nElemente zu einem neuen Ganzen zusammenf√ºgen (h√∂chstes Niveau).<br>\n<i>Verben:</i> entwerfen, entwickeln, konstruieren, planen, erfinden.",
        "char": "sascha",
        "charName": "Sascha AEVO",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_7": {
        "title": "Gruppendynamik",
        "text": "<b>Formelle vs. Informelle Gruppen</b><br><br>\nIn jedem Unternehmen existieren zwei Strukturen parallel. F√ºr F√ºhrungskr√§fte ist es √ºberlebenswichtig, beide zu erkennen und zu steuern.<br><br>\n\n<b>1. Formelle Gruppen (Die \"offizielle\" Struktur)</b><br>\nDiese Gruppen werden von der Unternehmensleitung geplant und gebildet.<br>\nüëâ <b>Grundlage:</b> Organigramm, Stellenbeschreibungen.<br>\nüëâ <b>Ziel:</b> Erf√ºllung betrieblicher Aufgaben (Effizienz).<br>\nüëâ <b>F√ºhrung:</b> Durch ernannte Vorgesetzte (Instanz).<br>\nüëâ <b>Kommunikation:</b> Dienstwege, Meetings, Berichte.<br>\n<i>Beispiel:</i> Die Buchhaltung, das Projektteam \"Digitalisierung\", die Schichtgruppe A.<br><br>\n\n<b>2. Informelle Gruppen (Das \"Schattenreich\")</b><br>\nDiese Gruppen bilden sich spontan und ungeplant durch menschliche Interaktion.<br>\nüëâ <b>Grundlage:</b> Sympathie, gleiche Interessen, r√§umliche N√§he.<br>\nüëâ <b>Ziel:</b> Befriedigung sozialer Bed√ºrfnisse (Zugeh√∂rigkeit, Schutz, Anerkennung).<br>\nüëâ <b>F√ºhrung:</b> Durch \"informelle F√ºhrer\" (Meinungsf√ºhrer), die Anerkennung der Gruppe genie√üen.<br>\nüëâ <b>Kommunikation:</b> Flurfunk, Ger√ºchtek√ºche, Kaffeepause.<br>\n<i>Beispiel:</i> Die \"Raucher-Clique\", die Fahrgemeinschaft, die \"alten Hasen\".<br><br>\n\n<b>Die Gefahr und die Chance</b><br>\nInformelle Gruppen k√∂nnen die formellen Ziele unterst√ºtzen (kurze Dienstwege, Hilfe) oder boykottieren (Mobbing, Leistungszur√ºckhaltung).<br>\n<i>Tipp: Identifizieren Sie die informellen F√ºhrer und gewinnen Sie diese f√ºr Ihre Ziele!</i>",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_8": {
        "title": "Betriebliche Mitbestimmung",
        "text": "<b>Grundlagen der betrieblichen Mitbestimmung</b><br>\nEine vertrauensvolle Zusammenarbeit zwischen Arbeitgeber und Betriebsrat ist gesetzlich vorgeschrieben (¬ß 2 BetrVG). Doch wie entsteht das Gremium und welche Macht hat es wirklich?<br><br>\n\n<b>TEIL 1: Die Betriebsratswahl</b><br>\nEin Betriebsrat wird nicht vom Arbeitgeber bestimmt, sondern von der Belegschaft in einem streng formalisierten Verfahren demokratisch gew√§hlt. Fehler im Wahlverfahren k√∂nnen zur Anfechtbarkeit oder Nichtigkeit der Wahl f√ºhren.<br><br>\n\n<b>Wann wird gew√§hlt?</b><br>\nDie regul√§ren Wahlen finden alle vier Jahre im Zeitraum vom <b>1. M√§rz bis 31. Mai</b> statt. Au√üerhalb dieses Zeitraums wird nur gew√§hlt, wenn z.B. noch kein Betriebsrat besteht oder der alte zur√ºckgetreten ist.<br><br>\n\n<b>Wer darf w√§hlen und kandidieren?</b><br>\nüëâ <b>Aktives Wahlrecht:</b> W√§hlen d√ºrfen alle Arbeitnehmer des Betriebs, die das 18. Lebensjahr vollendet haben (auch Leiharbeitnehmer, wenn sie l√§nger als 3 Monate im Betrieb sind).<br>\nüëâ <b>Passives Wahlrecht:</b> Gew√§hlt werden darf, wer wahlberechtigt ist und dem Betrieb seit mindestens sechs Monaten angeh√∂rt.<br><br>\n\n<b>Schutzmechanismen</b><br>\nUm die Unabh√§ngigkeit der Wahl zu sichern, genie√üen Mitglieder des Wahlvorstands und Wahlbewerber einen <b>besonderen K√ºndigungsschutz</b> (ab Aufstellung des Wahlvorschlags bis 6 Monate nach der Wahl).<br><br>\n<hr style=\"border:0; border-top:1px solid #555; margin: 15px 0;\">\n\n<b>TEIL 2: Die Stufen der Mitbestimmung</b><br>\nIst der Betriebsrat im Amt, hat er abgestufte Rechte. Nicht bei jedem Thema darf er gleich stark mitreden.<br><br>\n\n<b>Stufe 1: Informationsrecht (Unterrichtung)</b><br>\nDer Arbeitgeber muss den Betriebsrat rechtzeitig und umfassend informieren, entscheidet am Ende aber allein.<br>\n<i>Beispiel:</i> Planung von Neu- und Umbauten, Personalplanung, wirtschaftliche Lage.<br><br>\n\n<b>Stufe 2: Mitwirkungsrecht (Anh√∂rung)</b><br>\nDer Betriebsrat muss vor einer Entscheidung angeh√∂rt werden. Er kann Bedenken √§u√üern oder widersprechen.<br>\n<i>Wichtigstes Beispiel:</i> <b>K√ºndigungen (¬ß 102 BetrVG)</b>. Eine K√ºndigung, ohne dass der Betriebsrat vorher angeh√∂rt wurde, ist unwirksam! Widerspricht der Betriebsrat, muss der Arbeitgeber den Mitarbeiter unter Umst√§nden bis zum Ende des K√ºndigungsschutzprozesses weiterbesch√§ftigen.<br><br>\n\n<b>Stufe 3: Mitbestimmungsrecht (Zustimmung)</b><br>\nDer Arbeitgeber ben√∂tigt die Zustimmung des Betriebsrats. Verweigert dieser die Zustimmung (aus gesetzlichen Gr√ºnden), darf die Ma√ünahme vorerst nicht durchgef√ºhrt werden.<br>\n<i>Beispiel:</i> <b>Personelle Einzelma√ünahmen (¬ß 99 BetrVG)</b> wie Einstellung, Versetzung oder Umgruppierung.<br><br>\n\n<b>Stufe 4: Erzwingbare Mitbestimmung (Das Veto-Recht)</b><br>\nDies ist das \"sch√§rfste Schwert\" (¬ß 87 BetrVG). In sozialen Angelegenheiten kann der Arbeitgeber <b>nichts</b> ohne den Betriebsrat entscheiden. Wenn keine Einigung erzielt wird, entscheidet die Einigungsstelle (ein neutrales Schlichtungsgremium).<br>\n<i>Themen:</i> Beginn und Ende der Arbeitszeit, Pausenregelungen, Anordnung von √úberstunden, Urlaubsrunds√§tze, technische √úberwachungseinrichtungen (Kameras/KI).<br><br>\n<hr style=\"border:0; border-top:1px solid #555; margin: 15px 0;\">\n\n<b>TEIL 3: Die Betriebsvereinbarung (BV)</b><br>\nWenn sich Arbeitgeber und Betriebsrat in mitbestimmungspflichtigen Fragen einigen, schlie√üen sie eine Betriebsvereinbarung ab.<br><br>\n\n<b>Was ist eine BV?</b><br>\nSie ist ein Vertrag zwischen Arbeitgeber und Betriebsrat, der f√ºr alle Arbeitnehmer des Betriebs wie ein Gesetz wirkt (\"unmittelbar und zwingend\").<br><br>\n\n<b>Formvorschriften:</b><br>\n1. <b>Schriftform:</b> Sie muss schriftlich niedergelegt und von beiden Seiten unterschrieben sein.<br>\n2. <b>Bekanntmachung:</b> Der Arbeitgeber muss die BV im Betrieb auslegen oder aush√§ngen (schwarzes Brett / Intranet).<br><br>\n\n<b>Grenzen:</b><br>\nEine Betriebsvereinbarung darf keine Regelungen treffen, die √ºblicherweise in Tarifvertr√§gen geregelt sind (z.B. L√∂hne, Arbeitszeiten), es sei denn, der Tarifvertrag l√§sst dies ausdr√ºcklich zu (√ñffnungsklausel). Dies nennt man \"Tarifvorrang\".",
        "char": "alex",
        "charName": "Alex Engagiert",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_9": {
        "title": "Lerntypen und Lernstiele",
        "text": "...<b>Lerntypen und Lernstile</b><br><br>\nJeder Mensch nimmt Informationen anders auf und verarbeitet sie unterschiedlich. F√ºr Ausbilder und F√ºhrungskr√§fte ist es wichtig, Lernangebote so zu gestalten, dass sie m√∂glichst viele Typen ansprechen.<br><br>\n\n<b>1. Die Wahrnehmungskan√§le (nach Vester)</b><br>\nHier geht es darum, √ºber welchen Sinn Informationen am besten aufgenommen werden:<br><br>\nüëÅÔ∏è <b>Der visuelle Typ (Sehen):</b><br>\nLernt durch Grafiken, Bilder, Videos und Skizzen. Er muss es \"vor Augen haben\".<br>\n<i>Methode:</i> Lehrvideos, Mindmaps, Diagramme.<br><br>\n\nüëÇ <b>Der auditive Typ (H√∂ren):</b><br>\nLernt durch Zuh√∂ren und Gespr√§che. Er kann Vortr√§gen gut folgen.<br>\n<i>Methode:</i> Podcasts, Diskussionen, Lehrgespr√§che.<br><br>\n\n‚úã <b>Der haptische / kin√§sthetische Typ (F√ºhlen/Tun):</b><br>\nLernt durch Ausprobieren und Anfassen. \"Learning by Doing\".<br>\n<i>Methode:</i> Simulationen, Werkstattarbeit, Modelle bauen.<br><br>\n\nüí¨ <b>Der kommunikative / intellektuelle Typ:</b><br>\nLernt durch Austausch, Lesen und kritisches Hinterfragen.<br>\n<i>Methode:</i> Gruppenarbeit, Fachliteratur, Textarbeit.<br><br>\n\n<hr style=\"border:0; border-top:1px solid #555; margin: 15px 0;\">\n\n<b>2. Der Lernzyklus (nach Kolb)</b><br>\nDavid Kolb unterscheidet nicht nach Sinnen, sondern wie Wissen <i>verarbeitet</i> wird. Lernen ist ein Kreislauf aus Erfahrung und Reflexion.<br><br>\nüîπ <b>Der Entdecker (Divergierer):</b> Mag konkrete Erfahrungen und beobachtet gerne. Er ist fantasievoll.<br>\nüîπ <b>Der Denker (Assimilierer):</b> Bildet theoretische Modelle. Er mag logische Ordnung und Fakten.<br>\nüîπ <b>Der Entscheider (Konvergierer):</b> Wendet Theorien praktisch an. Er will wissen: \"Funktioniert das?\"<br>\nüîπ <b>Der Macher (Akkommodierer):</b> Probiert intuitiv aus und geht Risiken ein.<br><br>\n\n<b>Fazit f√ºr die Praxis:</b><br>\nVerlassen Sie sich nicht auf einen Kanal. Nutzen Sie <b>Multicodierung</b>: Bieten Sie Stoff immer visuell UND auditiv UND praktisch an, um den Lernerfolg zu maximieren.",
        "char": "sascha",
        "charName": "Sascha AEVO",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_10": {
        "title": "Strukturierung von Bedarfsanalysen",
        "text": "...Eine strukturierte Bedarfsanalyse identifiziert L√ºcken zwischen dem Ist- und Soll-Zustand, um gezielte L√∂sungen zu entwickeln. Sie umfasst typischerweise die Definition von Zielen, das Sammeln und Analysieren von Daten sowie die Ableitung von Handlungsma√ünahmen.<br><br>\n<b>Die zentralen Schritte im √úberblick:</b><br><br>\n<b>1. Zielsetzung und Planung:</b> Festlegen, was analysiert wird und welche Ziele erreicht werden sollen.<br>\n<b>2. Datensammlung (Ist-Zustand):</b> Informationen durch Umfragen, Interviews oder Beobachtungen einholen.<br>\n<b>3. Datenanalyse:</b> Auswertung, um Muster und den tats√§chlichen Bedarf zu identifizieren.<br>\n<b>4. Bedarfsermittlung (Soll-Zustand):</b> Abgleich des Ist-Zustands mit dem Soll-Zustand (Gap-Analyse).<br>\n<b>5. Priorisierung:</b> Festlegen, welche Bed√ºrfnisse am dringendsten sind.<br>\n<b>6. L√∂sungsentwicklung:</b> Erarbeitung von Ma√ünahmen zur Deckung des Bedarfs.<br>\n<b>7. Dokumentation:</b> Zusammenfassung und Pr√§sentation der Ergebnisse.<br>\n<b>8. Evaluation:</b> Umsetzung und √úberpr√ºfung der Zielerreichung.",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_11": {
        "title": "Kompetenzorientierte Beurteilung",
        "text": "<br><br>\n<b>Konzept: Kompetenzorientierte Beurteilung</b><br><br>\nEin modernes System bewertet nicht nur reine Ergebnisse, sondern Kompetenzen:<br><br>\n<b>1. Die Kriterien:</b><br>\n‚Ä¢ <i>Fachkompetenz:</i> Qualit√§t & Wissen.<br>\n‚Ä¢ <i>Methodenkompetenz:</i> Organisation & Probleml√∂sung.<br>\n‚Ä¢ <i>Sozialkompetenz:</i> Teamwork & Kommunikation.<br>\n‚Ä¢ <i>Pers√∂nlichkeitskompetenz:</i> Motivation & Reflexion.<br><br>\n<b>2. Der Prozess:</b><br>\nVorbereitung (Selbst- vs. Fremdbild) ‚ûî Gespr√§ch ‚ûî Zielvereinbarung ‚ûî Ma√ünahmen.<br><br>\n<b>3. Wichtig: Fehlerquellen vermeiden!</b><br>\nAchten Sie auf den <i>Halo-Effekt</i> (√úberstrahlung) und den <i>Nikolaus-Effekt</i> (nur kurzfristige Erinnerung). Bewerten Sie immer den gesamten Zeitraum!",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "Wissen_vertiefen_12": {
        "title": "Beratungskonzept f√ºr F√ºhrungskr√§fte",
        "text": "<br><br>\n\n<h3>Beratungskonzept: Einf√ºhrung nach Kotter</h3>\nUm das neue Beurteilungssystem erfolgreich gegen Widerst√§nde einzuf√ºhren, folgen wir einem 8-Stufen-Plan:<br><br>\n\n<div style=\"background:rgba(255,255,255,0.1); padding:10px; border-radius:5px; margin-bottom:10px;\">\n<strong style=\"color:#e74c3c;\">PHASE 1: Das Fundament (Vorbereitung)</strong><br>\n<b>1. Dringlichkeit erzeugen:</b><br>\nWir nutzen Daten (Fluktuationsrate, Exit-Interviews), um zu zeigen: Subjektive Beurteilungen kosten uns Geld und Talente. Der \"Nasenfaktor\" ist ein Gesch√§ftsrisiko.<br><br>\n<b>2. F√ºhrungskoalition bilden:</b><br>\nWir holen den Betriebsrat (Alex Engagiert) fr√ºhzeitig ins Boot, um Fairness zu garantieren. Dr. Planer fungiert als Sponsor, Sascha AEVO als \"Leuchtturm\" f√ºr die praktische Anwendung.<br><br>\n<b>3. Vision entwickeln:</b><br>\nWeg von der Kontrolle, hin zur Entwicklung. Das Ziel: \"Transparenz schafft Leistung.\"\n</div>\n\n<div style=\"background:rgba(255,255,255,0.1); padding:10px; border-radius:5px; margin-bottom:10px;\">\n<strong style=\"color:#f1c40f;\">PHASE 2: Die Umsetzung (Rollout)</strong><br>\n<b>4. Vision kommunizieren:</b><br>\nKeine \"stille Post\". Townhall-Meetings und Schulungen gegen Beurteilungsfehler (Halo-Effekt) f√ºr alle Meister.<br><br>\n<b>5. Hindernisse beseitigen:</b><br>\nHorst Hektik f√ºrchtet Papierkram. L√∂sung: Boris Gemini (IT) digitalisiert den Prozess (Tablet-L√∂sung), um den Zeitaufwand zu minimieren.<br><br>\n<b>6. Quick Wins (Erfolge):</b><br>\nStart eines Pilotprojekts in der Verwaltung. Positive Ergebnisse werden nach 3 Monaten pr√§sentiert, um die Produktion zu √ºberzeugen.\n</div>\n\n<div style=\"background:rgba(255,255,255,0.1); padding:10px; border-radius:5px;\">\n<strong style=\"color:#2ecc71;\">PHASE 3: Die Verankerung (Kultur)</strong><br>\n<b>7. Dranbleiben:</b><br>\nAusweitung auf alle Abteilungen und Anpassung der Kriterien an technische Berufsbilder.<br><br>\n<b>8. Verankern:</b><br>\nDas System wird fester Bestandteil des Jahreszyklus und an Budget/Boni gekoppelt. Es wird \"die Art, wie wir hier f√ºhren\".\n</div>",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô Zur√ºck zur Bibliothek",
                "next": "library_main"
            }
        ]
    },
    "office_notes": {
        "title": "Notizblock",
        "text": "<b>Wie gut, dass ich mir Notizen gamacht habe</b>",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô Zur√ºck zum Schreibtisch",
                "next": "B√ºrozeit_1"
            },
            {
                "text": "Wie verl√§uft ein Planungsprozess",
                "next": "Notizblatt_1"
            },
            {
                "text": "Zielgruppenanalyse",
                "next": "Notizblatt_2"
            }
        ]
    },
    "Notizblatt_1": {
        "title": "Wie verl√§uft ein Planungsprozess",
        "text": "Wie gut, dass mir Dr. Klara Kompezenz noch einen Hinweiszettel gegeben hat: <br><br>\n\nPlanung ist die gedankliche Vorwegnahme zuk√ºnftigen Handelns. Ein professioneller Planungsprozess l√§uft in logischen Phasen ab:<br><br>\n\n<b>1. Ist-Analyse (Diagnose)</b><br>\nWo stehen wir gerade? Analyse der Ausgangslage, St√§rken/Schw√§chen (SWOT) und Rahmenbedingungen.<br>\n<i>Frage: \"Was ist das Problem?\"</i><br><br>\n\n<b>2. Zielsetzung</b><br>\nDefinition des gew√ºnschten Soll-Zustands. Ziele m√ºssen SMART sein (Spezifisch, Messbar, Attraktiv, Realistisch, Terminiert).<br>\n<i>Frage: \"Wo wollen wir hin?\"</i><br><br>\n\n<b>3. Ma√ünahmenplanung (Alternativen)</b><br>\nEntwicklung verschiedener Wege zum Ziel. Brainstorming von Optionen und Strategien.<br>\n<i>Frage: \"Wie k√∂nnen wir das erreichen?\"</i><br><br>\n\n<b>4. Bewertung & Entscheidung</b><br>\nVergleich der Alternativen (Kosten-Nutzen-Analyse, Risikoabsch√§tzung) und Auswahl der besten Option.<br>\n<i>Frage: \"Welcher Weg ist der beste?\"</i><br><br>\n\n<b>5. Umsetzung (Durchf√ºhrung)</b><br>\nZuweisung von Aufgaben, Ressourcen und Verantwortlichkeiten. Der Plan wird Realit√§t.<br>\n<i>Frage: \"Wer macht was bis wann?\"</i><br><br>\n\n<b>6. Kontrolle (Soll-Ist-Vergleich)</b><br>\n√úberpr√ºfung, ob das Ziel erreicht wurde. Bei Abweichungen beginnt der Prozess von vorne (Regelkreis).<br>\n<i>Frage: \"Haben wir es geschafft?\"</i>\n\n<b>Checkliste: Planungsschritte</b><br><br>\nVergessen Sie keinen Schritt:<br><br>\n1. üîç <b>Analyse:</b> Ist-Zustand pr√ºfen.<br>\n2. üéØ <b>Ziel:</b> Soll-Zustand definieren (SMART).<br>\n3. üõ§Ô∏è <b>Planung:</b> Ma√ünahmen entwickeln.<br>\n4. ‚öñÔ∏è <b>Entscheidung:</b> Den besten Weg w√§hlen.<br>\n5. üöÄ <b>Umsetzung:</b> Tun!<br>\n6. üìä <b>Kontrolle:</b> Ergebnis pr√ºfen & ggf. korrigieren.<br><br>\n<i>Merke: Planung ersetzt den Zufall durch Irrtum ‚Äì aber Irrtum ist korrigierbar!</i>",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "Notizblatt_2": {
        "title": "Zielgruppenanalyse & Personas",
        "text": "<b>Zielgruppenanalyse & Personas</b><br><br>\nWer alle erreichen will, erreicht niemanden. Eine pr√§zise Zielgruppenanalyse ist das Fundament f√ºr Marketing und Recruiting.<br><br>\n\n<b>1. Klassische Segmentierung (Die \"Hard Facts\")</b><br>\nZuerst wird der Gesamtmarkt anhand von Daten eingegrenzt:<br>\nüìä <b>Demografisch:</b> Alter, Geschlecht, Wohnort, Familienstand.<br>\nüí∞ <b>Sozio√∂konomisch:</b> Bildung, Beruf, Einkommen.<br>\nüè¢ <b>B2B-Besonderheiten:</b> Bei Firmenkunden z√§hlen Branche, Unternehmensgr√∂√üe, Standort und Umsatz.<br><br>\n\n<b>2. Psychografische Merkmale (Die \"Soft Facts\")</b><br>\nViel wichtiger ist oft, wie die Zielgruppe <i>tickt</i>:<br>\nüß† <b>Werte & Einstellungen:</b> Umweltbewusstsein, Sicherheitsbed√ºrfnis, Karrierestreben.<br>\n‚ù§Ô∏è <b>Lifestyle:</b> Hobbys, Mediennutzung, Konsumverhalten.<br><br>\n\n<b>3. Die Methode: Buyer Personas</b><br>\nDaten sind abstrakt. Um Kommunikation greifbar zu machen, entwickelt man fiktive Ideal-Kunden (Personas).<br>\n<i>Beispiel f√ºr den Bildungscampus:</i><br>\n<b>\"Kevin, der Orientierungslose\" (16 Jahre):</b><br>\nWill \"irgendwas mit H√§nden\" machen, hasst lange Texte, ist auf TikTok, braucht Sicherheit und klare Ansagen.\nüëâ <i>Strategie:</i> Kurze Videos, einfache Sprache, Eltern mit ansprechen.<br><br>\n\n<b>4. Customer Journey</b><br>\nWo bewegt sich die Zielgruppe? An welchem \"Touchpoint\" (Ber√ºhrungspunkt) k√∂nnen wir sie abholen? (Social Media, Messe, Schule, Fachzeitschrift).",
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "options": [
            {
                "text": "üîô zur√ºck ins B√ºro",
                "next": "B√ºrozeit_1"
            }
        ]
    },
    "Buchstabensalat_Boris": {
        "char": "Boris",
        "charName": "Boris Gemini (KI)",
        "special": "search",
        "next": "office_emails",
        "searchId": "Buchstabensalat_Boris_search_config"
    },
    "Sortierung_1": {
        "char": "chef",
        "charName": "Dr. Peter Planer",
        "special": "sort",
        "sortId": "Sortierung_1_sort_config",
        "next": "office_emails"
    },
    "email_Alex_Engagiert": {
        "title": "Mail von Alex Engagiert",
        "text": "Sehen Sie sich mal an, was der Ausbilder hier veranstaltet!\nDas kann doch nicht war sein!!!\nIch verlange dass hier sofort eingeschritten wird!!!\n\n",
        "char": "alex",
        "video": "https://www.youtube.com/watch?v=hjwGafJrum4",
        "options": [
            {
                "text": "Entscheidung treffen",
                "next": "Quiz_Ausbildungssituation",
                "costTime": 0,
                "costBudget": 0
            },
            {
                "text": "Zur√ºck zum Posteingang",
                "next": "office_emails",
                "costTime": 0,
                "costBudget": 0
            }
        ]
    },
    "Ausbildungsvideo": {
        "title": "Video der Ausbildungssituation Kabel abisolieren",
        "text": "<b>Was ist Ihnen in dem Video aufgefallen?</b><br><br>\nBitte beantworten Sie die folgenden Fragen.<br>\nBei richtiger L√∂sung gelangen Sie zur√ºck in den Posteingang, Alex Engagiert wird √ºber Ihre Entscheidung automatisch informiert.<br><br>",
        "char": "alex",
        "special": "quiz",
        "quizId": "Ausbildungsvideo_quiz_config",
        "next": "office_emails"
    },
    "Quiz_Ausbildungssituation": {
        "title": "Entscheidung zur Beschwerde von Alex Engagiert",
        "text": "Bitte beantworten Sie die nachfolgenden Fragen.<br><br>\nBei der richtigen L√∂sung werden Sie zum Posteingang zur√ºckgeleitet und\nAlex Engagiert wir √ºber Ihre Entscheidung automatisch informiert.",
        "char": "alex",
        "special": "quiz",
        "quizId": "Quiz_Ausbildungssituation_quiz_config",
        "next": "office_emails"
    },
    "Horst_Hektik_Konzept_Mitarbeiterbeurteilung": {
        "title": "<b>E-Mail von Horst Hektik</b>Betreff: Konzept zur Mitarbeiterbeurteilung",
        "text": "<br>Ich bitte Sie um Hilfe.<br><br>\nIch soll in Zukunft Mitarbeiter beurteilen und ich habe das noch nie gemacht!<br>\nWorauf muss ich den dabei achten???<br><br>\nK√∂nnen Sie mir daf√ºr ein Konzept erstellen nach dem ich mich richten kann?<br>\nUnd ich brauche das m√∂glichst schnell!! Also eigentlich gestern!<br><br>\nGr√º√üe vom Bau...<br>\nHorst Hektik\n\n",
        "char": "horst",
        "options": [
            {
                "text": "<b>E-Mail von Horst Hektik</b>Betreff: Konzept zur Mitarbeiterbeurteilung",
                "next": "office_emails",
                "costTime": 0,
                "costBudget": 0
            },
            {
                "text": "Hilfe anbieten",
                "next": "Konzept_Mitarbeiterbeurteilung",
                "costTime": 0,
                "costBudget": 0
            },
            {
                "text": "",
                "next": "",
                "costTime": 0,
                "costBudget": 0
            }
        ]
    },
    "Konzept_Mitarbeiterbeurteilung": {
        "title": "Konzept zur Mitarbeiterbeurteilung",
        "text": "Bitte erstellen Sie f√ºr Horst Hektik ein schl√ºssiges Konzept zur Mitarbeiterbeurteilung.\nIhr Konzept wird an Horst Hektik weitergeleitet.\nSie kehren dann in den Posteingang zur√ºck.",
        "char": "klara",
        "special": "ai_question",
        "aiId": "Konzept_Mitarbeiterbeurteilung_ai_config",
        "next": "office_emails"
    }
};

    // --- ENGINE ---
    // --- ENGINE ---
    function renderScene(sceneKey) {
    // --- NEU: Besuch speichern ---
    if(!state.visited) state.visited = []; 
    if(!state.visited.includes(sceneKey)) state.visited.push(sceneKey);

    state.currentScene = sceneKey;
        const scene = scenes[sceneKey];
        
        const imgEl = document.getElementById('char-image');
        const fallbackEl = document.getElementById('char-fallback');
        const bgContainer = document.getElementById('char-bg');
        const nameBadge = document.getElementById('char-name');

        // LOGIK-√ÑNDERUNG: Wir nutzen NUR noch die Emojis aus AVATARS
        imgEl.style.display = 'none'; // Echtes Bild immer ausblenden
        fallbackEl.style.display = 'block'; // Emoji immer anzeigen
        
        // Welches Emoji?
        if (AVATARS[scene.char]) {
            fallbackEl.innerHTML = AVATARS[scene.char];
            // Schriftgr√∂√üe f√ºr Emojis sicherstellen
            fallbackEl.style.fontSize = "150px"; 
        } else {
            fallbackEl.innerHTML = ''; 
        }
        
        // Spezial-Farbe f√ºr Klara (Lila Hintergrund)
        if (scene.char === 'klara') {
            bgContainer.classList.add('klara-mode');
            nameBadge.classList.add('klara-mode');
        } else {
            bgContainer.classList.remove('klara-mode');
            nameBadge.classList.remove('klara-mode');
        }

        document.getElementById('char-name').innerText = scene.charName || "";
        document.getElementById('scene-title').innerHTML = scene.title || "";
        document.getElementById('scene-text').innerHTML = scene.text || "";

        const actionsDiv = document.getElementById('actions');
        actionsDiv.innerHTML = "";
        
        // DASHBOARD-CHECK:
        // Setzt das Design zur√ºck oder aktiviert den Kachel-Modus
        actionsDiv.className = 'actions-container'; // Reset
        if (scene.layout === 'dashboard') {
            actionsDiv.classList.add('dashboard-mode');
        }

        const charExtraDiv = document.getElementById('char-extra');
        charExtraDiv.innerHTML = ""; 
        charExtraDiv.style.display = "none";
        // Style Reset f√ºr Standard-Box
        charExtraDiv.style.background = "rgba(0,0,0,0.4)";
        charExtraDiv.style.border = "1px solid #555";
        charExtraDiv.style.padding = "20px";
        charExtraDiv.style.backdropFilter = "blur(5px)";

        const nameInputGroup = document.getElementById('name-input-group');

        // Sonderfall INTRO Szene
        if (sceneKey === 'intro') {
            nameInputGroup.style.display = 'block';
            fallbackEl.innerHTML = 'üë®‚Äçüíº'; // Geb√§ude-Emoji f√ºr Intro
            
            if (scene.leftContent) {
                charExtraDiv.style.display = "block";
                // Transparenter Style f√ºr Intro-Text links
                charExtraDiv.style.background = "transparent";
                charExtraDiv.style.border = "none";
                charExtraDiv.style.padding = "0";
                charExtraDiv.style.backdropFilter = "none";
                charExtraDiv.innerHTML = scene.leftContent;
            }
        } else {
            nameInputGroup.style.display = 'none';
            if (CHAR_DESCRIPTIONS[scene.char]) { 
                charExtraDiv.style.display = "flex";  
                charExtraDiv.innerHTML = `<div class="role-text">${CHAR_DESCRIPTIONS[scene.char]}</div>`;
            }
        }

        // Game Over Check
        if ((state.time <= 0 || state.mood <= 0 || state.budget <= 0) && sceneKey !== 'game_over_fail') { 
            renderScene('game_over_fail'); 
            return; 
        }

        // Spezial-Szenen Trigger
        if (scene.special === 'ai_question') {
            openAiOverlay(scene.aiId, scene.next);
        } else if (scene.special === 'quiz') {
            openQuizOverlay(scene.quizId, scene.next);
        } else if (scene.special === 'crossword') {
            openCrosswordOverlay(scene.next, scene.cwId);
        } else if (scene.special === 'search') {
openSearchOverlay(scene.next, scene.searchId);
        } else if (scene.special === 'sort') {
    openSortOverlay(scene.next, scene.sortId);
} else if (scene.special === 'calc_score') {
            // Warten auf User Interaction (Zertifikat)
       } else if (scene.options && scene.options.length === 0 && sceneKey !== 'intro' && sceneKey !== 'giveup_4_fired') {
        let btn = document.createElement('button');
        
        // HIER WURDE DER FEHLERHAFTE TEIL ENTFERNT

        btn.className = 'choice-btn'; 
        btn.innerHTML = "<strong>üîÑ Neu starten</strong>";
        btn.onclick = () => safeReload(); 
        actionsDiv.appendChild(btn); 
       } else {

            // --- NEU: Video-Button Logik ---
            if (scene.video) {
                let vidBtn = document.createElement('button');
                vidBtn.className = 'choice-btn';
                // Roter Style f√ºr Video damit er auff√§llt
                vidBtn.style.background = "linear-gradient(180deg, #c0392b 0%, #96281b 100%)";
                vidBtn.style.borderColor = "#e74c3c";
                
                // Hier mit Backticks (`) - das ist fehlertoleranter:
                vidBtn.innerHTML = `<strong>‚ñ∂Ô∏è Video ansehen</strong> <span style='font-size:0.8rem; opacity:0.8;'>(Neues Fenster)</span>`;
                
                vidBtn.onclick = () => window.open(scene.video, '_blank');
                actionsDiv.appendChild(vidBtn);
            }
            // -------------------------------

            scene.options.forEach(opt => {
            let btn = document.createElement('button');
            btn.className = 'choice-btn';

            // --- CHECKMARK LOGIK START ---
            if(state.visited && state.visited.includes(opt.next)) {
                btn.classList.add('read');
            }
            // --- CHECKMARK LOGIK ENDE ---

            if(opt.specialClass) btn.classList.add(opt.specialClass);

                let costs = [];
                if(opt.costTime) costs.push(`‚è≥ -${opt.costTime}`);
                if(opt.costBudget) costs.push(`üí∞ -${opt.costBudget}`);
                btn.innerHTML = `<strong>${opt.text}</strong>` + (costs.length > 0 ? `<span class="cost-hint">${costs.join(', ')}</span>` : '');
                
                if(opt.specialExec) btn.onclick = () => window[opt.specialExec]();
                else btn.onclick = () => makeDecision(opt);
                
                actionsDiv.appendChild(btn);
            });
        }
        updateKPIs(); updateUndoBtn();
    }

   // --- NEU: Passwort-Check Funktion ---
    function checkUndStarten() {
        const pwField = document.getElementById("tagespasswort");
        const errorMsg = document.getElementById("pw-error");
        
        // HIER DAS PASSWORT FESTLEGEN:
        const echtesPasswort = "Leipzig2026"; 

        if (pwField.value === echtesPasswort) {
            // Richtig -> Fehler ausblenden & Starten
            errorMsg.style.display = "none";
            startGame(); 
        } else {
            // Falsch -> Fehler anzeigen & Rot markieren
            errorMsg.style.display = "block";
            pwField.style.border = "2px solid #e84545";
            // Kleiner Wackeleffekt (optional)
            pwField.animate([
                { transform: 'translateX(0)' },
                { transform: 'translateX(-10px)' },
                { transform: 'translateX(10px)' },
                { transform: 'translateX(0)' }
            ], { duration: 300 });
        }
    }

    function startGame() { makeDecision({next:'start'}); }

    function makeDecision(option) {
        historyStack.push(JSON.parse(JSON.stringify(state)));
        if(option.costTime) state.time -= option.costTime;
        if(option.costBudget) state.budget -= option.costBudget;
        if(option.costMood) state.mood -= option.costMood; 
        const nextScene = scenes[option.next];
        if(nextScene && nextScene.moodChange) state.mood += nextScene.moodChange;
        renderScene(option.next);
    }

    function undoMove() {
        if (historyStack.length === 0) return;
        state = historyStack.pop();
        renderScene(state.currentScene);
    }

    function updateUndoBtn() { document.getElementById('undo-btn').disabled = historyStack.length === 0; }

    function updateKPIs() { setBar('bar-time', state.time); setBar('bar-budget', state.budget); setBar('bar-mood', state.mood); }

    function setBar(id, val) {
        val = Math.max(0, Math.min(100, val));
        const el = document.getElementById(id); el.style.width = val + '%';
        if(val < 30) el.style.background = '#e84545'; else if(val < 60) el.style.background = '#f1c40f'; else el.style.background = '#2ecc71';
    }

    // --- LOGIK F√úR AUFGEBEN (ESKALATION) ---
    function giveUp() {
        document.getElementById('overlay-ai').classList.add('hidden');
        document.getElementById('overlay-quiz').classList.add('hidden');
        document.getElementById('overlay-crossword').classList.add('hidden');
        document.getElementById('overlay-search').classList.add('hidden');
document.getElementById('overlay-sort').classList.add('hidden');
        
        state.giveUpCount = (state.giveUpCount || 0) + 1;
        
        resumeSceneAfterIntervention = nextSceneStored; 
        
        if (state.giveUpCount === 1) {
            renderScene('giveup_1_talk');
        } else if (state.giveUpCount === 2) {
            renderScene('giveup_2_warning');
        } else if (state.giveUpCount === 3) {
            renderScene('giveup_3_written');
        } else {
            renderScene('giveup_4_fired');
        }
    }

    function resumeIntervention() {
        if (resumeSceneAfterIntervention && scenes[resumeSceneAfterIntervention]) {
            renderScene(resumeSceneAfterIntervention);
        } else {
            renderScene('intro'); 
        }
    }

    // --- DEBUG SKIP & ADMIN CHEAT ---
    function debugSkip() {
        // Diese Funktion wird in den Overlays genutzt
        document.getElementById('overlay-ai').classList.add('hidden');
        document.getElementById('overlay-quiz').classList.add('hidden');
        document.getElementById('overlay-crossword').classList.add('hidden');
        document.getElementById('overlay-search').classList.add('hidden');
document.getElementById('overlay-sort').classList.add('hidden');
        if(nextSceneStored) renderScene(nextSceneStored);
        else renderScene('intro'); 
    }

    function adminCheat() {
        // 1. Ressourcen auff√ºllen (Unsterblichkeit)
        state.time = 100;
        state.budget = 100;
        state.mood = 100;
        updateKPIs();
        // 2. Pr√ºfen, ob ein Overlay offen ist
       const overlays = ['overlay-ai', 'overlay-quiz', 'overlay-crossword', 'overlay-search', 'overlay-cert', 'overlay-sort'];
        let overlayOpen = false;
        overlays.forEach(id => {
            if (!document.getElementById(id).classList.contains('hidden')) {
                overlayOpen = true;
                // Overlay schlie√üen und weiter
                document.getElementById(id).classList.add('hidden');
                if(nextSceneStored) renderScene(nextSceneStored);
            }
        });
        if (overlayOpen) return;
        // 3. Wenn kein Overlay: Erste Option der aktuellen Szene w√§hlen
        const current = scenes[state.currentScene];
        if (current && current.options && current.options.length > 0) {
            const nextKey = current.options[0].next;
            if (nextKey) renderScene(nextKey);
        } else if (current && current.specialExec) { 
            // Sonderfall Zertifikat oder √§hnliches 
            window[current.specialExec]();
        } else {
            alert("Ende der Fahnenstange oder keine automatische Option verf√ºgbar.");
        }
    }

  // --- NEUE DYNAMISCHE KREUZWORTR√ÑTSEL LOGIK ---
    
    // Standard-Daten (Fallback), falls im Admin-Tool noch nichts gespeichert wurde
    let crosswordData = {
    "default_cw": {
        "words": [
            {
                "word": "MENTORING",
                "clu": "Langfristiger Berater (8 B.)",
                "x": 0,
                "y": 0,
                "dir": "h"
            },
            {
                "word": "COACHING",
                "clu": "Prozessbegleitung (8 B.)",
                "x": 5,
                "y": 0,
                "dir": "v"
            },
            {
                "word": "ZIELE",
                "clu": "Angestrebtes Ergebnis (5 B.)",
                "x": 4,
                "y": 4,
                "dir": "h"
            }
        ]
    },
    "crossword_scene_cw_config": {
        "words": [
            {
                "word": "MENTORING",
                "clu": "Begleitung nach dem Onboarding",
                "x": 3,
                "y": 6,
                "dir": "h"
            },
            {
                "word": "COACHING",
                "clu": "Hilfe zur Selbsthilfe",
                "x": 5,
                "y": 0,
                "dir": "v"
            },
            {
                "word": "ZIEL",
                "clu": "Angestrebtes Ergebnis ",
                "x": 9,
                "y": 5,
                "dir": "v"
            },
            {
                "word": "AZUBI",
                "clu": "Kurzwort f√ºr Auszubildende",
                "x": 5,
                "y": 2,
                "dir": "h"
            },
            {
                "word": "BETRIEBSRAT",
                "clu": "Mitarbeitervertretung",
                "x": 0,
                "y": 0,
                "dir": "v"
            },
            {
                "word": "KOTTER",
                "clu": "Erfinder des 8-Stufenmodells",
                "x": 7,
                "y": 5,
                "dir": "v"
            },
            {
                "word": "IHK",
                "clu": "Zust√§ndige Stelle",
                "x": 4,
                "y": 4,
                "dir": "h"
            },
            {
                "word": "BBIG",
                "clu": "Abk. Berufsbildungsgesetz",
                "x": 9,
                "y": 0,
                "dir": "v"
            },
            {
                "word": "AUSBILDER",
                "clu": "m√§nnlicher Lernprozessbegleiter f√ºr Azubis",
                "x": 0,
                "y": 9,
                "dir": "h"
            },
            {
                "word": "ATS",
                "clu": "Software zur Bewerberauswahl",
                "x": 2,
                "y": 7,
                "dir": "v"
            },
            {
                "word": "BILDUNG",
                "clu": "",
                "x": 11,
                "y": 0,
                "dir": "v"
            },
            {
                "word": "ROI",
                "clu": "Return of Investment",
                "x": 0,
                "y": 3,
                "dir": "h"
            },
            {
                "word": "KMK",
                "clu": "Abk√ºrzung f√ºr das Zusammetntreffen der Kultusminister",
                "x": 9,
                "y": 10,
                "dir": "h"
            },
            {
                "word": "BORIS",
                "clu": "Toller Dozent aus Leipzig",
                "x": 2,
                "y": 0,
                "dir": "v"
            },
            {
                "word": "LAM",
                "clu": "Abk√ºrzung Lern- und Arbeitsmethodik",
                "x": 9,
                "y": 8,
                "dir": "h"
            },
            {
                "word": "EGO",
                "clu": "Selbstbild, das eine Person von sich hat",
                "x": 0,
                "y": 1,
                "dir": "h"
            },
            {
                "word": "ICON",
                "clu": "Grafisches Symbol auf  einem Computermonitor",
                "x": 4,
                "y": 0,
                "dir": "h"
            },
            {
                "word": "KI",
                "clu": "Abk√ºrzung K√ºnstliche Intelligenz",
                "x": 4,
                "y": 8,
                "dir": "v"
            }
        ]
    }
};

    let currentCwId = null;

    function openCrosswordOverlay(next, cwId = 'default_cw') {
        nextSceneStored = next;
        currentCwId = cwId;
        const data = crosswordData[cwId] || crosswordData['default_cw'];
        
        const container = document.getElementById('crossword-container');
        container.innerHTML = "";
        
        // Grid-Gr√∂√üe automatisch ermitteln
        let maxX = 0; let maxY = 0;
        let startNumbers = {}; 
        
        // W√∂rter sortieren f√ºr logische Nummerierung (1, 2, 3...)
        let sortedWords = [...data.words].sort((a,b) => (a.y - b.y) || (a.x - b.x));

        sortedWords.forEach((w, i) => {
            w.originalIndex = i + 1; // Nummer merken
            if(w.dir === 'h') { maxX = Math.max(maxX, w.x + w.word.length); maxY = Math.max(maxY, w.y + 1); }
            else { maxX = Math.max(maxX, w.x + 1); maxY = Math.max(maxY, w.y + w.word.length); }
            
            if(!startNumbers[w.y]) startNumbers[w.y] = {};
            if(!startNumbers[w.y][w.x]) startNumbers[w.y][w.x] = [];
            startNumbers[w.y][w.x].push(w.originalIndex);
        });
        
        // Grid definieren
        container.style.gridTemplateColumns = `repeat(${maxX}, 35px)`;
        
        // Grid bauen
        let grid = [];
        for(let y=0; y<maxY; y++) {
            grid[y] = [];
            for(let x=0; x<maxX; x++) { grid[y][x] = { char: null, isInput: false }; }
        }
        data.words.forEach(w => {
            for(let i=0; i<w.word.length; i++) {
                let cx = w.x + (w.dir === 'h' ? i : 0);
                let cy = w.y + (w.dir === 'v' ? i : 0);
                grid[cy][cx] = { char: w.word[i], isInput: true };
            }
        });

        // HTML generieren (Ohne Rand-Koordinaten)
        let html = "";
        for(let y=0; y<maxY; y++) {
            for(let x=0; x<maxX; x++) {
                const cell = grid[y][x];
                let cellContent = "";
                
                if(startNumbers[y] && startNumbers[y][x]) {
                    cellContent += `<span class="cw-start-num">${startNumbers[y][x].join(',')}</span>`;
                }

                if(cell.isInput) {
                    cellContent += `<input class="cw-cell" type="text" maxlength="1" data-char="${cell.char}" data-x="${x}" data-y="${y}" style="background:transparent; border:none; width:100%; height:100%; text-align:center; font-weight:bold; color:white; font-size:1.2rem; text-transform:uppercase;">`;
                    html += `<div class="cw-cell" style="padding:0;">${cellContent}</div>`;
                } else {
                    html += `<div class="cw-cell black"></div>`;
                }
            }
        }
        container.innerHTML = html;

        // Legende aufbauen (2 Spalten: Waagerecht / Senkrecht)
        const cluesBox = document.querySelector('.cw-clues');
        cluesBox.innerHTML = "";

        const wordList = sortedWords.map((w) => ({ ...w, nr: w.originalIndex }));
        const horizontal = wordList.filter(w => w.dir === 'h');
        const vertical = wordList.filter(w => w.dir === 'v');

        let htmlLegend = `<div><strong style="color:#f1c40f; border-bottom:1px solid #555; display:block; margin-bottom:5px;">‚û°Ô∏è Waagerecht</strong>`;
        if(horizontal.length === 0) htmlLegend += `<div style="color:#777; font-style:italic;">Keine</div>`;
        horizontal.forEach(w => {
            htmlLegend += `<div style="margin-bottom:4px;"><span style="color:#f1c40f; font-weight:bold;">${w.nr}.</span> ${w.clu}</div>`;
        });
        htmlLegend += `</div>`;

        htmlLegend += `<div><strong style="color:#f1c40f; border-bottom:1px solid #555; display:block; margin-bottom:5px;">‚¨áÔ∏è Senkrecht</strong>`;
        if(vertical.length === 0) htmlLegend += `<div style="color:#777; font-style:italic;">Keine</div>`;
        vertical.forEach(w => {
            htmlLegend += `<div style="margin-bottom:4px;"><span style="color:#f1c40f; font-weight:bold;">${w.nr}.</span> ${w.clu}</div>`;
        });
        htmlLegend += `</div>`;

        cluesBox.innerHTML = htmlLegend;

        document.getElementById('overlay-crossword').classList.remove('hidden');
        document.getElementById('btn-cw-success').classList.add('hidden');
        document.getElementById('cw-feedback').innerText = "";
    }

    function checkCrossword() {
        const inputs = document.querySelectorAll('#crossword-container input');
        let allCorrect = true;
        inputs.forEach(input => {
            // Hinweis: input.parentElement ist das div.cw-cell
            if (!input.value || input.value.toUpperCase() !== input.dataset.char) {
                input.parentElement.style.backgroundColor = "#e74c3c";
                allCorrect = false;
            } else {
                input.parentElement.style.backgroundColor = "#2ecc71";
            }
        });
        
        if(allCorrect) {
            document.getElementById('cw-feedback').innerText = "Perfekt gel√∂st!";
            document.getElementById('cw-feedback').style.color = "#2ecc71";
            document.getElementById('btn-cw-success').classList.remove('hidden');
            
            // PUNKTE
            state.time += 5; state.budget += 5; state.mood += 5;
            updateKPIs();
        } else {
            document.getElementById('cw-feedback').innerText = "Da stimmt was nicht.";
            document.getElementById('cw-feedback').style.color = "#e74c3c";
        }
    }

    // NEUE FUNKTION: L√ñSUNG ANZEIGEN
    function solveCrossword() {
        const inputs = document.querySelectorAll('#crossword-container input');
        inputs.forEach(input => {
            input.value = input.dataset.char;
        });
        // Sofort pr√ºfen lassen, damit es gr√ºn wird und der Weiter-Button kommt
        checkCrossword();
    }
    
    function closeCrosswordOverlay() {
        document.getElementById('overlay-crossword').classList.add('hidden');
        renderScene(nextSceneStored);
    }

    // --- BUCHSTABENSALAT DATEN ---
    let searchPuzzles = {
    "default_search": {
        "words": [
            "TEST",
            "SALAT"
        ],
        "gridSize": 5,
        "grid": [
            [
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "X",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                }
            ],
            [
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                }
            ]
        ]
    },
    "franziska_chaos": {
        "words": [
            "ORDNUNG",
            "AKTE",
            "FRIST",
            "RECHT",
            "BUERO"
        ],
        "gridSize": 8,
        "grid": [
            [
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "C",
                    "isSalad": false
                },
                {
                    "char": "H",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "K",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "U",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "J",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "G",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "B",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "J",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "D",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": false
                },
                {
                    "char": "X",
                    "isSalad": true
                }
            ]
        ]
    },
    "franziska_search_puzzle_search_config": {
        "words": [
            "PR√úFUNG",
            "QUALIFIKATIONSMATRIX",
            "LERNPROZESS",
            "SOLL-IST-VERGLEICH",
            "3-STUFEN-MODELL",
            "8-STUFEN-MODELL",
            "PERSONALF√úHRUNG",
            "F√úHRUNGSSTIL",
            "PERSONALBEDARF",
            "BETRIEBSRAT",
            "F√úHRUNGSPRINZIP",
            "REIFEGRADMODELL",
            "MARKETINGMIX",
            "LERNZIEL",
            "TAXONOMIE",
            "LERNTRANSFER",
            "FACHKOMPETENZ",
            "DIDAKTIK",
            "METHODIK",
            "MUTTERSCHUTZ"
        ],
        "gridSize": 20,
        "grid": [
            [
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "P",
                    "isSalad": false
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "8",
                    "isSalad": false
                },
                {
                    "char": "3",
                    "isSalad": false
                },
                {
                    "char": "B",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "-",
                    "isSalad": false
                },
                {
                    "char": "-",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "√ú",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "W",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "H",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "-",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": false
                }
            ],
            [
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "X",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": false
                }
            ],
            [
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "B",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "J",
                    "isSalad": true
                },
                {
                    "char": "√ú",
                    "isSalad": false
                }
            ],
            [
                {
                    "char": "T",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": false
                }
            ],
            [
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": false
                },
                {
                    "char": "Z",
                    "isSalad": false
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "B",
                    "isSalad": false
                },
                {
                    "char": "-",
                    "isSalad": false
                },
                {
                    "char": "D",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "-",
                    "isSalad": false
                },
                {
                    "char": "-",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "P",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": true
                },
                {
                    "char": "U",
                    "isSalad": false
                }
            ],
            [
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "V",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "√ú",
                    "isSalad": false
                },
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": false
                }
            ],
            [
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "D",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": false
                },
                {
                    "char": "D",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "H",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "T",
                    "isSalad": true
                },
                {
                    "char": "T",
                    "isSalad": true
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "U",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": false
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": false
                },
                {
                    "char": "Z",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "Q",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "K",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "X",
                    "isSalad": false
                }
            ],
            [
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "H",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "D",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "K",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "G",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "G",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "√ú",
                    "isSalad": false
                },
                {
                    "char": "H",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                }
            ]
        ]
    },
    "Buchstabensalat_Boris_search_config": {
        "words": [
            "COMPUTER",
            "LERNEN",
            "GEMINI",
            "HILFE",
            "GAMIFICATION",
            "DIGITALISIERUNG",
            "SOFTWARE",
            "OPENAI",
            "SOFTWARE"
        ],
        "gridSize": 15,
        "grid": [
            [
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "J",
                    "isSalad": true
                },
                {
                    "char": "G",
                    "isSalad": true
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "T",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "J",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "J",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "U",
                    "isSalad": true
                },
                {
                    "char": "J",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "J",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "W",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "D",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "S",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "U",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": false
                }
            ],
            [
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "G",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "W",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "G",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "L",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": false
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": false
                },
                {
                    "char": "Q",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "J",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "G",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "T",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "G",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "M",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "C",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "T",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "O",
                    "isSalad": false
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "V",
                    "isSalad": true
                },
                {
                    "char": "V",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "T",
                    "isSalad": true
                },
                {
                    "char": "O",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "A",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "P",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "N",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "H",
                    "isSalad": false
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": false
                },
                {
                    "char": "F",
                    "isSalad": false
                },
                {
                    "char": "E",
                    "isSalad": false
                },
                {
                    "char": "A",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": false
                },
                {
                    "char": "L",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "U",
                    "isSalad": true
                },
                {
                    "char": "E",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "W",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "Z",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                }
            ],
            [
                {
                    "char": "C",
                    "isSalad": true
                },
                {
                    "char": "Y",
                    "isSalad": true
                },
                {
                    "char": "K",
                    "isSalad": true
                },
                {
                    "char": "R",
                    "isSalad": true
                },
                {
                    "char": "F",
                    "isSalad": true
                },
                {
                    "char": "M",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                },
                {
                    "char": "D",
                    "isSalad": true
                },
                {
                    "char": "I",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "S",
                    "isSalad": true
                },
                {
                    "char": "B",
                    "isSalad": true
                },
                {
                    "char": "T",
                    "isSalad": true
                },
                {
                    "char": "X",
                    "isSalad": true
                },
                {
                    "char": "H",
                    "isSalad": true
                }
            ]
        ],
        "btnText": "Weiter"
    }
};

    let currentSearchId = null;

    // --- BUCHSTABENSALAT LOGIK ---
    
    function openSearchOverlay(next, searchId = 'default_search') {
        nextSceneStored = next;
        currentSearchId = searchId;
        const data = searchPuzzles[searchId] || searchPuzzles['default_search'];
        
        const container = document.getElementById('search-container');
        container.innerHTML = "";
        
        container.style.gridTemplateColumns = `repeat(${data.gridSize}, 35px)`;
        
        const listDiv = document.getElementById('search-words-display');
        listDiv.innerHTML = "";
        if(data.words) {
            data.words.forEach(w => {
                listDiv.innerHTML += `<div class="search-word-item">${w}</div>`;
            });
        }
        
        if(data.grid) {
            data.grid.forEach((row, rIndex) => {
                row.forEach((cell, cIndex) => {
                    const div = document.createElement('div');
                    div.className = 'search-cell';
                    div.innerText = cell.char;
                    div.dataset.r = rIndex;
                    div.dataset.c = cIndex;
                    
                    div.onclick = function() {
                        if(this.classList.contains('solved')) return; 
                        this.classList.toggle('selected');
                    };
                    container.appendChild(div);
                });
            });
        }

        document.getElementById('search-feedback').innerText = "";
        document.getElementById('btn-search-success').classList.add('hidden');
        document.getElementById('overlay-search').classList.remove('hidden');
    }

    function checkSearchPuzzle() {
        const data = searchPuzzles[currentSearchId] || searchPuzzles['default_search'];
        const cells = document.querySelectorAll('.search-cell');
        let mistakes = 0;
        let missing = 0;

        cells.forEach(div => {
            const r = parseInt(div.dataset.r);
            const c = parseInt(div.dataset.c);
            const isSelected = div.classList.contains('selected');
            
            const cellData = data.grid[r][c];
            const isTarget = !cellData.isSalad; 

            if(cellData.isSalad && isSelected) {
                div.classList.add('wrong');
                setTimeout(() => div.classList.remove('wrong'), 500); 
                mistakes++;
            }
            else if(isTarget && !isSelected) {
                missing++;
            }
        });

        const feedback = document.getElementById('search-feedback');
        
        if(mistakes === 0 && missing === 0) {
            feedback.innerText = "Hervorragend! Alles gefunden.";
            feedback.style.color = "#2ecc71";
            
            cells.forEach(div => {
                if(div.classList.contains('selected')) div.classList.add('solved');
            });
            
            document.getElementById('btn-search-success').classList.remove('hidden');
            
            state.time += 5; state.budget += 5; updateKPIs();
        } else {
            feedback.style.color = "#e74c3c";
            if(mistakes > 0) feedback.innerText = `${mistakes} falsche Buchstaben markiert!`;
            else feedback.innerText = "Da fehlen noch Buchstaben!";
        }
    }

    // NEUE FUNKTION: Buchstabensalat l√∂sen
    function solveSearchPuzzle() {
        const data = searchPuzzles[currentSearchId] || searchPuzzles['default_search'];
        const cells = document.querySelectorAll('.search-cell');
        cells.forEach(div => {
            const r = parseInt(div.dataset.r);
            const c = parseInt(div.dataset.c);
            const cellData = data.grid[r][c];
            // Wenn es KEIN Salat ist (also Teil eines Wortes), dann ausw√§hlen
            if (!cellData.isSalad) {
                div.classList.add('selected');
            } else {
                div.classList.remove('selected'); // Falls falsche ausgew√§hlt waren
            }
        });
        // Pr√ºfung ausl√∂sen, damit der gr√ºne Erfolgstext erscheint
        checkSearchPuzzle();
    }

    function closeSearchOverlay() {
        document.getElementById('overlay-search').classList.add('hidden');
        renderScene(nextSceneStored);
    }
// --- SORTIER-AUFGABE LOGIK ---
    
    function openSortOverlay(next, sortId) {
        nextSceneStored = next;
        currentSortId = sortId;
        const task = sortTasks[sortId];
        
        if(!task) { alert("Fehler: Sortier-Daten nicht gefunden!"); return; }

        document.getElementById('sort-intro').innerHTML = task.intro || "Bringen Sie die Elemente in die richtige Reihenfolge (Klicken zum Tauschen oder Ziehen).";
        
        // Items kopieren und mischen
        let items = [...task.items];
        // Fisher-Yates Shuffle (damit es nicht schon gel√∂st ist)
        for (let i = items.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [items[i], items[j]] = [items[j], items[i]];
        }

        const container = document.getElementById('sort-container');
        container.innerHTML = "";

        items.forEach((text, index) => {
            const div = document.createElement('div');
            div.className = 'sort-item';
            div.draggable = true;
            div.innerHTML = `<span class="sort-handle">‚ò∞</span> <span class="sort-text">${text}</span>`;
            
            // Event Listener f√ºr Drag & Drop und Klick-Swap
            div.addEventListener('dragstart', handleDragStart);
            div.addEventListener('dragover', handleDragOver);
            div.addEventListener('drop', handleDrop);
            div.addEventListener('click', handleItemClick); // Klick-Support
            
            container.appendChild(div);
        });

        document.getElementById('sort-feedback').innerText = "";
        document.getElementById('btn-sort-success').classList.add('hidden');
        document.getElementById('overlay-sort').classList.remove('hidden');
    }

    // Variablen f√ºr Klick-Swap Logik
    let selectedSortItem = null;

    function handleItemClick(e) {
        // Wenn schon gel√∂st, nichts mehr machen
        if(!document.getElementById('btn-sort-success').classList.contains('hidden')) return;

        let clicked = this;
        
        if (selectedSortItem === null) {
            // Erstes Item ausw√§hlen
            selectedSortItem = clicked;
            clicked.classList.add('selected');
        } else if (selectedSortItem === clicked) {
            // Deselektieren
            clicked.classList.remove('selected');
            selectedSortItem = null;
        } else {
            // Tauschen
            swapElements(selectedSortItem, clicked);
            selectedSortItem.classList.remove('selected');
            selectedSortItem = null;
        }
    }

    // Drag & Drop Helfer
    function handleDragStart(e) { draggedItem = this; e.dataTransfer.effectAllowed = 'move'; this.style.opacity = '0.4'; }
    function handleDragOver(e) { if (e.preventDefault) e.preventDefault(); e.dataTransfer.dropEffect = 'move'; return false; }
    function handleDrop(e) {
        if (e.stopPropagation) e.stopPropagation();
        this.style.opacity = '1'; draggedItem.style.opacity = '1';
        if (draggedItem !== this) { swapElements(draggedItem, this); }
        return false;
    }

    function swapElements(el1, el2) {
        const parent = el1.parentNode;
        const temp = document.createElement('div'); // Platzhalter
        parent.insertBefore(temp, el2);
        parent.insertBefore(el2, el1);
        parent.insertBefore(el1, temp);
        parent.removeChild(temp);
    }

    function checkSortTask() {
        const currentItems = document.querySelectorAll('#sort-container .sort-text');
        const correctItems = sortTasks[currentSortId].items;
        let isCorrect = true;

        currentItems.forEach((item, index) => {
            const div = item.parentNode; // Das .sort-item div
            div.classList.remove('correct', 'wrong');
            
            if (item.innerText.trim() === correctItems[index].trim()) {
                div.classList.add('correct');
            } else {
                div.classList.add('wrong');
                isCorrect = false;
            }
        });

        const fb = document.getElementById('sort-feedback');
        if (isCorrect) {
            fb.innerText = "Perfekt! Die Reihenfolge stimmt.";
            fb.style.color = "#2ecc71";
            document.getElementById('btn-sort-success').classList.remove('hidden');
            state.time += 5; state.budget += 5; updateKPIs();
        } else {
            fb.innerText = "Das stimmt noch nicht ganz. Rot markierte sind an der falschen Position.";
            fb.style.color = "#e74c3c";
        }
    }

    function closeSortOverlay() {
        document.getElementById('overlay-sort').classList.add('hidden');
        renderScene(nextSceneStored);
    }
    // --- KI & QUIZ LOGIK ---
    let nextSceneStored = '';
    
    function openAiOverlay(aiId, next) {
        currentAiId = aiId;
        nextSceneStored = next;
        const scenario = aiScenarios[aiId];
        
        document.getElementById('ai-topic').innerHTML = scenario.title;
        document.getElementById('ai-intro').innerHTML = scenario.intro ? scenario.intro : "";
        document.getElementById('ai-input').value = "";
        document.getElementById('ai-result-box').style.display = 'none';
        
        document.getElementById('btn-ai-continue').classList.add('hidden');
        document.getElementById('btn-ai-retry').classList.add('hidden');
        document.getElementById('btn-ai-skip').classList.add('hidden');
        document.getElementById('btn-ai-print').classList.add('hidden');
        
        document.getElementById('overlay-ai').classList.remove('hidden');
    }

   
async function analyzeAIAnswer() {
    const userText = document.getElementById('ai-input').value; 
    const scenario = aiScenarios[currentAiId]; 
    
    const feedbackBox = document.getElementById('ai-result-box');
    feedbackBox.style.display = 'block';
    document.getElementById('ai-feedback-text').innerHTML = "<i>Verbindung zu 'ki-lernaufgaben' wird aufgebaut...</i> ‚è≥";
    document.getElementById('ai-verdict').innerText = "";
    document.getElementById('ai-score-fill').style.width = "0%";

    try {
        // HIER IST IHRE GEW√úNSCHTE ADRESSE:
        const apiUrl = "https://ki-lernaufgaben.vercel.app/"; 
        
        const response = await fetch(apiUrl, { 
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                messages: [
                    { role: "system", content: scenario.gradingPrompt },
                    { role: "user", content: userText } 
                ] 
            })
        });

        if (!response.ok) {
            throw new Error(`Serverfehler: ${response.status}`);
        }

        const data = await response.text(); 
        
        // Punktzahl auslesen
        let score = 0;
        const scoreMatch = data.match(/PUNKTE:\s*(\d+)/i);
        if (scoreMatch && scoreMatch[1]) {
            score = parseInt(scoreMatch[1]); 
        } else {
            score = 50; // Fallback
        }

        const cleanText = data.replace(/PUNKTE:\s*\d+(\/100)?/i, "").trim();
        displayAiResult(score, cleanText);

    } catch (error) {
        console.error(error);
        document.getElementById('ai-feedback-text').innerHTML = 
            `<span style="color:#e74c3c"><b>Verbindung fehlgeschlagen:</b><br>
            Konnte ${apiUrl} nicht erreichen.<br>
            <i>${error.message}</i><br><br>
            <b>Tipp:</b> Wenn Sie die Datei lokal (Doppelklick) ge√∂ffnet haben, blockiert der Browser oft diese Adresse ("CORS-Fehler").<br>
            Die lokale Bewertung wird als Ersatz genutzt.</span><hr>` + 
            analyzeAIAnswerLocal(true); 
    }
}
    function analyzeAIAnswerLocal(returnTextOnly = false) {
        const userText = document.getElementById('ai-input').value.toLowerCase();
        const scenario = aiScenarios[currentAiId];
        let matches = 0;
        scenario.keywords.forEach(kw => { if (userText.includes(kw)) matches++; });
        let percent = Math.min(100, Math.round((matches / Math.min(4, scenario.keywords.length)) * 100));
        
        let text = (percent < 50) ? scenario.thresholds[30] : scenario.thresholds[100];
        
        if(returnTextOnly) {
            displayAiResult(percent, text + " (Offline-Bewertung)");
            return "";
        } else {
            displayAiResult(percent, text + " (Offline-Bewertung)");
        }
    }

    function displayAiResult(score, text) {
        const fill = document.getElementById('ai-score-fill');
        const verdict = document.getElementById('ai-verdict');
        const btnContinue = document.getElementById('btn-ai-continue');
        const btnRetry = document.getElementById('btn-ai-retry');
        const btnSkip = document.getElementById('btn-ai-skip');
        const btnPrint = document.getElementById('btn-ai-print');
        const scenario = aiScenarios[currentAiId];

        setTimeout(() => { fill.style.width = score + "%"; }, 100);
        
        if(!document.getElementById('ai-feedback-text').innerHTML.includes("Fehler")) { 
            document.getElementById('ai-feedback-text').innerHTML = text;
        } else { 
            document.getElementById('ai-feedback-text').innerHTML += "<br>" + text;
        }

        btnPrint.classList.remove('hidden');

        if (score < 50) {
            fill.style.background = "#c0392b"; 
            verdict.innerText = "‚ùå Nicht bestanden (" + score + "%)"; 
            verdict.style.color = "#c0392b"; 
            
            btnContinue.classList.add('hidden');
            btnRetry.classList.remove('hidden'); 
            btnSkip.classList.remove('hidden'); 
            
            document.getElementById('ai-feedback-text').innerHTML += `<br><br><b>Tipp:</b> ${scenario.solutionHint}`;
        } else {
            fill.style.background = "#2ecc71"; 
            verdict.innerText = "‚úÖ Bestanden (" + score + "%)"; 
            verdict.style.color = "#2ecc71"; 
            
            // --- ZUSATZPUNKTE VERGEBEN ---
            state.time += 5;
            state.budget += 5;
            state.mood += 5;
            updateKPIs();
            // -----------------------------

            btnContinue.classList.remove('hidden');
            btnRetry.classList.add('hidden');
            btnSkip.classList.add('hidden');
        }
    }

    function closeAiOverlay() { document.getElementById('overlay-ai').classList.add('hidden'); renderScene(nextSceneStored); }

    function resetAiInput() {
        document.getElementById('ai-input').value = "";
        document.getElementById('ai-result-box').style.display = 'none';
        document.getElementById('ai-input').focus();
    }

    function copyAiText() { const copyText = document.getElementById("ai-input"); copyText.select(); navigator.clipboard.writeText(copyText.value); alert("Text kopiert!"); }
    
    // DIE NEUE INTELLIGENTE DRUCK-FUNKTION
    function printOverlay() { 
        const textarea = document.getElementById('ai-input');
        const printDiv = document.createElement('div');
        printDiv.innerText = textarea.value;
        printDiv.className = 'ai-input-area'; 
        printDiv.style.height = 'auto'; 
        printDiv.style.overflow = 'visible';
        printDiv.style.border = '1px solid #ccc';
        printDiv.style.color = '#000';
        printDiv.style.background = '#fff';
        printDiv.id = 'temp-print-div';
        textarea.style.display = 'none';
        textarea.parentNode.insertBefore(printDiv, textarea);

        window.print();

        setTimeout(() => {
            printDiv.remove();
            textarea.style.display = 'block';
        }, 500);
    }

    function skipAiTask() {
        if(confirm("Aufgabe wirklich √ºberspringen? Das gibt leider keine Punkte f√ºr das Zertifikat.")) {
            closeAiOverlay();
        }
    }

    // --- QUIZ FUNCTIONS (Standard) ---
    function openQuizOverlay(quizId, next) {
        currentQuizId = quizId; nextSceneStored = next; currentQuiz = quizzes[quizId];
        
        document.getElementById('quiz-topic').innerHTML = currentQuiz.title; 
        document.getElementById('quiz-intro').innerHTML = currentQuiz.intro || "Bitte l√∂sen Sie die folgende Aufgabe:";
        
        document.getElementById('quiz-law-text').innerHTML = currentQuiz.law; document.getElementById('quiz-law-text').classList.remove('hidden');
        const container = document.getElementById('quiz-questions-container'); container.innerHTML = "";
        currentQuiz.questions.forEach((q, index) => {
            let html = `<div style="margin-bottom:15px; break-inside: avoid;"><strong>${index+1}. ${q.q}</strong><br>`;
            q.options.forEach(opt => { html += `<label class="quiz-option"><input type="checkbox" name="q${index}" value="${opt.val}"> ${opt.text}</label>`; });
            html += `</div>`; container.innerHTML += html;
        });
        document.getElementById('quiz-feedback').innerText = ""; document.getElementById('btn-quiz-success').classList.add('hidden');
        document.getElementById('overlay-quiz').classList.remove('hidden');
    }

    function checkQuiz() {
        let allCorrect = true;
        currentQuiz.questions.forEach((q, index) => {
            const checkboxes = document.querySelectorAll(`input[name="q${index}"]`);
            checkboxes.forEach(chk => { if (chk.checked !== (chk.value === 'true')) allCorrect = false; });
        });
        const feedback = document.getElementById('quiz-feedback');
        if(allCorrect) {
            feedback.innerText = "Korrekt."; feedback.style.color = "#2ecc71"; document.getElementById('btn-quiz-success').classList.remove('hidden');
            
            // --- ZUSATZPUNKTE VERGEBEN ---
            state.time += 5;
            state.budget += 5;
            state.mood += 5;
            updateKPIs();
            // -----------------------------
        } else {
            feedback.innerText = "Fehlerhaft."; feedback.style.color = "#e74c3c"; document.getElementById('btn-quiz-success').classList.add('hidden');
        }
    }
    
    function closeQuizOverlay() { document.getElementById('overlay-quiz').classList.add('hidden'); renderScene(nextSceneStored); }

    function safeReload() { if(confirm("Neustart?")) location.reload(); }

    function openImpressum() { document.getElementById('overlay-impressum').classList.remove('hidden'); }
    function closeImpressum() { document.getElementById('overlay-impressum').classList.add('hidden'); }
    
   // ZERTIFIKAT-LOGIK MIT ABSTUFUNGEN
    function showCertificate() { 
        const totalScore = state.budget + state.mood; 
        const playerNameInput = document.getElementById('player-name').value;
        const displayName = (playerNameInput && playerNameInput.trim() !== "") ? playerNameInput : "Teilnehmer/in";
        document.getElementById('cert-player-name').innerText = displayName;
        
        let title, text, color;
        if (totalScore >= 170) {
            title = "Exzellenz-Zertifikat (Vision√§r)";
            text = "Eine √ºberragende Leistung. Sie haben den Bildungscampus strategisch perfektioniert!";
            color = "#9b59b6"; // Lila
        } else if (totalScore >= 140) {
            title = "Master-Zertifikat (DQR 7)";
            text = "Hervorragende strategische Leistung! Sie haben die meisten H√ºrden gemeistert.";
            color = "#2ecc71"; // Gr√ºn
        } else if (totalScore >= 100) {
            title = "Kompetenz-Zertifikat";
            text = "Solide Leistung. Sie haben das Planspiel erfolgreich abgeschlossen.";
            color = "#3498db"; // Blau
        } else {
            title = "Teilnahmebescheinigung";
            text = "Sie haben das Szenario durchlaufen. Es besteht noch Potenzial zur Optimierung.";
            color = "#e67e22"; // Orange
        }
        document.getElementById('cert-grade-title').innerText = title; 
        document.getElementById('cert-grade-title').style.color = color;
        document.getElementById('cert-grade-text').innerHTML = text; 
        document.getElementById('overlay-cert').classList.remove('hidden'); 
    }

    // --- NEU: FUNKTION F√úR TEAM-SIDEBAR (Mit deinen neuen Emojis) ---
    const TEAM_DETAILS = [
        { emoji: 'üë®üèº‚Äçüíº', name: 'Dr. Peter Planer', role: 'Gesch√§ftsf√ºhrung' },
        { emoji: 'ü§µüèæ‚Äç‚ôÄÔ∏è', name: 'Dr. Klara Kompetenz', role: 'Personalleitung' },
        { emoji: 'üë∑üèª', name: 'Horst Hektik', role: 'Ausbildungsleiter PlanA' },
        { emoji: 'üë®üèΩ‚Äç‚öñÔ∏è', name: 'Sascha AEVO', role: 'Verantwortlicher Ausbilder' },
        { emoji: 'üë©‚Äçüíº', name: 'Franziska Immerda', role: 'Verwaltung' },
        { emoji: 'üë®üèª‚Äçüíª', name: 'Boris Gemini', role: 'IT-Abteilung' },
        { emoji: 'üôéüèª‚Äç‚ôÇÔ∏è', name: 'Alex Engagiert', role: 'Betriebsrat' },
        { emoji: 'ü§∑üèª‚Äç‚ôÄÔ∏è', name: 'Claudia Papierkram', role: 'Verwaltung/Assistenz' },
        { emoji: 'üë®‚Äçüåæ', name: 'Olaf Ordentlich', role: 'Hausmeister' },
        { emoji: 'üôãüèª‚Äç‚ôÄÔ∏è', name: 'Viola Communikationis', role: 'Inklusion' },
        { emoji: 'üë®‚Äçüè´', name: 'Erik Handycap', role: 'Sozialarbeit' },
        { emoji: 'üë®üèª‚Äçüîß', name: 'Sebastian Domini', role: 'Technik/Meister' }
    ];

   function toggleTeamSidebar() {
        const sidebar = document.getElementById('team-sidebar');
        const content = document.getElementById('team-sidebar-content');
        
        // Umschalten (Rein/Raus)
        sidebar.classList.toggle('open');

        // Nur beim ersten √ñffnen bef√ºllen (Performance)
        if (sidebar.classList.contains('open') && content.innerHTML.trim() === "") {
            let html = "";
            TEAM_DETAILS.forEach(member => {
                const emoji = AVATARS[member.id] || member.emoji || "‚ùì"; // Fallback Logik
                html += `
                <div class="team-list-item">
                    <div class="team-emoji">${emoji}</div>
                    <div class="team-info">
                        <span class="team-name-side">${member.name}</span>
                        <span class="team-role-side">${member.role}</span>
                    </div>
                </div>`;
            });
            content.innerHTML = html;
        }
    }

    // --- B√úRO LOGIK (R√ºckfahrt-Ticket) ---
    let returnTicket = null;

    function goToOffice() {
        // Wir speichern die aktuelle Szene NUR, wenn wir nicht schon im B√ºro sind
        // Damit der "Zur√ºck"-Knopf nicht √ºberschrieben wird, wenn man von Unterseiten zur√ºckkommt
        if (state.currentScene !== 'B√ºrozeit_1' && 
            !state.currentScene.startsWith('office_') && 
            !state.currentScene.startsWith('library_') && 
            state.currentScene !== 'Wissen_vertiefen_1' && 
            state.currentScene !== 'Boris-Gemini_befragen') {
            returnTicket = state.currentScene;
        }
        renderScene('B√ºrozeit_1');
    }

    function returnFromOffice() {
        if (returnTicket) {
            renderScene(returnTicket);
        } else {
            renderScene('intro'); // Fallback
        }
    }
    
    // --- PLATZHALTER FUNKTIONEN (falls mal gebraucht, aber jetzt √ºber Szenen gel√∂st) ---
    function showNotes() { renderScene('office_notes'); }
    function showEmails() { renderScene('office_emails'); }
    function showStats() { renderScene('office_stats'); }

    renderScene('intro');
</script>
</body>
</html>
